import{_ as a}from"./plugin-vue_export-helper-c27b6911.js";import{r,o,c as p,a as e,b as t,d as n,e as s}from"./app-7187cc90.js";const d={},l=e("h1",{id:"_5-2-用户认证系统集成",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_5-2-用户认证系统集成","aria-hidden":"true"},"#"),t(" 5.2 用户认证系统集成")],-1),c={href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/",target:"_blank",rel:"noopener noreferrer"},h=s('<p>您好，本章主要讲解与jenkins与用户认证系统集成 例如：LDAP Gitlab GitHub 。我们做实验的过程中建议先开启匿名模式，防止配置错误导致无法直接登录。 😀</p><hr><p>Jenkins默认使用自带数据库模式存储用户，在企业中一般都会有统一的认证中心，例如 LDAP、ActiveDirectory中管理用户。可以配置Jenkins集成实现统一用户管理。</p><h2 id="ldap系统集成" tabindex="-1"><a class="header-anchor" href="#ldap系统集成" aria-hidden="true">#</a> ldap系统集成</h2><p>LDAP系统是用于用户管理，在配置集成的时候我们只需要以下信息：</p><ul><li>服务器地址： ldap://192.168.1.200</li><li>服务器端口: 389</li><li>组织OU: ou=jenkins,dc=devops,dc=com</li><li>管理员账号和密码: cn=admin,dc=devops,dc=com</li></ul><p>首先，我需要在Jenkins系统中安装<code>LDAP</code>插件，然后进入 系统管理 -&gt; <code>全局安全配置</code>页面中。</p>',7),g={href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/01.png",target:"_blank",rel:"noopener noreferrer"},_=e("img",{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/01.png",alt:"images"},null,-1),u=e("p",null,"填写好信息之后，我们可以点击测试按钮进行测试。会模拟用户登录，成功后再保存配置即可。",-1),k={href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/02.png",target:"_blank",rel:"noopener noreferrer"},m=e("img",{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/02.png",alt:"images"},null,-1),b=s('<h2 id="gitlab单点登录" tabindex="-1"><a class="header-anchor" href="#gitlab单点登录" aria-hidden="true">#</a> gitlab单点登录</h2><p>一般我们会配置Gitlab系统与LDAP系统做用户认证集成，开发人员登录gitlab系统的频率还是很多的，今天我们的配置效果是：当用户已经登录了gitlab，再次打开Jenkins会自动登入。</p><h3 id="gitlab配置" tabindex="-1"><a class="header-anchor" href="#gitlab配置" aria-hidden="true">#</a> gitlab配置</h3><p>首先，我们需要在Gitlab中添加一个应用。系统设置 -&gt; 应用管理</p><p>填写Jenkins回调地址<code>http://jenkinsserver:8080/securityRealm/finishLogin</code>,勾选权限默认具有<code>read_user</code>权限即可。</p>',5),f={href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/03.png",target:"_blank",rel:"noopener noreferrer"},j=e("img",{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/03.png",alt:"images"},null,-1),v=e("code",null,"ApplicationId",-1),G=e("code",null,"secret",-1),x={href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/04.png",target:"_blank",rel:"noopener noreferrer"},A=e("img",{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/04.png",alt:"images"},null,-1),L=e("h3",{id:"jenkins配置",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#jenkins配置","aria-hidden":"true"},"#"),t(" jenkins配置")],-1),J=e("code",null,"Gitlab Authentication",-1),D=e("code",null,"全局安全配置",-1),I=e("code",null,"ApplicationId",-1),P=e("code",null,"secret",-1),H={href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/05.png",target:"_blank",rel:"noopener noreferrer"},N=e("img",{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/05.png",alt:"images"},null,-1),V=e("p",null,[t("注意：当Jenkins前面有代理的时候可能会出现跳转错误的问题。这时候需要看下提示错误的redirect URL地址,检查下图配置。 如果下图配置没有问题，请检查代理的配置问题。另外要注意是"),e("code",null,"http"),t("模式哦")],-1),y={href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/06.png",target:"_blank",rel:"noopener noreferrer"},B=e("img",{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/06.png",alt:"images"},null,-1),E=e("h2",{id:"github单点登录",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#github单点登录","aria-hidden":"true"},"#"),t(" github单点登录")],-1),R=e("p",null,"如果你用过GitLab，你会发现与GitHub很类似。这里我们要配置的GitHub集成与GitLab配置很类似。",-1),O=e("h3",{id:"github配置",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#github配置","aria-hidden":"true"},"#"),t(" github配置")],-1),S={href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/07.png",target:"_blank",rel:"noopener noreferrer"},U=e("img",{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/07.png",alt:"images"},null,-1),q=e("code",null,"http://jenkinsserver:8080/securityRealm/finishLogin",-1),C={href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/08.png",target:"_blank",rel:"noopener noreferrer"},T=e("img",{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/08.png",alt:"images"},null,-1),w={href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/09.png",target:"_blank",rel:"noopener noreferrer"},z=e("img",{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/09.png",alt:"images"},null,-1),F=e("h3",{id:"配置jenkins",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#配置jenkins","aria-hidden":"true"},"#"),t(" 配置jenkins")],-1),K=e("p",null,[t("我们需要在Jenkins系统中安装插件"),e("code",null,"Github Authentication"),t("， 然后导航到"),e("code",null,"全局安全配置"),t("。 填写Gitlab系统地址和上面在Gitlab创建的应用的"),e("code",null,"ApplicationId"),t(),e("code",null,"secret"),t("。")],-1),M={href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/10.png",target:"_blank",rel:"noopener noreferrer"},Q=e("img",{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/10.png",alt:"images"},null,-1),W={href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/11.png",target:"_blank",rel:"noopener noreferrer"},X=e("img",{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/11.png",alt:"images"},null,-1);function Y(Z,$){const i=r("ExternalLinkIcon");return o(),p("div",null,[l,e("blockquote",null,[e("p",null,[t("转载自："),e("a",c,[t("用户认证系统集成 | 泽阳"),n(i)])])]),h,e("p",null,[e("a",g,[_,n(i)])]),u,e("p",null,[e("a",k,[m,n(i)])]),b,e("p",null,[e("a",f,[j,n(i)])]),e("p",null,[t("保存配置，会提示以下信息，这些信息需要填写到Jenkins中。"),v,t(),G,e("a",x,[A,n(i)])]),L,e("p",null,[t("我们需要在Jenkins系统中安装插件"),J,t("， 然后导航到"),D,t("。 填写Gitlab系统地址和上面在Gitlab创建的应用的"),I,t(),P,t("。"),e("a",H,[N,n(i)])]),V,e("p",null,[e("a",y,[B,n(i)])]),E,R,O,e("p",null,[t("首先登录GitHub, settings -> Developer Settings -> Oauth Apps。"),e("a",S,[U,n(i)])]),e("p",null,[t("新建应用：填写Jenkins回调地址"),q,t("。"),e("a",C,[T,n(i)])]),e("p",null,[t("保存，获取应用ID和secret"),e("a",w,[z,n(i)])]),F,K,e("p",null,[e("a",M,[Q,n(i)])]),e("p",null,[t("效果："),e("a",W,[X,n(i)])])])}const ie=a(d,[["render",Y],["__file","user-auth.html.vue"]]);export{ie as default};
