import{_ as s}from"./plugin-vue_export-helper-c27b6911.js";import{o as e,c as t,e as i}from"./app-1a5afd71.js";const a={},n=i(`<h1 id="_7-常见问题" tabindex="-1"><a class="header-anchor" href="#_7-常见问题" aria-hidden="true">#</a> 7 常见问题</h1><h3 id="_4-3-关于ssh连接一些常见的错误说明" tabindex="-1"><a class="header-anchor" href="#_4-3-关于ssh连接一些常见的错误说明" aria-hidden="true">#</a> 4.3 关于ssh连接一些常见的错误说明</h3><ol><li><code>ERROR! to use the &#39;ssh&#39; connection type with passwords, you must install the sshpass program</code></li></ol><p>完整错误示例如下：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>root@ctnr:/etc/ansible# ansible &#39;*.a32-168-1.*&#39; -m ping
ctnr.a32-168-1.prod.yiz | FAILED! =&gt; {
    &quot;failed&quot;: true, 
    &quot;msg&quot;: &quot;ERROR! to use the &#39;ssh&#39; connection type with passwords, you must install the sshpass program&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>一般出现这种错误，是在通过密码验证远程被管理机的时候，需要在server端安装sshpass：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>yum install sshpass -y 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol><li><code>Using a SSH password instead of a key is not possible because Host Key checking is enabled and sshpass does not support this. Please add this host&#39;s fingerprint to your known_hosts file to manage this host</code></li></ol><p>完整错误如下：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ansible test -a &#39;uptime&#39;

192.168.1.1| FAILED =&gt;Using a SSH password instead of a key is not possible because HostKey checking is enabled and sshpass does not support this.Please add this host&#39;s fingerprint to your known_hosts file to manage this host.
192.168.1.2 | FAILED =&gt; Using a SSH password instead of a key is not possible because Host Key checking is enabled and sshpass does not support this.  Please add this host&#39;s fingerprint to your known_hosts file to manage this host.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这种错误通常就出现在server端第一次连接被管理机的时候，就是上面说到的需要通过输入yes/no进行确认将key字符串加入到<code>~/.ssh/known_hosts</code>文件中。</p><p>解决办法有两个：</p><ul><li>通过修改上面提到的host_key_checking，将其设置为false</li><li>通过修改ssh_args参数，修改如下：</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ssh_args = -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,14),o=[n];function d(l,r){return e(),t("div",null,o)}const u=s(a,[["render",d],["__file","qa.html.vue"]]);export{u as default};
