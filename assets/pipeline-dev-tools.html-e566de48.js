import{_ as t}from"./plugin-vue_export-helper-c27b6911.js";import{r as a,o as l,c as d,a as e,b as n,d as s,e as r}from"./app-b4984da4.js";const o={},u=e("h1",{id:"_4-6-æµæ°´çº¿å¼€å‘å·¥å…·",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_4-6-æµæ°´çº¿å¼€å‘å·¥å…·","aria-hidden":"true"},"#"),n(" 4.6 æµæ°´çº¿å¼€å‘å·¥å…·")],-1),c={href:"http://docs.idevops.site/jenkins/pipelinesyntax/chapter05/",target:"_blank",rel:"noopener noreferrer"},v=e("p",null,"æ‚¨å¥½ï¼Œæœ¬æ¨¡å—ä¸»è¦äº†è§£åœ¨æµæ°´çº¿ä¸­å¸¸ç”¨çš„æ–¹æ³•ğŸ˜€",-1),m=e("hr",null,null,-1),p=e("h2",{id:"ç‰‡æ®µç”Ÿæˆå™¨",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#ç‰‡æ®µç”Ÿæˆå™¨","aria-hidden":"true"},"#"),n(" ç‰‡æ®µç”Ÿæˆå™¨")],-1),b=e("p",null,"ä½¿ç”¨ç‰‡æ®µç”Ÿæˆå™¨å¯ä»¥æ ¹æ®ä¸ªäººéœ€è¦ç”Ÿæˆæ–¹æ³•ï¼Œæœ‰äº›æ–¹æ³•æ¥æºäºæ’ä»¶ï¼Œåˆ™éœ€è¦å…ˆå®‰è£…ç›¸å…³çš„æ’ä»¶æ‰èƒ½ä½¿ç”¨å“¦ã€‚",-1),h={href:"http://docs.idevops.site/jenkins/pipelinesyntax/chapter05/images/01.png",target:"_blank",rel:"noopener noreferrer"},x=e("img",{src:"http://docs.idevops.site/jenkins/pipelinesyntax/chapter05/images/01.png",alt:"images"},null,-1),g={href:"http://docs.idevops.site/jenkins/pipelinesyntax/chapter05/images/02.png",target:"_blank",rel:"noopener noreferrer"},_=e("img",{src:"http://docs.idevops.site/jenkins/pipelinesyntax/chapter05/images/02.png",alt:"images"},null,-1),q=e("h2",{id:"å£°æ˜å¼è¯­æ³•ç”Ÿæˆå™¨",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#å£°æ˜å¼è¯­æ³•ç”Ÿæˆå™¨","aria-hidden":"true"},"#"),n(" å£°æ˜å¼è¯­æ³•ç”Ÿæˆå™¨")],-1),f={href:"http://docs.idevops.site/jenkins/pipelinesyntax/chapter05/images/03.png",target:"_blank",rel:"noopener noreferrer"},k=e("img",{src:"http://docs.idevops.site/jenkins/pipelinesyntax/chapter05/images/03.png",alt:"images"},null,-1),I=e("h2",{id:"å…¨å±€å˜é‡å‚è€ƒ",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#å…¨å±€å˜é‡å‚è€ƒ","aria-hidden":"true"},"#"),n(" å…¨å±€å˜é‡å‚è€ƒ")],-1),N={href:"http://docs.idevops.site/jenkins/pipelinesyntax/chapter05/images/04.png",target:"_blank",rel:"noopener noreferrer"},U=e("img",{src:"http://docs.idevops.site/jenkins/pipelinesyntax/chapter05/images/04.png",alt:"images"},null,-1),C=r(`<h3 id="envå˜é‡" tabindex="-1"><a class="header-anchor" href="#envå˜é‡" aria-hidden="true">#</a> envå˜é‡</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>BUILD_NUMBER          //æ„å»ºå·
BUILD_ID              //æ„å»ºå·
BUILD_DISPLAY_NAME    //æ„å»ºæ˜¾ç¤ºåç§°
JOB_NAME              //é¡¹ç›®åç§°
              
EXECUTOR_NUMBER       //æ‰§è¡Œå™¨æ•°é‡
NODE_NAME             //æ„å»ºèŠ‚ç‚¹åç§°
WORKSPACE             //å·¥ä½œç›®å½•
JENKINS_HOME          //Jenkins home
JENKINS_URL           //Jenkinsåœ°å€
BUILD_URL             //æ„å»ºåœ°å€
JOB_URL               //é¡¹ç›®åœ°å€
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="currentbuildå˜é‡" tabindex="-1"><a class="header-anchor" href="#currentbuildå˜é‡" aria-hidden="true">#</a> currentbuildå˜é‡</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>result  currentResult   //æ„å»ºç»“æœ
displayName      //æ„å»ºåç§°  #111
description      //æ„å»ºæè¿°
duration         //æŒç»­æ—¶é—´
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å¸¸ç”¨çš„æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#å¸¸ç”¨çš„æ–¹æ³•" aria-hidden="true">#</a> å¸¸ç”¨çš„æ–¹æ³•</h2><p><strong>jsonæ•°æ®å¤„ç†</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>def response = readJSON text: &quot;\${scanResult}&quot;
println(scanResult)

//åŸç”Ÿæ–¹æ³•
import groovy.json.*

@NonCPS
def GetJson(text){
    def prettyJson = JsonOutput.prettyPrint(text) 
    new JsonSlurperClassic().parseText(prettyJson)
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä½¿ç”¨å‡­æ®</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>withCredentials([string(credentialsId: &quot;xxxxx&quot;, variable: &quot;sonarToken&quot;)]) {
    println(sonarToken)
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä¸‹è½½ä»£ç </strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>//Git
checkout([$class: &#39;GitSCM&#39;, branches: [[name: &quot;brnachName&quot;]], 
            doGenerateSubmoduleConfigurations: false, 
            extensions: [], submoduleCfg: [], 
            userRemoteConfigs: [[credentialsId: &quot;\${credentialsId}&quot;, 
            url: &quot;\${srcUrl}&quot;]]])
//Svn
checkout([$class: &#39;SubversionSCM&#39;, additionalCredentials: [], 
            filterChangelog: false, ignoreDirPropChanges: false, 
            locations: [[credentialsId: &quot;\${credentialsId}&quot;, 
            depthOption: &#39;infinity&#39;, ignoreExternalsOption: true, 
            remote: &quot;\${svnUrl}&quot;]], workspaceUpdater: [$class: &#39;CheckoutUpdater&#39;]]
)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å±•ç¤ºæŠ¥å‘Š</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>publishHTML([allowMissing: false, 
        alwaysLinkToLastBuild: false, 
        keepAll: true, 
        reportDir: &#39;./report/&#39;, 
        reportFiles: &quot;a.html, b.html&quot;, 
        reportName: &#39;InterfaceTestReport&#39;, 
        reportTitles: &#39;HTML&#39;])
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>äº¤äº’è¾“å…¥</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>def result = input  message: &#39;é€‰æ‹©xxxxx&#39;, 
                    ok: &#39;æäº¤&#39;,
                    parameters: [extendedChoice( description: &#39;xxxxx&#39;, 
                                                descriptionPropertyValue: &#39;&#39;, 
                                                multiSelectDelimiter: &#39;,&#39;, 
                                                name: &#39;failePositiveCases&#39;, 
                                                quoteValue: false, 
                                                saveJSONParameterToFile: false, 
                                                type: &#39;PT_CHECKBOX&#39;, 
                                                value: &quot;1,2,3&quot;, 
                                                visibleItemCount: 99)]   
println(result)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ„å»ºç”¨æˆ·</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>wrap([$class: &#39;BuildUser&#39;]){
            echo &quot;full name is $BUILD_USER&quot;
            echo &quot;user id is $BUILD_USER_ID&quot;
            echo &quot;user email is $BUILD_USER_EMAIL&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>åˆ¶å“ä¸Šä¼ </strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>rtUpload (
        serverId: &quot;artifactory01&quot;,
        spec:
            &quot;&quot;&quot;{
            &quot;files&quot;: [
                {
                &quot;pattern&quot;: &quot;report/a.html&quot;,
                &quot;target&quot;: &quot;\${repoName}/a/b/v&quot;
                }
            ]
            }&quot;&quot;&quot;
    )
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å‘é€httpè¯·æ±‚</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ApiUrl = &quot;http://xxxxxx/api/project_branches/list?project=\${projectName}&quot;
Result = httpRequest authentication: &#39;xxxxxxxxx&#39;,
                         quiet: true, 
                         contentType: &#39;APPLICATION_JSON&#39; ,  
                         url: &quot;\${ApiUrl}&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,21);function E(y,L){const i=a("ExternalLinkIcon");return l(),d("div",null,[u,e("blockquote",null,[e("p",null,[n("è½¬è½½è‡ªï¼š"),e("a",c,[n("æµæ°´çº¿å¼€å‘å·¥å…· | æ³½é˜³"),s(i)])])]),v,m,p,b,e("p",null,[e("a",h,[x,s(i)])]),e("p",null,[n("å¡«å†™å¥½å‚æ•°åï¼Œç‚¹å‡»ç”Ÿæˆï¼Œç„¶åå¤åˆ¶ç²˜è´´åˆ°Jenkinsfile"),e("a",g,[_,s(i)])]),q,e("p",null,[e("a",f,[k,s(i)])]),I,e("p",null,[e("a",N,[U,s(i)])]),C])}const R=t(o,[["render",E],["__file","pipeline-dev-tools.html.vue"]]);export{R as default};
