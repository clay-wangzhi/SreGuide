import{_ as e,e as n}from"./app.be088d1f.js";const t={},s=n(`<p>\u7528\u4E8E\u663E\u793A\u5404\u79CD\u7F51\u7EDC\u76F8\u5173\u4FE1\u606F\uFF0C\u5982\u7F51\u7EDC\u8FDE\u63A5\uFF0C\u8DEF\u7531\u8868\uFF0C\u63A5\u53E3\u72B6\u6001 (Interface Statistics)\uFF0Cmasquerade \u8FDE\u63A5\uFF0C\u591A\u64AD\u6210\u5458 (Multicast Memberships) \u7B49\u7B49\u3002</p><h2 id="\u8BED\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u8BED\u6CD5" aria-hidden="true">#</a> \u8BED\u6CD5</h2><p>netstat [-acCeFghilMnNoprstuvVwx]</p><h2 id="\u9009\u9879" tabindex="-1"><a class="header-anchor" href="#\u9009\u9879" aria-hidden="true">#</a> \u9009\u9879</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>-a   \u6216\u2013all                           \u663E\u793A\u6240\u6709\u8FDE\u7EBF\u4E2D\u7684Socket
-c   \u6216\u2013continuous               \u6301\u7EED\u5217\u51FA\u7F51\u7EDC\u72B6\u6001
-h  \u6216\u2013help                         \u5728\u7EBF\u5E2E\u52A9
-l  \u6216\u2013listening                     \u663E\u793A\u76D1\u63A7\u4E2D\u7684\u670D\u52A1\u5668\u7684Socket
-n  \u6216\u2013numeric                    \u4E0D\u89E3\u6790\u4E3B\u673A\u540D
-t  \u6216\u2013tcp                            \u663E\u793ATCP \u4F20\u8F93\u534F\u8BAE\u7684\u8FDE\u7EBF\u72B6\u51B5
-u\u6216\u2013udp                            \u663E\u793AUDP\u4F20\u8F93\u534F\u8BAE\u7684\u8FDE\u7EBF\u72B6\u51B5
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u6CE8\u610F\uFF1ALISTEN\u548CLISTENING\u7684\u72B6\u6001\u53EA\u6709\u7528-a\u6216\u8005-l\u624D\u80FD\u770B\u5230</p><h2 id="\u7F51\u7EDC\u8FDE\u63A5\u72B6\u6001\u8BE6\u89E3" tabindex="-1"><a class="header-anchor" href="#\u7F51\u7EDC\u8FDE\u63A5\u72B6\u6001\u8BE6\u89E3" aria-hidden="true">#</a> \u7F51\u7EDC\u8FDE\u63A5\u72B6\u6001\u8BE6\u89E3</h2><p>\u5171\u670912\u4E2D\u53EF\u80FD\u7684\u72B6\u6001\uFF0C\u524D\u976211\u79CD\u662F\u6309\u7167TCP\u8FDE\u63A5\u5EFA\u7ACB\u7684\u4E09\u6B21\u63E1\u624B\u548CTCP\u8FDE\u63A5\u65AD\u5F00\u7684\u56DB\u6B21\u6325\u624B\u8FC7\u7A0B\u6765\u63CF\u8FF0\u7684\u3002 1)\u3001LISTEN:\u9996\u5148\u670D\u52A1\u7AEF\u9700\u8981\u6253\u5F00\u4E00\u4E2Asocket\u8FDB\u884C\u76D1\u542C\uFF0C\u72B6\u6001\u4E3ALISTEN./* The socket is listening for incoming connections. \u4FA6\u542C\u6765\u81EA\u8FDC\u65B9TCP\u7AEF\u53E3\u7684\u8FDE\u63A5\u8BF7\u6C42 */</p><p>2)\u3001 SYN_SENT:\u5BA2\u6237\u7AEF\u901A\u8FC7\u5E94\u7528\u7A0B\u5E8F\u8C03\u7528connect\u8FDB\u884Cactive open.\u4E8E\u662F\u5BA2\u6237\u7AEFtcp\u53D1\u9001\u4E00\u4E2ASYN\u4EE5\u8BF7\u6C42\u5EFA\u7ACB\u4E00\u4E2A\u8FDE\u63A5.\u4E4B\u540E\u72B6\u6001\u7F6E\u4E3ASYN_SENT./*The socket is actively attempting to establish a connection. \u5728\u53D1\u9001\u8FDE\u63A5\u8BF7\u6C42\u540E\u7B49\u5F85\u5339\u914D\u7684\u8FDE\u63A5\u8BF7\u6C42 */</p><p>3)\u3001 SYN_RECV:\u670D\u52A1\u7AEF\u5E94\u53D1\u51FAACK\u786E\u8BA4\u5BA2\u6237\u7AEF\u7684 SYN,\u540C\u65F6\u81EA\u5DF1\u5411\u5BA2\u6237\u7AEF\u53D1\u9001\u4E00\u4E2ASYN. \u4E4B\u540E\u72B6\u6001\u7F6E\u4E3ASYN_RECV/* A connection request has been received from the network. \u5728\u6536\u5230\u548C\u53D1\u9001\u4E00\u4E2A\u8FDE\u63A5\u8BF7\u6C42\u540E\u7B49\u5F85\u5BF9\u8FDE\u63A5\u8BF7\u6C42\u7684\u786E\u8BA4 */</p><p>4)\u3001ESTABLISHED: \u4EE3\u8868\u4E00\u4E2A\u6253\u5F00\u7684\u8FDE\u63A5\uFF0C\u53CC\u65B9\u53EF\u4EE5\u8FDB\u884C\u6216\u5DF2\u7ECF\u5728\u6570\u636E\u4EA4\u4E92\u4E86\u3002/* The socket has an established connection. \u4EE3\u8868\u4E00\u4E2A\u6253\u5F00\u7684\u8FDE\u63A5\uFF0C\u6570\u636E\u53EF\u4EE5\u4F20\u9001\u7ED9\u7528\u6237 */</p><p>5)\u3001 FIN_WAIT1:\u4E3B\u52A8\u5173\u95ED(active close)\u7AEF\u5E94\u7528\u7A0B\u5E8F\u8C03\u7528close\uFF0C\u4E8E\u662F\u5176TCP\u53D1\u51FAFIN\u8BF7\u6C42\u4E3B\u52A8\u5173\u95ED\u8FDE\u63A5\uFF0C\u4E4B\u540E\u8FDB\u5165FIN_WAIT1\u72B6\u6001./* The socket is closed, and the connection is shutting down. \u7B49\u5F85\u8FDC\u7A0BTCP\u7684\u8FDE\u63A5\u4E2D\u65AD\u8BF7\u6C42\uFF0C\u6216\u5148\u524D\u7684\u8FDE\u63A5\u4E2D\u65AD\u8BF7\u6C42\u7684\u786E\u8BA4 */</p><p>6)\u3001CLOSE_WAIT:\u88AB\u52A8\u5173\u95ED(passive close)\u7AEFTCP\u63A5\u5230FIN\u540E\uFF0C\u5C31\u53D1\u51FAACK\u4EE5\u56DE\u5E94FIN\u8BF7\u6C42(\u5B83\u7684\u63A5\u6536\u4E5F\u4F5C\u4E3A\u6587\u4EF6\u7ED3\u675F\u7B26\u4F20\u9012\u7ED9\u4E0A\u5C42\u5E94\u7528\u7A0B\u5E8F),\u5E76\u8FDB\u5165CLOSE_WAIT./* The remote end has shut down, waiting for the socket to close. \u7B49\u5F85\u4ECE\u672C\u5730\u7528\u6237\u53D1\u6765\u7684\u8FDE\u63A5\u4E2D\u65AD\u8BF7\u6C42 */</p><p>7)\u3001FIN_WAIT2:\u4E3B\u52A8\u5173\u95ED\u7AEF\u63A5\u5230ACK\u540E\uFF0C\u5C31\u8FDB\u5165\u4E86 FIN-WAIT-2 ./* Connection is closed, and the socket is waiting for a shutdown from the remote end. \u4ECE\u8FDC\u7A0BTCP\u7B49\u5F85\u8FDE\u63A5\u4E2D\u65AD\u8BF7\u6C42 */</p><p>8)\u3001LAST_ACK:\u88AB\u52A8\u5173\u95ED\u7AEF\u4E00\u6BB5\u65F6\u95F4\u540E\uFF0C\u63A5\u6536\u5230\u6587\u4EF6\u7ED3\u675F\u7B26\u7684\u5E94\u7528\u7A0B \u5E8F\u5C06\u8C03\u7528CLOSE\u5173\u95ED\u8FDE\u63A5\u3002\u8FD9\u5BFC\u81F4\u5B83\u7684TCP\u4E5F\u53D1\u9001\u4E00\u4E2A FIN,\u7B49\u5F85\u5BF9\u65B9\u7684ACK.\u5C31\u8FDB\u5165\u4E86LAST-ACK ./* The remote end has shut down, and the socket is closed. Waiting for acknowledgement. \u7B49\u5F85\u539F\u6765\u53D1\u5411\u8FDC\u7A0BTCP\u7684\u8FDE\u63A5\u4E2D\u65AD\u8BF7\u6C42\u7684\u786E\u8BA4 */</p><p>9)\u3001TIME_WAIT:\u5728\u4E3B\u52A8\u5173\u95ED\u7AEF\u63A5\u6536\u5230FIN\u540E\uFF0CTCP \u5C31\u53D1\u9001ACK\u5305\uFF0C\u5E76\u8FDB\u5165TIME-WAIT\u72B6\u6001\u3002/* The socket is waiting after close to handle packets still in the network.\u7B49\u5F85\u8DB3\u591F\u7684\u65F6\u95F4\u4EE5\u786E\u4FDD\u8FDC\u7A0BTCP\u63A5\u6536\u5230\u8FDE\u63A5\u4E2D\u65AD\u8BF7\u6C42\u7684\u786E\u8BA4 */</p><p>10)\u3001CLOSING: \u6BD4\u8F83\u5C11\u89C1./* Both sockets are shut down but we still don\u2019t have all our data sent. \u7B49\u5F85\u8FDC\u7A0BTCP\u5BF9\u8FDE\u63A5\u4E2D\u65AD\u7684\u786E\u8BA4 */</p><p>11)\u3001CLOSED: \u88AB\u52A8\u5173\u95ED\u7AEF\u5728\u63A5\u53D7\u5230ACK\u5305\u540E\uFF0C\u5C31\u8FDB\u5165\u4E86closed\u7684\u72B6\u6001\u3002\u8FDE\u63A5\u7ED3\u675F./* The socket is not being used. \u6CA1\u6709\u4EFB\u4F55\u8FDE\u63A5\u72B6\u6001 */</p><p>12)\u3001UNKNOWN: \u672A\u77E5\u7684Socket\u72B6\u6001\u3002/* The state of the socket is unknown. */</p><p>SYN: (\u540C\u6B65\u5E8F\u5217\u7F16\u53F7,Synchronize Sequence Numbers)\u8BE5\u6807\u5FD7\u4EC5\u5728\u4E09\u6B21\u63E1\u624B\u5EFA\u7ACBTCP\u8FDE\u63A5\u65F6\u6709\u6548\u3002\u8868\u793A\u4E00\u4E2A\u65B0\u7684TCP\u8FDE\u63A5\u8BF7\u6C42\u3002 ACK: (\u786E\u8BA4\u7F16\u53F7,Acknowledgement Number)\u662F\u5BF9TCP\u8BF7\u6C42\u7684\u786E\u8BA4\u6807\u5FD7,\u540C\u65F6\u63D0\u793A\u5BF9\u7AEF\u7CFB\u7EDF\u5DF2\u7ECF\u6210\u529F\u63A5\u6536\u6240\u6709\u6570\u636E\u3002 FIN: (\u7ED3\u675F\u6807\u5FD7,FINish)\u7528\u6765\u7ED3\u675F\u4E00\u4E2ATCP\u56DE\u8BDD.\u4F46\u5BF9\u5E94\u7AEF\u53E3\u4ECD\u5904\u4E8E\u5F00\u653E\u72B6\u6001,\u51C6\u5907\u63A5\u6536\u540E\u7EED\u6570\u636E\u3002</p><h2 id="\u5E38\u7528\u5B9E\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u5E38\u7528\u5B9E\u4F8B" aria-hidden="true">#</a> \u5E38\u7528\u5B9E\u4F8B</h2><p>1\uFF09 \u67E5\u770BTCP\u7684\u8FDE\u63A5\u72B6\u6001</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>netstat -natlp | awk &#39;{print $6}&#39; | sort | uniq -c |sort -rn
netstat -n | awk &#39;/^tcp/ {++S[$NF]};END {for(a in S) print a,S[a]}&#39;
netstat -n | awk &#39;/^tcp/ {print $NF}&#39; | sort |uniq -c | sort -rn
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>2\uFF09 \u67E5\u627E\u8BF7\u6C42\u6570\u8F83\u591A\u7684\u524D20\u4E2AIP\uFF08\u5E38\u7528\u4E8E\u67E5\u627E\u653B\u6765\u6E90\uFF09</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>netstat -anpl | grep 80 | grep tcp | awk &#39;{print $5}&#39; | awk -F: &#39;{print $1}&#39; | sort | uniq -c | sort -nr | head -20
netstat -ant | awk &#39;/:80/{split($5,ip,&quot;:&quot;)&#39;;++A[ip[1]]}END{for(i in A) print A[i],i}&#39; | sort -rn |head -20 
tcpdump -i eth0 -tnn dst port 80 -c 1000 | awk -F&quot;.&quot; &#39;{print $1&quot;.&quot;$2&quot;.&quot;$3&quot;.&quot;$4}&#39; | sort | uniq -c | sort -nr | head -20  
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>`,25);function a(i,r){return s}var c=e(t,[["render",a],["__file","\u6BCF\u5929\u4E00\u4E2Alinux\u547D\u4EE4\uFF0854\uFF09-netstat.html.vue"]]);export{c as default};
