import{_ as n,e}from"./app.e34c9e1b.js";const s={},a=e(`<h1 id="_3-2-ansible-lineinfile\u6A21\u5757\u8BE6\u89E3" tabindex="-1"><a class="header-anchor" href="#_3-2-ansible-lineinfile\u6A21\u5757\u8BE6\u89E3" aria-hidden="true">#</a> 3.2 Ansible lineinfile\u6A21\u5757\u8BE6\u89E3</h1><h2 id="_1-\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#_1-\u7B80\u4ECB" aria-hidden="true">#</a> 1 \u7B80\u4ECB</h2><p>\u4E4B\u6240\u4EE5\u4E13\u95E8\u8BF4\u4E00\u8BF4\u8FD9\u4E2A\u6A21\u5757\uFF0C\u662F\u56E0\u4E3Alineinfile\u5728\u5B9E\u9645\u4F7F\u7528\u4E2D\u975E\u5E38\u6709\u7528\u3002</p><p>lineinfile\u6A21\u5757\u7528\u4E8E\u5728\u6E90\u6587\u4EF6\u4E2D\u63D2\u5165\u3001\u5220\u9664\u3001\u66FF\u6362\u884C\uFF0C\u548Csed\u547D\u4EE4\u7684\u529F\u80FD\u7C7B\u4F3C\uFF0C\u4E5F\u652F\u6301\u6B63\u5219\u8868\u8FBE\u5F0F\u5339\u914D\u548C\u66FF\u6362\u3002</p><p>\u5B9E\u9645\u4E0A\uFF0C\u5728\u5927\u591A\u6570\u65F6\u5019\uFF0C\u6211\u4EEC\u5728linux\u4E0A\u7684\u64CD\u4F5C\uFF0C\u5C31\u662F\u9488\u5BF9\u6587\u4EF6\u7684\u64CD\u4F5C\uFF0C\u901A\u8FC7\u914D\u7F6E\u7BA1\u7406\u5DE5\u5177\u5BF9\u914D\u7F6E\u6587\u4EF6\u4F5C\u7EDF\u4E00\u7684\u914D\u7F6E\u4FEE\u6539\u662F\u4E00\u4E2A\u975E\u5E38\u9177\u7684\u529F\u80FD\u3002</p><p>\u4E0B\u9762\u662F\u5B98\u65B9\u9488\u5BF9\u8BE5\u6A21\u5757\u7684\u8BF4\u660E\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>lineinfile - Ensure a particular line is in a file, or replace an existing line using a back-referenced regular expression
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u7B80\u5355\u8BB2\uFF0C\u8FD9\u4E2A\u6A21\u5757\u5C31\u662F\u9488\u5BF9\u4E00\u4E2A\u6587\u4EF6\u4E2D\u884C\u5185\u5BB9\u7684\u64CD\u4F5C\u3002</p><p>\u4E0B\u9762\u6211\u4EEC\u8BE6\u7EC6\u8BF4\u4E00\u8BF4\u5176\u5177\u4F53\u53EF\u4EE5\u505A\u7684\u4E8B\u60C5\u3002</p><h2 id="_2-\u4FEE\u6539\u5339\u914D\u884C" tabindex="-1"><a class="header-anchor" href="#_2-\u4FEE\u6539\u5339\u914D\u884C" aria-hidden="true">#</a> 2 \u4FEE\u6539\u5339\u914D\u884C</h2><p>\u4E0B\u9762\u662F\u4E00\u4E2A\u7B80\u5355\u7684task\u793A\u4F8B\uFF1A</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># \u5C06/etc/selinux/config\u4E2D\u5339\u914D\u5230\u4EE5&#39;SELINUX=&#39;\u5F00\u5934\u7684\u884C\uFF0C\u5C06\u5176\u66FF\u6362\u4E3A&#39;SELINUX=disabled&#39;</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> modify selinux to disabled
  <span class="token key atrule">lineinfile</span><span class="token punctuation">:</span>
    <span class="token key atrule">path</span><span class="token punctuation">:</span> /etc/selinux/config
    <span class="token key atrule">regex</span><span class="token punctuation">:</span> <span class="token string">&#39;^SELINUX=&#39;</span>
    <span class="token key atrule">line</span><span class="token punctuation">:</span> <span class="token string">&#39;SELINUX=disabled&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_3-\u5728\u5339\u914D\u884C\u524D\u6216\u540E\u6DFB\u52A0\u5185\u5BB9" tabindex="-1"><a class="header-anchor" href="#_3-\u5728\u5339\u914D\u884C\u524D\u6216\u540E\u6DFB\u52A0\u5185\u5BB9" aria-hidden="true">#</a> 3 \u5728\u5339\u914D\u884C\u524D\u6216\u540E\u6DFB\u52A0\u5185\u5BB9</h2><blockquote><p>insertbefore\u548Cinsertafter\u6307\u5B9A\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\u5982\u679C\u5339\u914D\u4E86\u591A\u884C\uFF0C\u5219\u9ED8\u8BA4\u9009\u4E2D\u6700\u540E\u4E00\u4E2A\u5339\u914D\u884C\uFF0C\u7136\u540E\u5728\u88AB\u9009\u4E2D\u7684\u884C\u524D\u3001\u884C\u540E\u63D2\u5165\u3002\u5982\u679C\u660E\u786E\u8981\u6307\u5B9A\u9009\u4E2D\u7B2C\u4E00\u6B21\u5339\u914D\u7684\u884C\uFF0C\u5219\u6307\u5B9A\u53C2\u6570firstmatch=yes\uFF1A</p></blockquote><p>\u793A\u4F8B\u6587\u4EF6\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># cat /etc/http.conf

Listen 127.0.0.1:80
Listen 80
Port
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_3-1-\u5728\u5339\u914D\u884C\u524D\u6DFB\u52A0" tabindex="-1"><a class="header-anchor" href="#_3-1-\u5728\u5339\u914D\u884C\u524D\u6DFB\u52A0" aria-hidden="true">#</a> 3.1 \u5728\u5339\u914D\u884C\u524D\u6DFB\u52A0</h3><p>\u5728http.conf\u6587\u4EF6\u7684<code>Listen 80</code>\u524D\u9762\u6DFB\u52A0\u4E00\u884C<code>Listen 8080</code>\uFF0Ctask\u793A\u4F8B\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>- name: add line before Listen 80
  lineinfile:
    dest: /etc/http.conf
    insertbefore: &#39;^Listen 80&#39;
    line: &#39;Listen 8080&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_3-2-\u5728\u5339\u914D\u884C\u540E\u6DFB\u52A0" tabindex="-1"><a class="header-anchor" href="#_3-2-\u5728\u5339\u914D\u884C\u540E\u6DFB\u52A0" aria-hidden="true">#</a> 3.2 \u5728\u5339\u914D\u884C\u540E\u6DFB\u52A0</h3><p>\u5728http.conf\u6587\u4EF6\u7684<code>Port</code>\u540E\u9762\u6DFB\u52A0\u4E00\u884C<code>just a test</code>\uFF0Ctask\u793A\u4F8B\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>- name: add line before Listen 80
  lineinfile:
    dest: /etc/http.conf
    insertafter: &#39;^Port&#39;
    line: &#39;just a test&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_4-\u4FEE\u6539\u6587\u4EF6\u5185\u5BB9\u53CA\u6743\u9650" tabindex="-1"><a class="header-anchor" href="#_4-\u4FEE\u6539\u6587\u4EF6\u5185\u5BB9\u53CA\u6743\u9650" aria-hidden="true">#</a> 4 \u4FEE\u6539\u6587\u4EF6\u5185\u5BB9\u53CA\u6743\u9650</h2><p>\u793A\u4F8B\u6587\u4EF6\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#cat /etc/hosts</span>

<span class="token number">127.0</span>.0.1       localhost.localdomain localhost ::1       localhost6.localdomain6 localhost6
<span class="token number">10.1</span>.61.130     hub.dz11.com
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u4FEE\u6539/etc/hosts\uFF0C\u5C06\u4EE5<code>127.0.0.1</code>\u5F00\u5934\u7684\u884C\u66FF\u6362\u4E3A<code>127.0.0.1 localhost</code>\uFF0C\u5E76\u5C06/etc/hosts\u7684\u5C5E\u4E3B\u548C\u5C5E\u7EC4\u90FD\u4FEE\u6539\u4E3Aroot\uFF0C\u6743\u9650\u6539\u4E3A644\uFF0C\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>- name: modify hosts
  lineinfile:
    dest: /etc/hosts
    regex: &#39;^127\\.0\\.0\\.1&#39;
    line: &#39;127.0.0.1 localhost&#39;
    owner: root
    group: root
    mode: 0644
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_5-\u5220\u9664\u884C\u5185\u5BB9" tabindex="-1"><a class="header-anchor" href="#_5-\u5220\u9664\u884C\u5185\u5BB9" aria-hidden="true">#</a> 5 \u5220\u9664\u884C\u5185\u5BB9</h2><p>regexp\u7ED3\u5408state=absent\u65F6\uFF0C\u8868\u793A\u5220\u9664\u6240\u6709\u5339\u914D\u7684\u884C\u3002</p><p>\u793A\u4F8B\u539F\u6587\u4EF6\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#cat /etc/hosts</span>

<span class="token number">127.0</span>.0.1       localhost.localdomain localhost ::1       localhost6.localdomain6 localhost6
<span class="token number">10.1</span>.61.130     hub.dz11.com
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u5220\u9664\u4EE5<code>10.1.61.130</code>\u5F00\u5934\u7684\u884C\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>- name: delete a line
  lineinfile:
    dest: /etc/hosts
    regex: &#39;^10\\.1\\.61&#39;
    state: absent
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_6-\u6587\u4EF6\u5B58\u5728\u5219\u6DFB\u52A0\u4E00\u884C\u5185\u5BB9" tabindex="-1"><a class="header-anchor" href="#_6-\u6587\u4EF6\u5B58\u5728\u5219\u6DFB\u52A0\u4E00\u884C\u5185\u5BB9" aria-hidden="true">#</a> 6 \u6587\u4EF6\u5B58\u5728\u5219\u6DFB\u52A0\u4E00\u884C\u5185\u5BB9</h2><p>\u5F80/etc/hosts\u91CC\u6DFB\u52A0\u4E00\u884C<code>10.1.61.131 test.dz11.com</code>\uFF08\u591A\u6B21\u6267\u884C\uFF0C\u4E0D\u4F1A\u91CD\u590D\u6DFB\u52A0\uFF09\uFF0C\u793A\u4F8B\u5982\u4E0B\uFF1A</p><p>\u5982\u679C\u518D\u6B21\u6267\u884C\uFF0C\u5219\u4E0D\u4F1A\u518D\u6B21\u8FFD\u52A0\u6B64\u884C\u3002\u56E0\u4E3Alineinfile\u6A21\u5757\u7684state\u53C2\u6570\u9ED8\u8BA4\u503C\u4E3Apresent\uFF0C\u5B83\u80FD\u4FDD\u8BC1\u5E42\u7B49\u6027\uFF0C\u5F53\u8981\u63D2\u5165\u7684\u884C\u5DF2\u7ECF\u5B58\u5728\u65F6\u5219\u4E0D\u4F1A\u518D\u63D2\u5165\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> add a line
  <span class="token key atrule">lineinfile</span><span class="token punctuation">:</span>
    <span class="token key atrule">dest</span><span class="token punctuation">:</span> /etc/hosts
    <span class="token key atrule">line</span><span class="token punctuation">:</span> <span class="token string">&#39;10.1.61.131 test.dz11.com&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_7-\u5982\u679C\u6709\u5339\u914D\u7684\u884C\u5219\u4FEE\u6539\u8BE5\u884C-\u5982\u679C\u4E0D\u5339\u914D\u5219\u6DFB\u52A0" tabindex="-1"><a class="header-anchor" href="#_7-\u5982\u679C\u6709\u5339\u914D\u7684\u884C\u5219\u4FEE\u6539\u8BE5\u884C-\u5982\u679C\u4E0D\u5339\u914D\u5219\u6DFB\u52A0" aria-hidden="true">#</a> 7 \u5982\u679C\u6709\u5339\u914D\u7684\u884C\u5219\u4FEE\u6539\u8BE5\u884C\uFF0C\u5982\u679C\u4E0D\u5339\u914D\u5219\u6DFB\u52A0</h2><p>\u793A\u4F8B\u539F\u6587\u4EF6/tmp/test.txt\u5185\u5BB9\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># %wheel   ALL=(ALL)   ALL</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u4E0B\u9762\u7684\u793A\u4F8Btask\u4E2D\uFF0C\u5339\u914D\u4EE5<code>%wheel</code>\u5F00\u5934\u7684\u884C\uFF0C\u5339\u914D\u5230\uFF0C\u5219\u6267\u884C\u66FF\u6362\uFF0C\u672A\u5339\u914D\uFF0C\u5219\u6DFB\u52A0\u3002\u56E0\u4E3A\u539F\u6587\u4EF6\u4E2D\uFF0C\u6CA1\u6709\u4EE5<code>%wheel</code>\u5F00\u5934\u7684\u884C\uFF0C\u6240\u4EE5\u4F1A\u6DFB\u52A0\u4E00\u884C\uFF1A</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> add or modify a line
  <span class="token key atrule">lineinfile</span><span class="token punctuation">:</span> 
    <span class="token key atrule">dest</span><span class="token punctuation">:</span> /tmp/test.txt
    <span class="token key atrule">regex</span><span class="token punctuation">:</span> <span class="token string">&#39;^%wheel&#39;</span>
    <span class="token key atrule">line</span><span class="token punctuation">:</span> <span class="token string">&#39;%wheel  ALL=(ALL)       NOPASSWD: ALL&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u4FEE\u6539\u540E\u7684\u6587\u4EF6\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#cat /tmp/text.txt</span>

<span class="token comment"># %wheel   ALL=(ALL)   ALL</span>
%wheel  <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL<span class="token punctuation">)</span>       NOPASSWD: ALL
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_8-\u53C2\u6570backrefs-backup\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#_8-\u53C2\u6570backrefs-backup\u8BF4\u660E" aria-hidden="true">#</a> 8 \u53C2\u6570backrefs\uFF0Cbackup\u8BF4\u660E</h2><ul><li>backup\uFF1A \u662F\u5426\u5907\u4EFD\u539F\u6587\u4EF6\uFF0C\u9ED8\u8BA4\u4E3Ano</li><li>backrefs\uFF1A <ul><li>\u5F53backrefs\u4E3Ano\u65F6\uFF0C\u5982\u679Cregex\u6CA1\u6709\u5339\u914D\u5230\u884C\uFF0C\u5219\u6DFB\u52A0\u4E00\u884C\uFF0C\u5982\u679CRegx\u5339\u914D\u5230\u884C\uFF0C\u5219\u4FEE\u6539\u8BE5\u884C</li><li>\u5F53backrefs\u4E3Ayes\u65F6\uFF0C\u5982\u679Cregex\u6CA1\u6709\u5339\u914D\u5230\u884C\uFF0C\u5219\u4FDD\u6301\u539F\u6587\u4EF6\u4E0D\u53D8\uFF0C\u5982\u679Cregex\u5339\u914D\u5230\u884C\uFF0C\u5219\u4FEE\u6539\u8BE5\u884C</li><li>backrefs\u9ED8\u8BA4\u4E3Ano\uFF0C\u6240\u4EE5\u4E0A\u9762\u90A3\u4E2A\u793A\u4F8B\u4E2D\uFF0C\u6211\u4EEC\u6CA1\u6709\u914D\u7F6Ebackrefs\uFF0C\u800C\u9ED8\u8BA4\u6CA1\u6709\u5339\u914D\uFF0C\u5219\u4FEE\u6539\u3002</li></ul></li></ul><p>\u4E0B\u9762\u6211\u4EEC\u770B\u4E00\u770Bbackrefs\u4E3Ayes\u65F6\u5339\u914D\u5230\u884C\u7684\u793A\u4F8B\uFF1A</p><p>\u793A\u4F8B\u539F\u6587\u4EF6\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># cat /tmp/testfile</span>

<span class="token comment"># %wheel   ALL=(ALL)   ALL</span>
%wheel  <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL<span class="token punctuation">)</span>       NOPASSWD: ALL
<span class="token comment">#?bar</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>task\u793A\u4F8B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> - name: test backrefs
  lineinfile:
      backup: yes
      state: present
      dest: /tmp/testfile
      regexp: &#39;^#\\?bar&#39;
      backrefs: yes
      line: &#39;bar&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>\u4FEE\u6539\u540E\u7684\u6587\u4EF6\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># cat /tmp/testfile</span>

<span class="token comment"># %wheel   ALL=(ALL)   ALL</span>
%wheel  <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL<span class="token punctuation">)</span>       NOPASSWD: ALL
bar
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_9-\u4F7F\u7528validate\u9A8C\u8BC1\u6587\u4EF6\u662F\u5426\u6B63\u786E\u4FEE\u6539" tabindex="-1"><a class="header-anchor" href="#_9-\u4F7F\u7528validate\u9A8C\u8BC1\u6587\u4EF6\u662F\u5426\u6B63\u786E\u4FEE\u6539" aria-hidden="true">#</a> 9 \u4F7F\u7528validate\u9A8C\u8BC1\u6587\u4EF6\u662F\u5426\u6B63\u786E\u4FEE\u6539</h2><p>\u5728\u4E00\u4E9B\u573A\u666F\u4E0B\uFF0C\u6211\u4EEC\u4FEE\u6539\u5B8C\u6587\u4EF6\u540E\uFF0C\u9700\u8981\u5BF9\u6587\u4EF6\u505A\u4E00\u4E0B\u6D4B\u8BD5\uFF0C\u7528\u4EE5\u68C0\u67E5\u6587\u4EF6\u4FEE\u6539\u4E4B\u540E\uFF0C\u662F\u5426\u80FD\u6B63\u5E38\u8FD0\u884C\u3002\u5982http.conf\u3001nginx.conf\u7B49\uFF0C\u4E00\u65E6\u6539\u9519\uFF0C\u800C\u4E0D\u52A0\u4EE5\u6D4B\u8BD5\uFF0C\u53EF\u80FD\u4F1A\u76F4\u63A5\u5BFC\u81F4http\u670D\u52A1\u6302\u6389\u3002</p><p>\u53EF\u4EE5\u4F7F\u7528validate\u5173\u952E\u5B57\uFF0C\u5728\u4FEE\u6539\u5B8C\u6210\u4EE5\u540E\uFF0C\u5BF9\u6587\u4EF6\u6267\u884C\u68C0\u6D4B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>- name: test validate
  lineinfile:
      dest: /etc/sudoers
      state: present
      regexp: &#39;^%ADMIN ALL=&#39;
      line: &#39;%ADMIN ALL=(ALL)&#39;
      validate: &#39;visudo -cf %s&#39;
  tags:
    - testsudo
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_10-regexp\u548Cinsertxxx\u7ED3\u5408" tabindex="-1"><a class="header-anchor" href="#_10-regexp\u548Cinsertxxx\u7ED3\u5408" aria-hidden="true">#</a> 10 regexp\u548CinsertXXX\u7ED3\u5408</h2><p>lineinfile\u6700\u540E\u4E00\u4E2A\u6BD4\u8F83\u5E38\u7528\u7684\u529F\u80FD\u662Fregepx\u7ED3\u5408insertbefore\u6216\u7ED3\u5408insertafter\u3002\u8FD9\u65F6\u5019\u7684\u884C\u5C06\u6839\u636EinsertXXX\u7684\u4F4D\u7F6E\u6765\u63D2\u5165\uFF0C\u800Cregexp\u53C2\u6570\u5219\u5145\u5F53\u5E42\u7B49\u6027\u5224\u65AD\u53C2\u6570\uFF1A\u53EA\u6709regepx\u5339\u914D\u5931\u8D25\u65F6\uFF0CinsertXXX\u624D\u4F1A\u63D2\u5165\u884C\u3002</p><p>\u4F8B\u5982\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>- lineinfile:
path: &quot;a.txt&quot;
line: &quot;hello line&quot;
regexp: &#39;^hello&#39;
insertbefore: &#39;^para.* 2&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u8FD9\u8868\u793A\u5C06&quot;hello line&quot;\u63D2\u5165\u5728paragraph 2\u884C\u7684\u524D\u9762\uFF0C\u4F46\u5982\u679C\u518D\u6B21\u6267\u884C\uFF0C\u5219\u4E0D\u4F1A\u518D\u6B21\u63D2\u5165\uFF0C\u56E0\u4E3Aregexp\u53C2\u6570\u6307\u5B9A\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\u5DF2\u7ECF\u80FD\u591F\u5DF2\u7ECF\u5B58\u5728\u7684&quot;hello line&quot;\u884C\u3002\u6240\u4EE5\uFF0C\u5F53regepx\u7ED3\u5408insertXXX\u4F7F\u7528\u65F6\uFF0Cregexp\u7684\u53C2\u6570\u901A\u5E38\u90FD\u4F1A\u8BBE\u7F6E\u4E3A\u80FD\u591F\u5339\u914D\u63D2\u5165\u4E4B\u540E\u7684\u884C\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u4EE5\u4FBF\u5B9E\u73B0\u5E42\u7B49\u6027\u3002</p><blockquote><p>\u53C2\u8003\u94FE\u63A5\uFF1A</p><p>https://www.cnblogs.com/breezey/p/9297252.html</p><p>https://blog.51cto.com/cloumn/blog/1544</p></blockquote>`,63);function l(p,r){return a}var t=n(s,[["render",l],["__file","lineinfile.html.vue"]]);export{t as default};
