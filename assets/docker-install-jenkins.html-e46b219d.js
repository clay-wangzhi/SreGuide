const e=JSON.parse('{"key":"v-152091b0","path":"/devops/jenkins/docker-install-jenkins.html","title":"2.4 使用docker安装jenkins","lang":"zh-CN","frontmatter":{"category":"自动化工具","tag":["Jenkins"],"description":"2.4 使用docker安装jenkins 安装配置docker 更换yum源，如果本来就是国内源，无需更换 curl -fsSL \\"https://gitee.com/clay-wangzhi/shell/raw/master/repo_replace.sh\\" | bash 安装配置Docker 使用官方脚本安装 Docker curl -fsSL \\"https://get.docker.com/\\" | bash -s -- --mirror Aliyun 加载br_netfilter modprobe br_netfilter 设置下系统内核参数 cat&lt;&lt;EOF &gt; /etc/sysctl.d/docker.conf # 要求iptables不对bridge的数据进行处理 net.bridge.bridge-nf-call-ip6tables = 1 net.bridge.bridge-nf-call-iptables = 1 net.bridge.bridge-nf-call-arptables = 1 # 开启转发 net.ipv4.ip_forward = 1 EOF sysctl -p /etc/sysctl.d/docker.conf ⚠️ 慎用sysctl --system命令，如果参数在不同文件中设置，会有优先级问题，目前看来/etc/sysctl.conf的优先级最高 配置docker镜像加速器 curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://f1361db2.m.daocloud.io 启动docker服务并加入开机自启 systemctl enable docker &amp;&amp; systemctl start docker","head":[["meta",{"property":"og:url","content":"https://clay-wangzhi.com/devops/jenkins/docker-install-jenkins.html"}],["meta",{"property":"og:site_name","content":"SRE运维进阶之路"}],["meta",{"property":"og:title","content":"2.4 使用docker安装jenkins"}],["meta",{"property":"og:description","content":"2.4 使用docker安装jenkins 安装配置docker 更换yum源，如果本来就是国内源，无需更换 curl -fsSL \\"https://gitee.com/clay-wangzhi/shell/raw/master/repo_replace.sh\\" | bash 安装配置Docker 使用官方脚本安装 Docker curl -fsSL \\"https://get.docker.com/\\" | bash -s -- --mirror Aliyun 加载br_netfilter modprobe br_netfilter 设置下系统内核参数 cat&lt;&lt;EOF &gt; /etc/sysctl.d/docker.conf # 要求iptables不对bridge的数据进行处理 net.bridge.bridge-nf-call-ip6tables = 1 net.bridge.bridge-nf-call-iptables = 1 net.bridge.bridge-nf-call-arptables = 1 # 开启转发 net.ipv4.ip_forward = 1 EOF sysctl -p /etc/sysctl.d/docker.conf ⚠️ 慎用sysctl --system命令，如果参数在不同文件中设置，会有优先级问题，目前看来/etc/sysctl.conf的优先级最高 配置docker镜像加速器 curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://f1361db2.m.daocloud.io 启动docker服务并加入开机自启 systemctl enable docker &amp;&amp; systemctl start docker"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-04-19T13:50:36.000Z"}],["meta",{"property":"article:author","content":"Clay"}],["meta",{"property":"article:tag","content":"Jenkins"}],["meta",{"property":"article:modified_time","content":"2023-04-19T13:50:36.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"2.4 使用docker安装jenkins\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-04-19T13:50:36.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Clay\\",\\"url\\":\\"https://clay-wangzhi.com\\"}]}"]]},"headers":[{"level":2,"title":"安装配置docker","slug":"安装配置docker","link":"#安装配置docker","children":[]},{"level":2,"title":"安装配置nginx","slug":"安装配置nginx","link":"#安装配置nginx","children":[]},{"level":2,"title":"安装配置jenkins","slug":"安装配置jenkins","link":"#安装配置jenkins","children":[]}],"git":{"createdTime":1681912236000,"updatedTime":1681912236000,"contributors":[{"name":"clay-wangzhi","email":"clay.wangzhi@gmail.com","commits":1}]},"readingTime":{"minutes":2.19,"words":656},"filePathRelative":"devops/jenkins/docker-install-jenkins.md","localizedDate":"2023年4月19日","excerpt":"<h1> 2.4 使用docker安装jenkins</h1>\\n<h2> 安装配置docker</h2>\\n<ol>\\n<li>\\n<p>更换yum源，如果本来就是国内源，无需更换</p>\\n<div class=\\"language-bash line-numbers-mode\\" data-ext=\\"sh\\"><pre class=\\"language-bash\\"><code><span class=\\"token function\\">curl</span> <span class=\\"token parameter variable\\">-fsSL</span> <span class=\\"token string\\">\\"https://gitee.com/clay-wangzhi/shell/raw/master/repo_replace.sh\\"</span> <span class=\\"token operator\\">|</span> <span class=\\"token function\\">bash</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div></div></div></li>\\n<li>\\n<p>安装配置Docker</p>\\n<p>使用官方脚本安装 Docker</p>\\n<div class=\\"language-bash line-numbers-mode\\" data-ext=\\"sh\\"><pre class=\\"language-bash\\"><code><span class=\\"token function\\">curl</span> <span class=\\"token parameter variable\\">-fsSL</span> <span class=\\"token string\\">\\"https://get.docker.com/\\"</span> <span class=\\"token operator\\">|</span> <span class=\\"token function\\">bash</span> <span class=\\"token parameter variable\\">-s</span> -- <span class=\\"token parameter variable\\">--mirror</span> Aliyun\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div></div></div><p>加载br_netfilter</p>\\n<div class=\\"language-bash line-numbers-mode\\" data-ext=\\"sh\\"><pre class=\\"language-bash\\"><code>modprobe br_netfilter\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div></div></div><p>设置下系统内核参数</p>\\n<div class=\\"language-bash line-numbers-mode\\" data-ext=\\"sh\\"><pre class=\\"language-bash\\"><code>cat<span class=\\"token operator\\">&lt;&lt;</span><span class=\\"token string\\">EOF<span class=\\"token bash punctuation\\"> <span class=\\"token operator\\">&gt;</span> /etc/sysctl.d/docker.conf</span>\\n# 要求iptables不对bridge的数据进行处理\\nnet.bridge.bridge-nf-call-ip6tables = 1\\nnet.bridge.bridge-nf-call-iptables = 1\\nnet.bridge.bridge-nf-call-arptables = 1\\n# 开启转发\\nnet.ipv4.ip_forward = 1\\nEOF</span>\\n<span class=\\"token function\\">sysctl</span> <span class=\\"token parameter variable\\">-p</span> /etc/sysctl.d/docker.conf\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div><blockquote>\\n<p>⚠️ 慎用<code>sysctl --system</code>命令，如果参数在不同文件中设置，会有优先级问题，目前看来<code>/etc/sysctl.conf</code>的优先级最高</p>\\n</blockquote>\\n<p>配置docker镜像加速器</p>\\n<div class=\\"language-bash line-numbers-mode\\" data-ext=\\"sh\\"><pre class=\\"language-bash\\"><code><span class=\\"token function\\">curl</span> <span class=\\"token parameter variable\\">-sSL</span> https://get.daocloud.io/daotools/set_mirror.sh <span class=\\"token operator\\">|</span> <span class=\\"token function\\">sh</span> <span class=\\"token parameter variable\\">-s</span> http://f1361db2.m.daocloud.io\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div></div></div><p>启动docker服务并加入开机自启</p>\\n<div class=\\"language-bash line-numbers-mode\\" data-ext=\\"sh\\"><pre class=\\"language-bash\\"><code>systemctl <span class=\\"token builtin class-name\\">enable</span> <span class=\\"token function\\">docker</span> <span class=\\"token operator\\">&amp;&amp;</span> systemctl start <span class=\\"token function\\">docker</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div></div></div></li>\\n</ol>","copyright":{"author":"Clay"},"autoDesc":true}');export{e as data};
