import{_ as t,r as p,c as l,a as n,b as a,F as o,e as c,d as e,o as r}from"./app.ab95b9c4.js";const u={},i=c(`<h1 id="redis-6-x-\u54E8\u5175\u5B89\u88C5\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#redis-6-x-\u54E8\u5175\u5B89\u88C5\u914D\u7F6E" aria-hidden="true">#</a> Redis 6.x \u54E8\u5175\u5B89\u88C5\u914D\u7F6E</h1><h2 id="_1-\u5347\u7EA7-gcc" tabindex="-1"><a class="header-anchor" href="#_1-\u5347\u7EA7-gcc" aria-hidden="true">#</a> 1 \u5347\u7EA7 gcc</h2><p>centos7 \u9ED8\u8BA4\u7684 gcc \u9ED8\u8BA4\u662F4.8.5,\u7248\u672C\u5C0F\u4E8E 5.3 \u65E0\u6CD5\u7F16\u8BD1,\u9700\u8981\u5148\u5B89\u88C5gcc\u65B0\u7248\u624D\u80FD\u7F16\u8BD1</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum -y <span class="token function">install</span> gcc-c++
yum -y <span class="token function">install</span> centos-release-scl
yum -y <span class="token function">install</span> devtoolset-9-gcc devtoolset-9-gcc-c++ devtoolset-9-binutils
<span class="token builtin class-name">echo</span> <span class="token string">&quot;source /opt/rh/devtoolset-9/enable&quot;</span> <span class="token operator">&gt;&gt;</span>/etc/profile 
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_2-\u7528-ansible-\u5B89\u88C5-redis-\u54E8\u5175" tabindex="-1"><a class="header-anchor" href="#_2-\u7528-ansible-\u5B89\u88C5-redis-\u54E8\u5175" aria-hidden="true">#</a> 2 \u7528 ansible \u5B89\u88C5 redis \u54E8\u5175</h2><p>\u4E0B\u8F7Drole</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> clone -b dev-clay https://github.com/clay-wangzhi/Ansible-roles.git
<span class="token function">cp</span> -r Ansible-roles/redis5/ /etc/ansible/roles/
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Example Playbook</p><p><code>cat /etc/ansible/playbooks/redis_sentinel.yml</code></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> 172.16.xx.xx
  <span class="token key atrule">vars</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">redis_version</span><span class="token punctuation">:</span> <span class="token string">&#39;6.2.4&#39;</span>
    <span class="token punctuation">-</span> <span class="token key atrule">redis_master_host</span><span class="token punctuation">:</span> <span class="token string">&#39;172.16.xx.xx&#39;</span>
    <span class="token punctuation">-</span> <span class="token key atrule">redis_master_port</span><span class="token punctuation">:</span> <span class="token string">&#39;6380&#39;</span>
    <span class="token punctuation">-</span> <span class="token key atrule">redis_requirepass</span><span class="token punctuation">:</span> <span class="token string">&#39;123456&#39;</span>
    <span class="token punctuation">-</span> <span class="token key atrule">redis_masterauth</span><span class="token punctuation">:</span> <span class="token string">&#39;123456&#39;</span>
    <span class="token punctuation">-</span> <span class="token key atrule">redis_sentinel_monitors</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> mymaster
        <span class="token key atrule">ip</span><span class="token punctuation">:</span> 172.16.xx.xx
        <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6380</span>
        <span class="token key atrule">quorum</span><span class="token punctuation">:</span> <span class="token number">2</span>
        <span class="token key atrule">masterauth</span><span class="token punctuation">:</span> <span class="token string">&#39;123456&#39;</span>
  <span class="token key atrule">roles</span><span class="token punctuation">:</span>
   <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">role</span><span class="token punctuation">:</span> redis5<span class="token punctuation">,</span> <span class="token key atrule">redis_port</span><span class="token punctuation">:</span> <span class="token number">6380</span> <span class="token punctuation">}</span>
   <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">role</span><span class="token punctuation">:</span> redis5<span class="token punctuation">,</span> <span class="token key atrule">redis_port</span><span class="token punctuation">:</span> <span class="token number">6381</span><span class="token punctuation">,</span> <span class="token key atrule">redis_slave</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token punctuation">}</span>
   <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">role</span><span class="token punctuation">:</span> redis5<span class="token punctuation">,</span> <span class="token key atrule">redis_port</span><span class="token punctuation">:</span> <span class="token number">6382</span><span class="token punctuation">,</span> <span class="token key atrule">redis_slave</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token punctuation">}</span>
   <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">role</span><span class="token punctuation">:</span> redis5<span class="token punctuation">,</span> <span class="token key atrule">redis_port</span><span class="token punctuation">:</span> <span class="token number">16380</span><span class="token punctuation">,</span> <span class="token key atrule">redis_sentinel</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token punctuation">}</span>
   <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">role</span><span class="token punctuation">:</span> redis5<span class="token punctuation">,</span> <span class="token key atrule">redis_port</span><span class="token punctuation">:</span> <span class="token number">16381</span><span class="token punctuation">,</span> <span class="token key atrule">redis_sentinel</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token punctuation">}</span>
   <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">role</span><span class="token punctuation">:</span> redis5<span class="token punctuation">,</span> <span class="token key atrule">redis_port</span><span class="token punctuation">:</span> <span class="token number">16382</span><span class="token punctuation">,</span> <span class="token key atrule">redis_sentinel</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>\u5B89\u88C5</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ansible-playbook redis_sentinel.yml
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u53C2\u8003\u94FE\u63A5</p>`,13),k={href:"http://www.phpheidong.com/blog/article/96564/60834d7eff7a49c816b5/",target:"_blank",rel:"noopener noreferrer"},d=e("redis6.x\u54E8\u5175\u6A21\u5F0F\u5B89\u88C5\u914D\u7F6E"),b={href:"https://github.com/lework/Ansible-roles/blob/master/redis5/README.md",target:"_blank",rel:"noopener noreferrer"},m=e("ansible roles redis"),h={href:"http://www.manongjc.com/detail/23-xvtvqgqadcuaveg.html",target:"_blank",rel:"noopener noreferrer"},_=e("\u4F7F\u7528Systemd\u542F\u52A8Redis");function y(g,v){const s=p("ExternalLinkIcon");return r(),l(o,null,[i,n("ul",null,[n("li",null,[n("a",k,[d,a(s)])]),n("li",null,[n("a",b,[m,a(s)])]),n("li",null,[n("a",h,[_,a(s)])])])],64)}var f=t(u,[["render",y],["__file","redis-sentinel.html.vue"]]);export{f as default};
