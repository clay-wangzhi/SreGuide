import{_ as s,e as n}from"./app.37ca1d6f.js";const a={},e=n(`<h1 id="\u6027\u80FD\u538B\u6D4B\u6307\u6807\u53CA\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u6027\u80FD\u538B\u6D4B\u6307\u6807\u53CA\u65B9\u6CD5" aria-hidden="true">#</a> \u6027\u80FD\u538B\u6D4B\u6307\u6807\u53CA\u65B9\u6CD5</h1><h2 id="\u4E00\u3001\u57FA\u7840\u6027\u80FD\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001\u57FA\u7840\u6027\u80FD\u6D4B\u8BD5" aria-hidden="true">#</a> \u4E00\u3001\u57FA\u7840\u6027\u80FD\u6D4B\u8BD5</h2><h3 id="cpu-\u6027\u80FD" tabindex="-1"><a class="header-anchor" href="#cpu-\u6027\u80FD" aria-hidden="true">#</a> CPU \u6027\u80FD</h3><h4 id="super-pi" tabindex="-1"><a class="header-anchor" href="#super-pi" aria-hidden="true">#</a> Super_Pi</h4><p>\u5728\u8BA1\u7B97\u6027\u80FD\u6D4B\u8BD5\u4E2D\uFF0C\u6211\u4EEC\u4F7F\u7528linux\u4E0B\u7684bc\u8BA1\u7B97\u5668\u7A0B\u5E8F\u901A\u8FC7\u53CD\u6B63\u5207\u51FD\u6570\u8BA1\u7B975000\u4F4D\u5706\u5468\u7387\u7684cpu\u8017\u65F6\u6765\u5BF9\u4E3B\u673A\u8FDB\u884C\u6D4B\u8BD5\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u5B89\u88C5 bc</span>
yum -y <span class="token function">install</span> <span class="token function">bc</span>
<span class="token comment"># \u5355\u6838\u8BA1\u7B97\u6027\u80FD\u6D4B\u8BD5</span>
<span class="token function">time</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;scale=5000; 4*a(1)&quot;</span> <span class="token operator">|</span> <span class="token function">bc</span> -l -q <span class="token operator">&amp;&gt;</span><span class="token number">1</span>
<span class="token comment"># \u591A\u6838\u8BA1\u7B97\u6027\u80FD\u6D4B\u8BD5</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">\`</span><span class="token function">seq</span> <span class="token number">1</span> <span class="token number">2</span><span class="token variable">\`</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token punctuation">(</span>time <span class="token builtin class-name">echo</span> <span class="token string">&quot;scale=5000; 4*a(1)&quot;</span> <span class="token operator">|</span> <span class="token function">bc</span> -l -q <span class="token operator">&amp;&gt;</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token keyword">done</span> <span class="token punctuation">;</span> <span class="token function">wait</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">\`</span><span class="token function">seq</span> <span class="token number">1</span> <span class="token number">4</span><span class="token variable">\`</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token punctuation">(</span>time <span class="token builtin class-name">echo</span> <span class="token string">&quot;scale=5000; 4*a(1)&quot;</span> <span class="token operator">|</span> <span class="token function">bc</span> -l -q <span class="token operator">&amp;&gt;</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token keyword">done</span> <span class="token punctuation">;</span> <span class="token function">wait</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="cpu\u8C03\u5EA6\u5EF6\u65F6" tabindex="-1"><a class="header-anchor" href="#cpu\u8C03\u5EA6\u5EF6\u65F6" aria-hidden="true">#</a> CPU\u8C03\u5EA6\u5EF6\u65F6</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/rgushchin/schbench.git
<span class="token function">make</span>
./schbench -t <span class="token number">4</span> -m <span class="token number">1</span>
<span class="token comment"># -t \u7EBF\u7A0B\u6570</span>
<span class="token comment"># -m \u6BCF\u4E2A\u7EBF\u7A0B\u4EA7\u751F\u7684\u4FE1\u606F\u6570</span>
 
\u6CE8\u610F\uFF1A CPU\u8C03\u5EA6\u5EF6\u8FDF\u4E00\u822C\u60C5\u51B5\u4E0B\uFF0C\u662F\u8D1F\u8F7D\u7684\u5173\u952E\u6307\u6807\uFF0C\u672C\u6B21\u538B\u6D4B\u9700\u8981KVM\uFF0CTXY\u7A7A\u8D1F\u8F7D\u3002\u5F53\u8D44\u6E90\u8FD8\u6CA1\u6709\u5728\u4F7F\u7528\u65F6\uFF0C\u5BB9\u5668\u6B63\u5E38\u7533\u8BF7\u5BF9\u5E94\u914D\u7F6E\u538B\u6D4B\u5373\u53EF\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="sysbench-\u7D20\u6570\u8BA1\u7B97" tabindex="-1"><a class="header-anchor" href="#sysbench-\u7D20\u6570\u8BA1\u7B97" aria-hidden="true">#</a> sysbench \u7D20\u6570\u8BA1\u7B97</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u5355\u7EBF\u7A0B\u7D20\u6570\u8FD0\u7B97\uFF0C\u6700\u5927\u7D20\u657010000\uFF0C\u8BA1\u7B9710000 events\u7ED3\u675F\u4E3A\u6B62</span>
sysbench --threads<span class="token operator">=</span><span class="token number">1</span> --events<span class="token operator">=</span><span class="token number">10000</span> --time<span class="token operator">=</span><span class="token number">0</span> cpu run
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="\u5185\u5B58\u6027\u80FD" tabindex="-1"><a class="header-anchor" href="#\u5185\u5B58\u6027\u80FD" aria-hidden="true">#</a> \u5185\u5B58\u6027\u80FD</h3><h4 id="\u5185\u5B58\u5E26\u5BBD-stream" tabindex="-1"><a class="header-anchor" href="#\u5185\u5B58\u5E26\u5BBD-stream" aria-hidden="true">#</a> \u5185\u5B58\u5E26\u5BBD(stream)</h4><p>Stream\u6D4B\u8BD5\u662F\u5185\u5B58\u6D4B\u8BD5\u4E2D\u4E1A\u754C\u516C\u8BA4\u7684\u5185\u5B58\u5E26\u5BBD\u6027\u80FD\u6D4B\u8BD5\u57FA\u51C6\u5DE5\u5177</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum -y <span class="token function">install</span> gcc gcc-gfortran
<span class="token function">git</span> clone https://github.com/jeffhammond/STREAM.git
<span class="token builtin class-name">cd</span> STREAM/
<span class="token function">make</span>
<span class="token comment"># \u6307\u5B9A\u7EBF\u7A0B\u6570</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">OMP_NUM_THREADS</span><span class="token operator">=</span><span class="token number">1</span>
./stream_c.exe
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="\u5185\u5B58\u65F6\u5EF6-mlc" tabindex="-1"><a class="header-anchor" href="#\u5185\u5B58\u65F6\u5EF6-mlc" aria-hidden="true">#</a> \u5185\u5B58\u65F6\u5EF6(mlc)</h4><p>\u5B98\u7F51\u4E0B\u8F7D\uFF1Ahttps://www.intel.com/content/www/us/en/developer/articles/tool/intelr-memory-latency-checker.html#inpage-nav-9</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">mkdir</span> mlc
<span class="token function">tar</span> -xvf mlc_v3.9a.tgz -C mlc
<span class="token builtin class-name">cd</span> mlc/Linux/
./mlc --latency_matrix
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="sysbench-\u8FDE\u7EED\u8BFB\u5199\u6216\u8005\u968F\u673A\u8BFB\u5199\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#sysbench-\u8FDE\u7EED\u8BFB\u5199\u6216\u8005\u968F\u673A\u8BFB\u5199\u64CD\u4F5C" aria-hidden="true">#</a> sysbench \u8FDE\u7EED\u8BFB\u5199\u6216\u8005\u968F\u673A\u8BFB\u5199\u64CD\u4F5C</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u5199\u64CD\u4F5C</span>
<span class="token comment">## \u7EBF\u7A0B\u6570=4  \u5185\u5B58\u5757\u5927\u5C0F=8K \u4F20\u8F93\u6570\u636E\u603B\u91CF=100G \u5185\u5B58\u64CD\u4F5C=\u5199 \u5185\u5B58\u8BBF\u95EE\u6A21\u5F0F=\u987A\u5E8F\u8BBF\u95EE</span>
sysbench memory --threads<span class="token operator">=</span><span class="token number">4</span> --memory-block-size<span class="token operator">=</span>8K --memory-total-size<span class="token operator">=</span>100G --memory-oper<span class="token operator">=</span>write --memory-access-mode<span class="token operator">=</span>seq run
<span class="token comment">## \u7EBF\u7A0B\u6570=4  \u5185\u5B58\u5757\u5927\u5C0F=8K \u4F20\u8F93\u6570\u636E\u603B\u91CF=100G \u5185\u5B58\u64CD\u4F5C=\u5199 \u5185\u5B58\u8BBF\u95EE\u6A21\u5F0F=\u968F\u673A\u8BBF\u95EE</span>
sysbench memory --threads<span class="token operator">=</span><span class="token number">4</span> --memory-block-size<span class="token operator">=</span>8K --memory-total-size<span class="token operator">=</span>100G --memory-oper<span class="token operator">=</span>write --memory-access-mode<span class="token operator">=</span>rnd run
  
<span class="token comment"># \u8BFB\u64CD\u4F5C</span>
<span class="token comment">## \u7EBF\u7A0B\u6570=4  \u5185\u5B58\u5757\u5927\u5C0F=8K \u4F20\u8F93\u6570\u636E\u603B\u91CF=100G \u5185\u5B58\u64CD\u4F5C=\u8BFB \u5185\u5B58\u8BBF\u95EE\u6A21\u5F0F=\u987A\u5E8F\u8BBF\u95EE</span>
sysbench memory --threads<span class="token operator">=</span><span class="token number">4</span> --memory-block-size<span class="token operator">=</span>8K --memory-total-size<span class="token operator">=</span>100G --memory-oper<span class="token operator">=</span>read --memory-access-mode<span class="token operator">=</span>seq run
<span class="token comment">## \u7EBF\u7A0B\u6570=4  \u5185\u5B58\u5757\u5927\u5C0F=8K \u4F20\u8F93\u6570\u636E\u603B\u91CF=100G \u5185\u5B58\u64CD\u4F5C=\u8BFB \u5185\u5B58\u8BBF\u95EE\u6A21\u5F0F=\u968F\u673A\u8BBF\u95EE</span>
sysbench memory --threads<span class="token operator">=</span><span class="token number">4</span> --memory-block-size<span class="token operator">=</span>8K --memory-total-size<span class="token operator">=</span>100G --memory-oper<span class="token operator">=</span>read --memory-access-mode<span class="token operator">=</span>rnd run
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="\u78C1\u76D8-i-o-\u6027\u80FD" tabindex="-1"><a class="header-anchor" href="#\u78C1\u76D8-i-o-\u6027\u80FD" aria-hidden="true">#</a> \u78C1\u76D8 I/O \u6027\u80FD</h3><blockquote><p>\u26A0\uFE0F \u6D4B\u8BD5\u65F6\u8BF7\u51C6\u5907\u88F8\u7684\u6570\u636E\u76D8\uFF0C\u6D4B\u8BD5\u5B8C\u6210\u540E\u8BF7\u91CD\u65B0\u683C\u5F0F\u5316\u78C1\u76D8</p></blockquote><h4 id="\u78C1\u76D8\u8BFB\u3001\u5199iops" tabindex="-1"><a class="header-anchor" href="#\u78C1\u76D8\u8BFB\u3001\u5199iops" aria-hidden="true">#</a> \u78C1\u76D8\u8BFB\u3001\u5199iops</h4><p>iops\uFF1A\u78C1\u76D8\u7684\u6BCF\u79D2\u8BFB\u5199\u6B21\u6570\uFF0C\u8FD9\u4E2A\u662F\u968F\u673A\u8BFB\u5199\u8003\u5BDF\u7684\u91CD\u70B9</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> -y fio
<span class="token comment"># filename \u4E3A\u6570\u636E\u76D8\u540D\u79F0,\u6CE8\u610F\u4FEE\u6539\uFF0C\u6D4B\u8BD5\u786C\u76D8\u6027\u80FD\u65F6\uFF0C\u5EFA\u8BAE\u76F4\u63A5\u6D4B\u8BD5\u88F8\u6570\u636E\u76D8\uFF0C\u4E0D\u8981\u4F7F\u7528\u7CFB\u7EDF\u76D8\u6216\u5E26\u6709\u4E1A\u52A1\u6570\u636E\u7684\u6570\u636E\u76D8\uFF0C\u53EF\u5F97\u9020\u6210\u78C1\u76D8\u635F\u574F</span>
<span class="token comment"># \u968F\u673A\u8BFB</span>
fio --ioengine<span class="token operator">=</span>libaio --bs<span class="token operator">=</span>4k --direct<span class="token operator">=</span><span class="token number">1</span> --thread --time_based --rw<span class="token operator">=</span>randread --filename<span class="token operator">=</span>/dev/sda --runtime<span class="token operator">=</span><span class="token number">60</span> --numjobs<span class="token operator">=</span><span class="token number">1</span> --iodepth<span class="token operator">=</span><span class="token number">1</span> --group_reporting --name<span class="token operator">=</span>randread-dep1 --size<span class="token operator">=</span>1g
<span class="token comment"># \u968F\u673A\u5199 IOPS</span>
fio --ioengine<span class="token operator">=</span>libaio --bs<span class="token operator">=</span>4k --direct<span class="token operator">=</span><span class="token number">1</span> --thread --time_based --rw<span class="token operator">=</span>randwrite --filename<span class="token operator">=</span>/dev/sda --runtime<span class="token operator">=</span><span class="token number">60</span> --numjobs<span class="token operator">=</span><span class="token number">1</span> --iodepth<span class="token operator">=</span><span class="token number">1</span> --group_reporting --name<span class="token operator">=</span>randread-dep1 --size<span class="token operator">=</span>1g
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="\u78C1\u76D8\u8BFB\u3001\u5199\u5E26\u5BBD" tabindex="-1"><a class="header-anchor" href="#\u78C1\u76D8\u8BFB\u3001\u5199\u5E26\u5BBD" aria-hidden="true">#</a> \u78C1\u76D8\u8BFB\u3001\u5199\u5E26\u5BBD</h4><p>bw\uFF1A\u78C1\u76D8\u7684\u541E\u5410\u91CF\uFF0C\u8FD9\u4E2A\u662F\u987A\u5E8F\u8BFB\u5199\u8003\u5BDF\u7684\u91CD\u70B9</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u987A\u5E8F\u8BFB</span>
fio --ioengine<span class="token operator">=</span>libaio --bs<span class="token operator">=</span>4k --direct<span class="token operator">=</span><span class="token number">1</span> --thread --time_based --rw<span class="token operator">=</span>read --filename<span class="token operator">=</span>/dev/sda --runtime<span class="token operator">=</span><span class="token number">60</span> --numjobs<span class="token operator">=</span><span class="token number">1</span> --iodepth<span class="token operator">=</span><span class="token number">1</span> --group_reporting --name<span class="token operator">=</span>randread-dep1 --size<span class="token operator">=</span>1g
<span class="token comment"># \u987A\u5E8F\u5199</span>
fio --ioengine<span class="token operator">=</span>libaio --bs<span class="token operator">=</span>4k --direct<span class="token operator">=</span><span class="token number">1</span> --thread --time_based --rw<span class="token operator">=</span>write --filename<span class="token operator">=</span>/dev/sda --runtime<span class="token operator">=</span><span class="token number">60</span> --numjobs<span class="token operator">=</span><span class="token number">1</span> --iodepth<span class="token operator">=</span><span class="token number">1</span> --group_reporting --name<span class="token operator">=</span>randread-dep1 --size<span class="token operator">=</span>1g
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="\u5B58\u50A8\u6027\u80FD\u2014\u2014\u78C1\u76D8\u65F6\u5EF6" tabindex="-1"><a class="header-anchor" href="#\u5B58\u50A8\u6027\u80FD\u2014\u2014\u78C1\u76D8\u65F6\u5EF6" aria-hidden="true">#</a> \u5B58\u50A8\u6027\u80FD\u2014\u2014\u78C1\u76D8\u65F6\u5EF6</h4><p>\u4F9D\u636E\u4E0A\u9762\u7ED3\u679C\u770B clat</p><h3 id="\u6587\u4EF6-i-o-\u6027\u80FD" tabindex="-1"><a class="header-anchor" href="#\u6587\u4EF6-i-o-\u6027\u80FD" aria-hidden="true">#</a> \u6587\u4EF6 I/O \u6027\u80FD</h3><h4 id="sysbench-\u6587\u4EF6\u968F\u673A\u8BFB\u5199\u901F\u5EA6\u3001\u987A\u5E8F\u8BFB\u5199\u541E\u5410\u7387" tabindex="-1"><a class="header-anchor" href="#sysbench-\u6587\u4EF6\u968F\u673A\u8BFB\u5199\u901F\u5EA6\u3001\u987A\u5E8F\u8BFB\u5199\u541E\u5410\u7387" aria-hidden="true">#</a> sysbench \u6587\u4EF6\u968F\u673A\u8BFB\u5199\u901F\u5EA6\u3001\u987A\u5E8F\u8BFB\u5199\u541E\u5410\u7387</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u7EBF\u7A0B\u6570=4 \u6BCF\u96944s\u8F93\u51FA\u4E00\u6B21\u7ED3\u679C \u6D4B\u8BD5\u65F6\u95F4=60s</span>
<span class="token comment"># \u6587\u4EF6\u6570=2 \u6587\u4EF6\u603B\u5927\u5C0F=4G \u6587\u4EF6\u64CD\u4F5C\u6A21\u5F0F=\u968F\u673A\u8BFB\u5199</span>
<span class="token comment"># \u5757\u5927\u5C0F 16384</span>
sysbench --threads<span class="token operator">=</span><span class="token number">4</span> --report-interval<span class="token operator">=</span><span class="token number">4</span> --time<span class="token operator">=</span><span class="token number">60</span> --test<span class="token operator">=</span>fileio --file-num<span class="token operator">=</span><span class="token number">2</span> --file-total-size<span class="token operator">=</span>4G --file-test-mode<span class="token operator">=</span>rndrw prepare
sysbench --threads<span class="token operator">=</span><span class="token number">4</span> --report-interval<span class="token operator">=</span><span class="token number">4</span> --time<span class="token operator">=</span><span class="token number">60</span> --test<span class="token operator">=</span>fileio --file-num<span class="token operator">=</span><span class="token number">2</span> --file-total-size<span class="token operator">=</span>4G --file-test-mode<span class="token operator">=</span>rndrw run
sysbench --threads<span class="token operator">=</span><span class="token number">4</span> --report-interval<span class="token operator">=</span><span class="token number">4</span> --time<span class="token operator">=</span><span class="token number">60</span> --test<span class="token operator">=</span>fileio --file-num<span class="token operator">=</span><span class="token number">2</span> --file-total-size<span class="token operator">=</span>4G --file-test-mode<span class="token operator">=</span>rndrw cleanup
<span class="token comment"># \u987A\u5E8F\u5199</span>
sysbench --threads<span class="token operator">=</span><span class="token number">4</span> --report-interval<span class="token operator">=</span><span class="token number">4</span> --time<span class="token operator">=</span><span class="token number">60</span> --test<span class="token operator">=</span>fileio --file-num<span class="token operator">=</span><span class="token number">2</span> --file-total-size<span class="token operator">=</span>4G --file-test-mode<span class="token operator">=</span>seqwr prepare
sysbench --threads<span class="token operator">=</span><span class="token number">4</span> --report-interval<span class="token operator">=</span><span class="token number">4</span> --time<span class="token operator">=</span><span class="token number">60</span> --test<span class="token operator">=</span>fileio --file-num<span class="token operator">=</span><span class="token number">2</span> --file-total-size<span class="token operator">=</span>4G --file-test-mode<span class="token operator">=</span>seqwr run
sysbench --threads<span class="token operator">=</span><span class="token number">4</span> --report-interval<span class="token operator">=</span><span class="token number">4</span> --time<span class="token operator">=</span><span class="token number">60</span> --test<span class="token operator">=</span>fileio --file-num<span class="token operator">=</span><span class="token number">2</span> --file-total-size<span class="token operator">=</span>4G --file-test-mode<span class="token operator">=</span>seqwr cleanup
<span class="token comment"># \u987A\u5E8F\u8BFB</span>
sysbench --threads<span class="token operator">=</span><span class="token number">4</span> --report-interval<span class="token operator">=</span><span class="token number">4</span> --time<span class="token operator">=</span><span class="token number">60</span> --test<span class="token operator">=</span>fileio --file-num<span class="token operator">=</span><span class="token number">2</span> --file-total-size<span class="token operator">=</span>4G --file-test-mode<span class="token operator">=</span>seqrd prepare
sysbench --threads<span class="token operator">=</span><span class="token number">4</span> --report-interval<span class="token operator">=</span><span class="token number">4</span> --time<span class="token operator">=</span><span class="token number">60</span> --test<span class="token operator">=</span>fileio --file-num<span class="token operator">=</span><span class="token number">2</span> --file-total-size<span class="token operator">=</span>4G --file-test-mode<span class="token operator">=</span>seqrd run
sysbench --threads<span class="token operator">=</span><span class="token number">4</span> --report-interval<span class="token operator">=</span><span class="token number">4</span> --time<span class="token operator">=</span><span class="token number">60</span> --test<span class="token operator">=</span>fileio --file-num<span class="token operator">=</span><span class="token number">2</span> --file-total-size<span class="token operator">=</span>4G --file-test-mode<span class="token operator">=</span>seqrd cleanup
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="dd-\u987A\u5E8F\u5199" tabindex="-1"><a class="header-anchor" href="#dd-\u987A\u5E8F\u5199" aria-hidden="true">#</a> dd \u987A\u5E8F\u5199</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/zero <span class="token assign-left variable">of</span><span class="token operator">=</span>benchtest_<span class="token variable">$$</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>512k <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">2048</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>fdatasync <span class="token operator">&amp;&amp;</span> <span class="token function">rm</span> -f benchtest_<span class="token variable">$$</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="\u7F51\u7EDC\u6027\u80FD" tabindex="-1"><a class="header-anchor" href="#\u7F51\u7EDC\u6027\u80FD" aria-hidden="true">#</a> \u7F51\u7EDC\u6027\u80FD</h3><h4 id="\u4F20\u8F93\u901F\u7387-pps" tabindex="-1"><a class="header-anchor" href="#\u4F20\u8F93\u901F\u7387-pps" aria-hidden="true">#</a> \u4F20\u8F93\u901F\u7387(pps)</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># server\u7AEF\uFF1A</span>
yum <span class="token function">install</span> -y sysstat
 
netserver -p <span class="token number">12345</span><span class="token punctuation">(</span>\u542F\u52A8<span class="token punctuation">)</span>
 
sar -n DEV <span class="token number">1</span>
 
<span class="token comment">#client\u7AEF</span>
<span class="token function">wget</span> -c <span class="token string">&quot;https://codeload.github.com/HewlettPackard/netperf/tar.gz/netperf-2.5.0&quot;</span> -O netperf-2.5.0.tar.gz
<span class="token function">tar</span> zxvf netperf-2.5.0.tar.gz
<span class="token builtin class-name">cd</span> netperf-netperf-2.5.0
yum <span class="token function">install</span> gcc cc -y <span class="token operator">&amp;&amp;</span> ./configure <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
netperf -H <span class="token variable">$server_ip</span> -p <span class="token variable">$port</span> -t UDP_STREAM -l <span class="token number">300</span> -- -m <span class="token number">1</span> -R <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="\u7F51\u7EDC\u5E26\u5BBD" tabindex="-1"><a class="header-anchor" href="#\u7F51\u7EDC\u5E26\u5BBD" aria-hidden="true">#</a> \u7F51\u7EDC\u5E26\u5BBD</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># server\u7AEF\uFF1A</span>
yum <span class="token function">install</span> -y sysstat
 
netserver -p <span class="token number">12345</span><span class="token punctuation">(</span>\u542F\u52A8<span class="token punctuation">)</span>
 
sar -n DEV <span class="token number">1</span>
 
<span class="token comment">#client\u7AEF</span>
<span class="token function">wget</span> -c <span class="token string">&quot;https://codeload.github.com/HewlettPackard/netperf/tar.gz/netperf-2.5.0&quot;</span> -O netperf-2.5.0.tar.gz
<span class="token function">tar</span> zxvf netperf-2.5.0.tar.gz
<span class="token builtin class-name">cd</span> netperf-netperf-2.5.0
yum <span class="token function">install</span> gcc cc -y <span class="token operator">&amp;&amp;</span> ./configure <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
netperf -t TCP_STREAM -H <span class="token variable">$server_ip</span> -p <span class="token variable">$port</span> -l 60s -- -m 32k <span class="token string">&quot;MAX_LATENCY,MEAN_LATENCY,P90_LATENCY,P99_LATENCY,P999_LATENCY,P9999_LATENCY,STDDEV_LATENCY,THROUGHPUT,THROUGHPUT_UNITS&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="\u5355\u5411\u65F6\u5EF6" tabindex="-1"><a class="header-anchor" href="#\u5355\u5411\u65F6\u5EF6" aria-hidden="true">#</a> \u5355\u5411\u65F6\u5EF6</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u670D\u52A1\u7AEF\uFF1A
yum <span class="token function">install</span> -y sockperf
sockperf sr --daemonize <span class="token operator">&gt;</span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>
 
\u5BA2\u6237\u7AEF\uFF1A
sockperf under-load -i serverip  --mps<span class="token operator">=</span><span class="token number">100000</span> -t <span class="token number">300</span> -m <span class="token number">14</span> --reply-every<span class="token operator">=</span><span class="token number">50</span> --full-log<span class="token operator">=</span>sockperf.out
 
<span class="token comment"># mps: \u6BCF\u79D2\u591A\u5C11\u8BF7\u6C42   -t \u6D4B\u8BD5\u65F6\u95F4 -m \u6BCF\u4E2A\u8BF7\u6C42\u5927\u5C0F(\u9ED8\u8BA414byte)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="ping\u65F6\u5EF6" tabindex="-1"><a class="header-anchor" href="#ping\u65F6\u5EF6" aria-hidden="true">#</a> ping\u65F6\u5EF6</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">ping</span> -c <span class="token number">30</span> \u540C\u7F51\u6BB5\u5176\u4ED6\u4E3B\u673A
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="\u4E8C\u3001\u5E94\u7528\u6027\u80FD\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001\u5E94\u7528\u6027\u80FD\u6D4B\u8BD5" aria-hidden="true">#</a> \u4E8C\u3001\u5E94\u7528\u6027\u80FD\u6D4B\u8BD5</h2><h3 id="_1\u3001nginx" tabindex="-1"><a class="header-anchor" href="#_1\u3001nginx" aria-hidden="true">#</a> 1\u3001Nginx</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>wrk:
<span class="token function">git</span> clone https://github.com/wg/wrk.git
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
 
<span class="token comment">## his runs a benchmark for 30 seconds, using 12 threads, and keeping 400 HTTP connections open</span>
wrk -t12 -c400 -d30s http://127.0.0.1:8080/index.html
 
<span class="token comment">#\u9ED8\u8BA4\u957F\u8FDE\u63A5\uFF0C\u77ED\u94FE\u63A5\uFF1A-H \u201CConnection:Close\u201D</span>
 
ab:
ab -c <span class="token number">400</span> -n <span class="token number">1000000</span>
 
\u63A8\u8350ab\u6D4B\u8BD5
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_2\u3001mysql" tabindex="-1"><a class="header-anchor" href="#_2\u3001mysql" aria-hidden="true">#</a> 2\u3001MySQL</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u5B89\u88C5
yum <span class="token function">install</span> -y mariadb-server
create database pressure
grant all on pressure.* to <span class="token string">&#39;pressure&#39;</span>@<span class="token string">&#39;127.0.0.1&#39;</span> identified by <span class="token string">&#39;pressure&#39;</span><span class="token punctuation">;</span>
 
yum <span class="token function">install</span> -y sysbench
\u9020\u6570\u636E\uFF1A
sysbench --db-driver<span class="token operator">=</span>mysql --time<span class="token operator">=</span><span class="token number">300</span> --threads<span class="token operator">=</span><span class="token number">10</span> --report-interval<span class="token operator">=</span><span class="token number">1</span> --mysql-host<span class="token operator">=</span><span class="token number">127.0</span>.0.1 --mysql-port<span class="token operator">=</span><span class="token number">3306</span> --mysql-user<span class="token operator">=</span>pressure --mysql-password<span class="token operator">=</span>pressure --mysql-db<span class="token operator">=</span>pressure --tables<span class="token operator">=</span><span class="token number">20</span> --table_size<span class="token operator">=</span><span class="token number">1000000</span> oltp_read_write --db-ps-mode<span class="token operator">=</span>disable prepare
 
\u5E38\u89C4\u538B\u6D4B\uFF08\u5305\u542B\u8BFB\u5199\uFF09
sysbench --db-driver<span class="token operator">=</span>mysql --time<span class="token operator">=</span><span class="token number">300</span> --threads<span class="token operator">=</span><span class="token number">10</span> --report-interval<span class="token operator">=</span><span class="token number">1</span> --mysql-host<span class="token operator">=</span><span class="token number">127.0</span>.0.1 --mysql-port<span class="token operator">=</span><span class="token number">3306</span> --mysql-user<span class="token operator">=</span>pressure --mysql-password<span class="token operator">=</span>pressure --mysql-db<span class="token operator">=</span>pressure --tables<span class="token operator">=</span><span class="token number">20</span> --table_size<span class="token operator">=</span><span class="token number">1000000</span> oltp_read_write --db-ps-mode<span class="token operator">=</span>disable run
 
 
 
 
<span class="token comment"># \u57FA\u4E8Emysql\u7684\u9A71\u52A8\u53BB\u8FDE\u63A5mysql\u6570\u636E\u5E93\uFF0C\u5982\u679C\u662Foracle\u3001SQLserver\u5C31\u662F\u7528\u5BF9\u5E94\u7684\u6570\u636E\u5E93\u9A71\u52A8</span>
--db-driver<span class="token operator">=</span>mysql
<span class="token comment"># \u8FDE\u7EED\u8BBF\u95EE300\u79D2</span>
--time<span class="token operator">=</span><span class="token number">300</span>
<span class="token comment"># 10\u4E2A\u7EBF\u7A0B\u6A21\u62DF\u5E76\u53D1\u8BBF\u95EE</span>
--threads<span class="token operator">=</span><span class="token number">10</span>
<span class="token comment"># \u6BCF\u96941\u79D2\u8F93\u51FA\u4E00\u4E0B\u538B\u6D4B\u60C5\u51B5</span>
--report-interval<span class="token operator">=</span><span class="token number">1</span>
<span class="token comment"># \u6570\u636E\u5E93\u6240\u5728\u673A\u5668\u7684IP\u5730\u5740</span>
--mysql-host<span class="token operator">=</span><span class="token number">127.0</span>.0.1
<span class="token comment"># \u7AEF\u53E3\u53F7\uFF1A3306</span>
--mysql-port<span class="token operator">=</span><span class="token number">3306</span>
<span class="token comment"># \u7528\u6237\u540D</span>
--mysql-user<span class="token operator">=</span>test_user
<span class="token comment"># \u5BC6\u7801</span>
--mysql-password<span class="token operator">=</span><span class="token number">12345678</span>
<span class="token comment"># \u538B\u6D4B\u6570\u636E\u5E93</span>
--mysql-db<span class="token operator">=</span>test_db
<span class="token comment"># \u6A21\u62DF\u6784\u902020\u4E2A\u6D4B\u8BD5\u8868</span>
--tables<span class="token operator">=</span><span class="token number">20</span>
<span class="token comment"># \u6BCF\u4E2A\u8868\u6784\u9020100\u4E07\u6761\u6D4B\u8BD5\u6570\u636E\uFF0C\u6D4B\u8BD5\u8868\u7684\u540D\u5B57\u4F1A\u662F\u7C7B\u4F3C\u4E8Esbtest1\uFF0Csbtest2\u8FD9\u6837</span>
--table_size<span class="token operator">=</span><span class="token number">1000000</span> 
<span class="token comment"># \u6267\u884Coltp\u6570\u636E\u5E93\u7684\u8BFB\u5199\u6D4B\u8BD5</span>
oltp_read_write
<span class="token comment"># \u7981\u6B62ps\u6A21\u5F0F</span>
--db-ps-mode<span class="token operator">=</span>disable
<span class="token comment"># \u53C2\u7167\u8FD9\u4E2A\u547D\u4EE4\u7684\u8BBE\u7F6E\u53BB\u6784\u9020\u51FA\u6765\u6211\u4EEC\u9700\u8981\u7684\u6570\u636E\u5E93\u91CC\u7684\u6570\u636E</span>
<span class="token comment"># \u81EA\u52A8\u521B\u5EFA20\u4E2A\u6D4B\u8BD5\u8868\uFF0C\u6BCF\u4E2A\u8868\u91CC\u521B\u5EFA100\u4E07\u6761\u6D4B\u8BD5\u6570\u636E</span>
prepare
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><p>\u53C2\u8003\uFF1Ahttps://blog.csdn.net/aiyowei1106/article/details/117359969</p><h3 id="_3\u3001redis" tabindex="-1"><a class="header-anchor" href="#_3\u3001redis" aria-hidden="true">#</a> 3\u3001Redis</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> -y redis
<span class="token function">service</span> redis start
 
\u538B\u6D4B\uFF1A
redis-benchmark -t set,get -n <span class="token number">1000000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="\u4E09\u3001\u538B\u6D4B\u811A\u672C" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001\u538B\u6D4B\u811A\u672C" aria-hidden="true">#</a> \u4E09\u3001\u538B\u6D4B\u811A\u672C</h2><p>\u538B\u6D4B\u9700\u8981\u5927\u91CF\u91C7\u6837\uFF0C\u5E76\u5B9E\u65F6\u89C2\u5BDF</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/clay-wangzhi/bench.git
<span class="token function">bash</span> bench.sh
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,54);function p(r,o){return e}var l=s(a,[["render",p],["__file","sysbench.html.vue"]]);export{l as default};
