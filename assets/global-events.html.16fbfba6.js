import{_ as n,e as s}from"./app.e34c9e1b.js";const a={},e=s(`<h1 id="_3-1-nginx\u5168\u5C40\u5757\u548Cevents\u5757\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_3-1-nginx\u5168\u5C40\u5757\u548Cevents\u5757\u914D\u7F6E" aria-hidden="true">#</a> 3.1 nginx\u5168\u5C40\u5757\u548Cevents\u5757\u914D\u7F6E</h1><h2 id="_1-example" tabindex="-1"><a class="header-anchor" href="#_1-example" aria-hidden="true">#</a> 1 example</h2><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token comment"># \u8FD0\u884CNginx\u8FDB\u7A0B\u7684\u7528\u6237</span>
<span class="token directive"><span class="token keyword">user</span> nginx</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">worker_processes</span>  <span class="token number">8</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">worker_cpu_affinity</span> auto</span><span class="token punctuation">;</span>

<span class="token comment"># \u5B9A\u4E49\u5B58\u50A8\u67D0\u7C7B\u578B\u7684\u5168\u5C40\u9519\u8BEF\u7684\u65E5\u5FD7\u4F4D\u7F6E</span>
<span class="token comment"># nginx\u65E5\u5FD7\u5206\u4E3A\u5F88\u591A\u7EA7\u522B [debug | info | notice | warn | error | crit | alert | emerg]</span>
<span class="token directive"><span class="token keyword">error_log</span>  /var/log/nginx/error.log  error</span><span class="token punctuation">;</span>
<span class="token comment"># \u6307\u5B9A\u8FDB\u7A0BID\uFF08pid\uFF09\u5B58\u653E\u7684\u8DEF\u5F84 </span>
<span class="token directive"><span class="token keyword">pid</span>        /var/run/nginx.pid</span><span class="token punctuation">;</span>
<span class="token comment"># \u4E00\u4E2Anginx\u8FDB\u7A0B\u6253\u5F00\u7684\u6700\u591A\u6587\u4EF6\u63CF\u8FF0\u7B26\u6570\u76EE\uFF0C\u7406\u8BBA\u503C\u5E94\u8BE5\u662F\u7CFB\u7EDF\u7684\u6700\u591A\u6253\u5F00\u6587\u4EF6\u6570\uFF08ulimit -n\uFF09\u4E0Enginx\u8FDB\u7A0B\u6570\u76F8\u9664\uFF0C\u4F46\u662Fnginx\u5206\u914D\u8BF7\u6C42\u5E76\u4E0D\u662F\u90A3\u4E48\u5747\u5300\uFF0C\u6240\u4EE5\u6700\u597D\u4E0Eulimit -n\u7684\u503C\u4FDD\u6301\u4E00\u81F4\u3002</span>
<span class="token directive"><span class="token keyword">worker_rlimit_nofile</span> <span class="token number">65535</span></span><span class="token punctuation">;</span>

<span class="token directive"><span class="token keyword">events</span></span> <span class="token punctuation">{</span>
    <span class="token comment"># \u4F7F\u7528epoll\u7684I/O\u6A21\u578B\uFF0C\u7528\u8FD9\u4E2A\u6A21\u578B\u6765\u9AD8\u6548\u5904\u7406\u5F02\u6B65\u4E8B\u4EF6</span>
    <span class="token directive"><span class="token keyword">use</span> epoll</span><span class="token punctuation">;</span>
    <span class="token comment"># \u6BCF\u4E2A\u8FDB\u7A0B\u5141\u8BB8\u7684\u6700\u591A\u8FDE\u63A5\u6570\uFF0C\u7406\u8BBA\u4E0A\u6BCF\u53F0nginx\u670D\u52A1\u5668\u7684\u6700\u5927\u8FDE\u63A5\u6570\u4E3Aworker_processes*worker_connections\u3002</span>
    <span class="token directive"><span class="token keyword">worker_connections</span>  <span class="token number">20480</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="_2-\u914D\u7F6Ecpu\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#_2-\u914D\u7F6Ecpu\u53C2\u6570" aria-hidden="true">#</a> 2 \u914D\u7F6ECPU\u53C2\u6570</h2><p>Nginx\u9ED8\u8BA4\u6CA1\u6709\u5F00\u542F\u5229\u7528\u591A\u6838cpu\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u589E\u52A0worker_cpu_affinity\u914D\u7F6E\u53C2\u6570\u6765\u5145\u5206\u5229\u7528\u591A\u6838cpu\u7684\u6027\u80FD\u3002cpu\u662F\u4EFB\u52A1\u5904\u7406\uFF0C\u8BA1\u7B97\u6700\u5173\u952E\u7684\u8D44\u6E90\uFF0Ccpu\u6838\u8D8A\u591A\uFF0C\u6027\u80FD\u5C31\u8D8A\u597D\u3002</p><h3 id="_2-1-nginx-worker-processes" tabindex="-1"><a class="header-anchor" href="#_2-1-nginx-worker-processes" aria-hidden="true">#</a> 2.1 nginx worker_processes</h3><p>worker_processes\u6700\u591A\u5F00\u542F8\u4E2A\uFF0C8\u4E2A\u4EE5\u4E0A\u6027\u80FD\u5C31\u4E0D\u4F1A\u518D\u63D0\u5347\u4E86\uFF0C\u800C\u4E14\u7A33\u5B9A\u6027\u4F1A\u53D8\u7684\u66F4\u4F4E\uFF0C\u56E0\u6B648\u4E2A\u8FDB\u7A0B\u591F\u7528\u4E86\uFF1B</p><h3 id="_2-2-nginx-worker-cpu-affinity" tabindex="-1"><a class="header-anchor" href="#_2-2-nginx-worker-cpu-affinity" aria-hidden="true">#</a> 2.2 nginx worker_cpu_affinity</h3><p>cpu\u6709\u591A\u5C11\u4E2A\u6838\uFF1F\u5C31\u6709\u51E0\u4F4D\u6570\uFF0C1\u4EE3\u8868\u5185\u6838\u5F00\u542F\uFF0C0\u4EE3\u8868\u5185\u6838\u5173\u95ED\uFF1B</p><p>\u4F8B\u5982\uFF1A\u6211\u6709\u4E00\u4E2A\u670D\u52A1\u5668\u662F\u6700\u4F4E\u914D\uFF0C8\u6838CPU\uFF0Cnginx\u914D\u7F6E\u4FE1\u606F\u5219\u5982\u4E0B\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">worker_processes</span> <span class="token number">8</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">worker_cpu_affinity</span> <span class="token number">00000001</span> <span class="token number">00000010</span> <span class="token number">00000100</span> <span class="token number">00001000</span> <span class="token number">00010000</span> <span class="token number">00100000</span> <span class="token number">01000000</span> <span class="token number">10000000</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u4E0A\u9762\u7684\u914D\u7F6E\u8868\u793A\uFF1A8\u6838CPU\uFF0C\u5F00\u542F8\u4E2A\u8FDB\u7A0B\u3002</p><blockquote><p>\u6211\u5176\u5B9E\u628A<code>nginx worker_cpu_affinity</code>\u53C2\u6570\u901A\u5E38\u8BBE\u7F6E\u4E3A<code>auto</code></p></blockquote><h3 id="_2-3-\u5B9E\u4F8B" tabindex="-1"><a class="header-anchor" href="#_2-3-\u5B9E\u4F8B" aria-hidden="true">#</a> 2.3 \u5B9E\u4F8B</h3><p><strong>2\u6838CPU\uFF0C\u5F00\u542F2\u4E2A\u8FDB\u7A0B</strong></p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">worker_processes</span> <span class="token number">2</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">worker_cpu_affinity</span> <span class="token number">01</span> <span class="token number">10</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>2\u6838CPU\uFF0C\u5F00\u542F4\u8FDB\u7A0B</strong></p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">worker_processes</span> <span class="token number">4</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">worker_cpu_affinity</span> <span class="token number">01</span> <span class="token number">10</span> <span class="token number">01</span> <span class="token number">10</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>2\u6838CPU\uFF0C\u5F00\u542F8\u8FDB\u7A0B</strong></p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">worker_processes</span> <span class="token number">8</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">worker_cpu_affinity</span> <span class="token number">01</span> <span class="token number">10</span> <span class="token number">01</span> <span class="token number">10</span> <span class="token number">01</span> <span class="token number">10</span> <span class="token number">01</span> <span class="token number">10</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>8\u6838CPU\uFF0C\u5F00\u542F2\u8FDB\u7A0B</strong></p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">worker_processes</span> <span class="token number">2</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">worker_cpu_affinity</span> <span class="token number">10101010</span> <span class="token number">01010101</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>10101010\u8868\u793A\u5F00\u542F\u4E86\u7B2C2,4,6,8\u5185\u6838\uFF0C01010101\u8868\u793A\u5F00\u59CB\u4E861,3,5,7\u5185\u6838\uFF1B</p><p>\u5982\u679C\u591A\u4E2ACPU\u5185\u6838\u7684\u5229\u7528\u7387\u90FD\u76F8\u5DEE\u4E0D\u591A\uFF0C\u8BC1\u660Enginx\u5DF1\u7ECF\u6210\u529F\u7684\u5229\u7528\u4E86\u591A\u6838CPU\u3002</p><p>\u6D4B\u8BD5\u7ED3\u675F\u540E\uFF0CCPU\u5185\u6838\u7684\u8D1F\u8F7D\u5E94\u8BE5\u90FD\u540C\u65F6\u964D\u4F4E\u3002</p></blockquote>`,23);function p(r,c){return e}var i=n(a,[["render",p],["__file","global-events.html.vue"]]);export{i as default};
