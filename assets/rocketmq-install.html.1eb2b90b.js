import{_ as s,e as a}from"./app.ab95b9c4.js";const n={},e=a(`<h1 id="rocketmq\u96C6\u7FA4\u7684\u642D\u5EFA" tabindex="-1"><a class="header-anchor" href="#rocketmq\u96C6\u7FA4\u7684\u642D\u5EFA" aria-hidden="true">#</a> rocketmq\u96C6\u7FA4\u7684\u642D\u5EFA</h1><p>\u73AF\u5883</p><ul><li>JDK1.8</li><li>maven3.6.0</li><li>centos7.6\u4E3B\u673A\u4E24\u53F0</li></ul><h2 id="\u4E0B\u8F7D\u89E3\u538B" tabindex="-1"><a class="header-anchor" href="#\u4E0B\u8F7D\u89E3\u538B" aria-hidden="true">#</a> \u4E0B\u8F7D\u89E3\u538B</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">wget</span> https://mirrors.tuna.tsinghua.edu.cn/apache/rocketmq/4.6.0/rocketmq-all-4.6.0-bin-release.zip
<span class="token function">unzip</span> rocketmq-all-4.6.0-bin-release.zip
<span class="token function">mv</span> rocketmq-all-4.6.0-bin-release /usr/local/rocketmq
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a> \u4FEE\u6539\u914D\u7F6E\u6587\u4EF6</h2><p>rocketmq\u9ED8\u8BA4\u7ED9\u51FA\u4E86\u4E09\u79CD\u5EFA\u8BAE\u914D\u7F6E\u6A21\u5F0F 2m-2s-async(\u4E3B\u4ECE\u5F02\u6B65),----\u672C\u6587\u91C7\u7528\u8FD9\u79CD 2m-2s-sync(\u4E3B\u4ECE\u540C\u6B65) 2m-noslave(\u4EC5master)</p><ol><li>\u5BF9\u4E3B\u673A\u4E00\uFF08192.168.163.196\uFF09\u8FDB\u884C\u64CD\u4F5C</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /usr/local/rocketmq/conf/2m-2s-async
<span class="token function">vim</span> broker-a.properties
<span class="token comment"># \u5411\u914D\u7F6E\u6587\u4EF6\u4E2D\u8FFD\u52A0\u5982\u4E0B\u5185\u5BB9</span>
<span class="token assign-left variable">namesrvAddr</span><span class="token operator">=</span><span class="token number">192.168</span>.163.196:9876<span class="token punctuation">;</span><span class="token number">192.168</span>.163.197:9876
<span class="token assign-left variable">listenPort</span><span class="token operator">=</span><span class="token number">10911</span>
<span class="token assign-left variable">storePathRootDir</span><span class="token operator">=</span>/usr/local/rocketmq/master/store
<span class="token assign-left variable">storePathCommitLog</span><span class="token operator">=</span>/usr/local/rocketmq/master/store/commitlog
<span class="token assign-left variable">storePathConsumeQueue</span><span class="token operator">=</span>/usr/local/rocketmq/master/store/consumequeue
<span class="token assign-left variable">storePathIndex</span><span class="token operator">=</span>/usr/local/rocketmq/master/store/index
<span class="token assign-left variable">storeCheckpoint</span><span class="token operator">=</span>/usr/local/rocketmq/master/store/checkpoint
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> broker-b-s.properties
<span class="token comment"># \u5411\u914D\u7F6E\u6587\u4EF6\u4E2D\u8FFD\u52A0\u5982\u4E0B\u5185\u5BB9</span>
<span class="token assign-left variable">namesrvAddr</span><span class="token operator">=</span><span class="token number">192.168</span>.163.196:9876<span class="token punctuation">;</span><span class="token number">192.168</span>.163.197:9876
<span class="token assign-left variable">listenPort</span><span class="token operator">=</span><span class="token number">20911</span>
<span class="token assign-left variable">storePathRootDir</span><span class="token operator">=</span>/usr/local/rocketmq/slave/store
<span class="token assign-left variable">storePathCommitLog</span><span class="token operator">=</span>/usr/local/rocketmq/slave/store/commitlog
<span class="token assign-left variable">storePathConsumeQueue</span><span class="token operator">=</span>/usr/local/rocketmq/slave/store/consumequeue
<span class="token assign-left variable">storePathIndex</span><span class="token operator">=</span>/usr/local/rocketmq/slave/store/index
<span class="token assign-left variable">storeCheckpoint</span><span class="token operator">=</span>/usr/local/rocketmq/slave/store/checkpoint
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ol start="2"><li>\u5BF9\u4E3B\u673A\u4E8C\uFF08192.168.163.197\uFF09\u8FDB\u884C\u64CD\u4F5C</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /usr/local/rocketmq/conf/2m-2s-async
<span class="token function">vim</span> broker-b.properties
<span class="token comment"># \u5411\u914D\u7F6E\u6587\u4EF6\u4E2D\u8FFD\u52A0\u5982\u4E0B\u5185\u5BB9</span>
<span class="token assign-left variable">namesrvAddr</span><span class="token operator">=</span><span class="token number">192.168</span>.163.196:9876<span class="token punctuation">;</span><span class="token number">192.168</span>.163.197:9876
<span class="token assign-left variable">listenPort</span><span class="token operator">=</span><span class="token number">10911</span>
<span class="token assign-left variable">storePathRootDir</span><span class="token operator">=</span>/usr/local/rocketmq/master/store
<span class="token assign-left variable">storePathCommitLog</span><span class="token operator">=</span>/usr/local/rocketmq/master/store/commitlog
<span class="token assign-left variable">storePathConsumeQueue</span><span class="token operator">=</span>/usr/local/rocketmq/master/store/consumequeue
<span class="token assign-left variable">storePathIndex</span><span class="token operator">=</span>/usr/local/rocketmq/master/store/index
<span class="token assign-left variable">storeCheckpoint</span><span class="token operator">=</span>/usr/local/rocketmq/master/store/checkpoint
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> broker-a-s.properties
<span class="token comment"># \u5411\u914D\u7F6E\u6587\u4EF6\u4E2D\u8FFD\u52A0\u5982\u4E0B\u5185\u5BB9</span>
<span class="token assign-left variable">namesrvAddr</span><span class="token operator">=</span><span class="token number">192.168</span>.163.196:9876<span class="token punctuation">;</span><span class="token number">192.168</span>.163.197:9876
<span class="token assign-left variable">listenPort</span><span class="token operator">=</span><span class="token number">20911</span>
<span class="token assign-left variable">storePathRootDir</span><span class="token operator">=</span>/usr/local/rocketmq/slave/store
<span class="token assign-left variable">storePathCommitLog</span><span class="token operator">=</span>/usr/local/rocketmq/slave/store/commitlog
<span class="token assign-left variable">storePathConsumeQueue</span><span class="token operator">=</span>/usr/local/rocketmq/slave/store/consumequeue
<span class="token assign-left variable">storePathIndex</span><span class="token operator">=</span>/usr/local/rocketmq/slave/store/index
<span class="token assign-left variable">storeCheckpoint</span><span class="token operator">=</span>/usr/local/rocketmq/slave/store/checkpoint
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ol start="3"><li>\u8BBE\u7F6ERocketmq\u8FD0\u884C\u65F6\u7684JVM\u5185\u5B58</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /usr/local/rocketmq/bin
<span class="token function">vim</span> runbroker.sh
<span class="token comment">#JAVA_OPT=&quot;\${JAVA_OPT} -server -Xms8g -Xmx8g -Xmn4g&quot;</span>
<span class="token comment">#\u6539\u6210\uFF1A</span>
<span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${JAVA_OPT}</span> -server -Xms512m -Xmx512m -Xmn256m&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> runserver.sh 
<span class="token comment"># JAVA_OPT=&quot;\${JAVA_OPT} -server -Xms4g -Xmx4g -Xmn2g -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m&quot;</span>
<span class="token comment"># \u6539\u6210</span>
<span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${JAVA_OPT}</span> -server -Xms512m -Xmx512m -Xmn256m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="\u542F\u52A8rocketmq" tabindex="-1"><a class="header-anchor" href="#\u542F\u52A8rocketmq" aria-hidden="true">#</a> \u542F\u52A8Rocketmq</h2><ol><li>\u4E3B\u673A\u4E00\u4E0A\u64CD\u4F5C</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>nohup sh mqnamesrv &amp;
nohup sh mqbroker -c ../conf/2m-2s-async/broker-a.properties &amp;
nohup sh mqbroker -c ../conf/2m-2s-async/broker-b-s.properties &amp;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="2"><li>\u4E3B\u673A\u4E8C\u4E0A\u64CD\u4F5C</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">nohup</span> <span class="token function">sh</span> mqnamesrv <span class="token operator">&amp;</span>
<span class="token function">nohup</span> <span class="token function">sh</span> mqbroker -c <span class="token punctuation">..</span>/conf/2m-2s-async/broker-a-s.properties <span class="token operator">&amp;</span>
<span class="token function">nohup</span>  <span class="token function">sh</span> mqbroker -c <span class="token punctuation">..</span>/conf/2m-2s-async/broker-b.properties <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="\u642D\u5EFAconsole\u53EF\u89C6\u5316\u63A7\u5236\u53F0" tabindex="-1"><a class="header-anchor" href="#\u642D\u5EFAconsole\u53EF\u89C6\u5316\u63A7\u5236\u53F0" aria-hidden="true">#</a> \u642D\u5EFAConsole\u53EF\u89C6\u5316\u63A7\u5236\u53F0</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/apache/rocketmq-externals.git
<span class="token builtin class-name">cd</span> rocketmq-externals/rocketmq-console/
<span class="token function">vim</span> src/main/resources/application.properties
<span class="token comment"># \u6DFB\u52A0\u4E24\u4E2Anamesvr\u7684\u4E3B\u673Aip</span>
rocketmq.config.namesrvAddr<span class="token operator">=</span><span class="token number">192.168</span>.163.196:9876<span class="token punctuation">;</span><span class="token number">192.168</span>.163.197:9876
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u6253\u5305</span>
 mvn clean package -Dmaven.test.skip<span class="token operator">=</span>true
 <span class="token function">scp</span> target/rocketmq-console-ng-1.0.1.jar <span class="token number">192.168</span>.163.196:/home/ncar/service/webapps
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u542F\u52A8jar\u5305\uFF0C\u5728\u4E3B\u673A\u4E00\uFF08192.168.163.196\uFF09\u4E0A</span>
 <span class="token function">nohup</span> java -jar rocketmq-console-ng-1.0.1.jar <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u6253\u5F00\u63A7\u5236\u53F0\u67E5\u770B\u96C6\u7FA4\u542F\u52A8\u72B6\u6001</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>http://192.168.163.196:8080/#/cluster
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="\u5173\u95ED\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#\u5173\u95ED\u547D\u4EE4" aria-hidden="true">#</a> \u5173\u95ED\u547D\u4EE4</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sh bin/mqshutdown broker
sh bin/mqshutdown namesrv
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,29);function r(l,p){return e}var t=s(n,[["render",r],["__file","rocketmq-install.html.vue"]]);export{t as default};
