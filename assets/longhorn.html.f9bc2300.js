import{_ as l,r,c as o,a as n,b as e,F as t,e as c,d as s,o as i}from"./app.a7ee6068.js";const p={},h=c(`<h1 id="longorn-\u5B89\u88C5\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#longorn-\u5B89\u88C5\u914D\u7F6E" aria-hidden="true">#</a> Longorn \u5B89\u88C5\u914D\u7F6E</h1><h2 id="\u5B89\u88C5\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5\u914D\u7F6E" aria-hidden="true">#</a> \u5B89\u88C5\u914D\u7F6E</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u68C0\u67E5\u76F8\u5173\u4F9D\u8D56\uFF0C\u5982\u679C\u6CA1\u6709\uFF0C\u5B89\u88C5\u5B98\u65B9\u6587\u6863\u8FDB\u884C\u5B89\u88C5</span>
<span class="token function">curl</span> -sSfL https://raw.githubusercontent.com/longhorn/longhorn/v1.3.0/scripts/environment_check.sh <span class="token operator">|</span> <span class="token function">bash</span>
<span class="token comment"># helm \u5B89\u88C5</span>
helm repo <span class="token function">add</span> longhorn https://charts.longhorn.io
helm pull longhorn/longhorn --version <span class="token number">1.3</span>.0
<span class="token function">tar</span> -xvf longhorn-1.3.0.tgz
<span class="token builtin class-name">cd</span> longhorn/
helm <span class="token function">install</span> longhorn --namespace longhorn-system --create-namespace ./
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="\u529F\u80FD\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#\u529F\u80FD\u6D4B\u8BD5" aria-hidden="true">#</a> \u529F\u80FD\u6D4B\u8BD5</h2><h3 id="\u5907\u4EFD\u6062\u590D" tabindex="-1"><a class="header-anchor" href="#\u5907\u4EFD\u6062\u590D" aria-hidden="true">#</a> \u5907\u4EFD\u6062\u590D</h3><p>\u901A\u8FC7 Longhorn UI \u8FDB\u884C\u914D\u7F6E\uFF0C\u6211\u8FD9\u91CC\u4F7F\u7528 \u817E\u8BAF\u4E91\u7684 COS \u8FDB\u884C\u5907\u4EFD</p><p>\u9996\u5148\u8981 \u5728 rancher \u4E0A\u914D\u7F6E secret</p><p><img src="https://clay-blog.oss-cn-shanghai.aliyuncs.com/img/image-20220923155113113.png" alt="image-20220923155113113" loading="lazy"></p><p>\u7136\u540E\u5728 longhorn UI \u7684 settings \u9875\u9762\u914D\u7F6E Backup Target</p><p><img src="https://clay-blog.oss-cn-shanghai.aliyuncs.com/img/image-20220923155225931.png" alt="image-20220923155225931" loading="lazy"></p><blockquote><p>\u26A0\uFE0F \u6CE8\u610F\u683C\u5F0F\uFF0C\u53CA\u5F97\u5728 COS \u4E0A\u63D0\u524D\u521B\u5EFA\u597D\u76EE\u5F55</p></blockquote><p>\u6821\u9A8C\u662F\u5426\u521B\u5EFA\u6210\u529F</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubectl -n longhorn-system get backuptargets.longhorn.io
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="\u5176\u4ED6\u529F\u80FD" tabindex="-1"><a class="header-anchor" href="#\u5176\u4ED6\u529F\u80FD" aria-hidden="true">#</a> \u5176\u4ED6\u529F\u80FD</h3><p>\u521B\u5EFA\u5E94\u7528\u6D4B\u8BD5\uFF0C\u53C2\u8003\u4E0B\u65B9\u94FE\u63A5\u8FDB\u884C\u6D4B\u8BD5</p><ul><li><p>ReadWriteMany</p></li><li><p>CSI \u5377\u5FEB\u7167</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/kubernetes-csi/external-snapshotter
<span class="token comment"># \u6839\u636E\u652F\u6301\u7684 k8s \u517C\u5BB9\u7248\u672C\u8FDB\u884C apply</span>
<span class="token builtin class-name">cd</span> external-snapshotter <span class="token operator">&amp;&amp;</span> <span class="token function">git</span> checkout v4.0.1
kubectl apply -f client/config/crd/
<span class="token comment"># \u955C\u50CF\u62C9\u4E0D\u5230\u53EF\u4EE5\u627E\u4E2Adockerhub, liangjw/snapshot-controller:v4.0.0</span>
kubectl apply -f deploy/kubernetes/snapshot-controller/
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li><li><p>CSI \u5377\u6062\u590D</p></li><li><p>CSI \u5377\u514B\u9686</p><p>\u8981\u6C42\u6269\u5C55\u7684\u5377\u5FC5\u987B\u5904\u4E8E <code>detached</code> \u72B6\u6001\u624D\u80FD\u64CD\u4F5C</p></li></ul><p>\u53C2\u8003\u94FE\u63A5\uFF1A</p>`,17),d=n("li",null,"https://longhorn.io/docs/1.3.1/deploy/install/install-with-rancher/",-1),b=n("li",null,"https://longhorn.io/docs/1.3.1/deploy/install/install-with-helm/",-1),u={href:"https://kube100.com/d/6",target:"_blank",rel:"noopener noreferrer"},m=s("\u4E91\u539F\u751F\u5206\u5E03\u5F0F\u5757\u5B58\u50A8 Longhorn \u521D\u4F53\u9A8C"),g={href:"https://mp.weixin.qq.com/s?__biz=MzU4MjQ0MTU4Ng==&mid=2247497465&idx=1&sn=0cd268d145f622b7fb5b35fa88d0abb4&chksm=fdbaf9e4cacd70f2eb0695f565d10875d90f0b9857da3734a385a73579f97aeb8a0575a93958&mpshare=1&scene=1&srcid=07214JQqcaJXHvh6PJfXlFkc&sharer_sharetime=1658397389879&sharer_shareid=35faa6bb6d10f874cf6f57390f055300&version=4.0.0.70098&platform=mac#rd",target:"_blank",rel:"noopener noreferrer"},f=s("Longhorn \u9AD8\u7EA7\u4F7F\u7528\u4E4B\u5907\u4EFD\u6062\u590D\u4E0E ReadWriteMany"),k={href:"https://kube100.com/d/9",target:"_blank",rel:"noopener noreferrer"},_=s("\u901A\u8FC7 Kubernetes CSI \u5B9E\u73B0 Longhorn \u5377\u5FEB\u7167\u5907\u4EFD\u3001\u6062\u590D\u3001\u514B\u9686\u4E0E\u6269\u5BB9\u64CD\u4F5C");function v(x,y){const a=r("ExternalLinkIcon");return i(),o(t,null,[h,n("ul",null,[d,b,n("li",null,[n("a",u,[m,e(a)])]),n("li",null,[n("a",g,[f,e(a)])]),n("li",null,[n("a",k,[_,e(a)])])])],64)}var L=l(p,[["render",v],["__file","longhorn.html.vue"]]);export{L as default};
