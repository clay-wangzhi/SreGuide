import{_ as r,r as t,c as l,a as n,b as a,F as i,d as e,e as p,o}from"./app.35f12498.js";const u={},c=n("h1",{id:"_4-6-\u6D41\u6C34\u7EBF\u5F00\u53D1\u5DE5\u5177",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_4-6-\u6D41\u6C34\u7EBF\u5F00\u53D1\u5DE5\u5177","aria-hidden":"true"},"#"),e(" 4.6 \u6D41\u6C34\u7EBF\u5F00\u53D1\u5DE5\u5177")],-1),b=e("\u8F6C\u8F7D\u81EA\uFF1A"),d={href:"http://docs.idevops.site/jenkins/pipelinesyntax/chapter05/",target:"_blank",rel:"noopener noreferrer"},m=e("\u6D41\u6C34\u7EBF\u5F00\u53D1\u5DE5\u5177 | \u6CFD\u9633"),h=n("p",null,"\u60A8\u597D\uFF0C\u672C\u6A21\u5757\u4E3B\u8981\u4E86\u89E3\u5728\u6D41\u6C34\u7EBF\u4E2D\u5E38\u7528\u7684\u65B9\u6CD5\u{1F600}",-1),g=n("hr",null,null,-1),x=n("h2",{id:"\u7247\u6BB5\u751F\u6210\u5668",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u7247\u6BB5\u751F\u6210\u5668","aria-hidden":"true"},"#"),e(" \u7247\u6BB5\u751F\u6210\u5668")],-1),_=n("p",null,"\u4F7F\u7528\u7247\u6BB5\u751F\u6210\u5668\u53EF\u4EE5\u6839\u636E\u4E2A\u4EBA\u9700\u8981\u751F\u6210\u65B9\u6CD5\uFF0C\u6709\u4E9B\u65B9\u6CD5\u6765\u6E90\u4E8E\u63D2\u4EF6\uFF0C\u5219\u9700\u8981\u5148\u5B89\u88C5\u76F8\u5173\u7684\u63D2\u4EF6\u624D\u80FD\u4F7F\u7528\u54E6\u3002",-1),v={href:"http://docs.idevops.site/jenkins/pipelinesyntax/chapter05/images/01.png",target:"_blank",rel:"noopener noreferrer"},q=n("img",{src:"http://docs.idevops.site/jenkins/pipelinesyntax/chapter05/images/01.png",alt:"images",loading:"lazy"},null,-1),f=e("\u586B\u5199\u597D\u53C2\u6570\u540E\uFF0C\u70B9\u51FB\u751F\u6210\uFF0C\u7136\u540E\u590D\u5236\u7C98\u8D34\u5230Jenkinsfile"),k={href:"http://docs.idevops.site/jenkins/pipelinesyntax/chapter05/images/02.png",target:"_blank",rel:"noopener noreferrer"},I=n("img",{src:"http://docs.idevops.site/jenkins/pipelinesyntax/chapter05/images/02.png",alt:"images",loading:"lazy"},null,-1),y=n("h2",{id:"\u58F0\u660E\u5F0F\u8BED\u6CD5\u751F\u6210\u5668",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u58F0\u660E\u5F0F\u8BED\u6CD5\u751F\u6210\u5668","aria-hidden":"true"},"#"),e(" \u58F0\u660E\u5F0F\u8BED\u6CD5\u751F\u6210\u5668")],-1),N={href:"http://docs.idevops.site/jenkins/pipelinesyntax/chapter05/images/03.png",target:"_blank",rel:"noopener noreferrer"},U=n("img",{src:"http://docs.idevops.site/jenkins/pipelinesyntax/chapter05/images/03.png",alt:"images",loading:"lazy"},null,-1),C=n("h2",{id:"\u5168\u5C40\u53D8\u91CF\u53C2\u8003",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5168\u5C40\u53D8\u91CF\u53C2\u8003","aria-hidden":"true"},"#"),e(" \u5168\u5C40\u53D8\u91CF\u53C2\u8003")],-1),E={href:"http://docs.idevops.site/jenkins/pipelinesyntax/chapter05/images/04.png",target:"_blank",rel:"noopener noreferrer"},L=n("img",{src:"http://docs.idevops.site/jenkins/pipelinesyntax/chapter05/images/04.png",alt:"images",loading:"lazy"},null,-1),S=p(`<h3 id="env\u53D8\u91CF" tabindex="-1"><a class="header-anchor" href="#env\u53D8\u91CF" aria-hidden="true">#</a> env\u53D8\u91CF</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>BUILD_NUMBER          //\u6784\u5EFA\u53F7
BUILD_ID              //\u6784\u5EFA\u53F7
BUILD_DISPLAY_NAME    //\u6784\u5EFA\u663E\u793A\u540D\u79F0
JOB_NAME              //\u9879\u76EE\u540D\u79F0
              
EXECUTOR_NUMBER       //\u6267\u884C\u5668\u6570\u91CF
NODE_NAME             //\u6784\u5EFA\u8282\u70B9\u540D\u79F0
WORKSPACE             //\u5DE5\u4F5C\u76EE\u5F55
JENKINS_HOME          //Jenkins home
JENKINS_URL           //Jenkins\u5730\u5740
BUILD_URL             //\u6784\u5EFA\u5730\u5740
JOB_URL               //\u9879\u76EE\u5730\u5740
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="currentbuild\u53D8\u91CF" tabindex="-1"><a class="header-anchor" href="#currentbuild\u53D8\u91CF" aria-hidden="true">#</a> currentbuild\u53D8\u91CF</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>result  currentResult   //\u6784\u5EFA\u7ED3\u679C
displayName      //\u6784\u5EFA\u540D\u79F0  #111
description      //\u6784\u5EFA\u63CF\u8FF0
duration         //\u6301\u7EED\u65F6\u95F4
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="\u5E38\u7528\u7684\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u5E38\u7528\u7684\u65B9\u6CD5" aria-hidden="true">#</a> \u5E38\u7528\u7684\u65B9\u6CD5</h2><p><strong>json\u6570\u636E\u5904\u7406</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>def response = readJSON text: &quot;\${scanResult}&quot;
println(scanResult)

//\u539F\u751F\u65B9\u6CD5
import groovy.json.*

@NonCPS
def GetJson(text){
    def prettyJson = JsonOutput.prettyPrint(text) 
    new JsonSlurperClassic().parseText(prettyJson)
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>\u4F7F\u7528\u51ED\u636E</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>withCredentials([string(credentialsId: &quot;xxxxx&quot;, variable: &quot;sonarToken&quot;)]) {
    println(sonarToken)
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>\u4E0B\u8F7D\u4EE3\u7801</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>//Git
checkout([$class: &#39;GitSCM&#39;, branches: [[name: &quot;brnachName&quot;]], 
            doGenerateSubmoduleConfigurations: false, 
            extensions: [], submoduleCfg: [], 
            userRemoteConfigs: [[credentialsId: &quot;\${credentialsId}&quot;, 
            url: &quot;\${srcUrl}&quot;]]])
//Svn
checkout([$class: &#39;SubversionSCM&#39;, additionalCredentials: [], 
            filterChangelog: false, ignoreDirPropChanges: false, 
            locations: [[credentialsId: &quot;\${credentialsId}&quot;, 
            depthOption: &#39;infinity&#39;, ignoreExternalsOption: true, 
            remote: &quot;\${svnUrl}&quot;]], workspaceUpdater: [$class: &#39;CheckoutUpdater&#39;]]
)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>\u5C55\u793A\u62A5\u544A</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>publishHTML([allowMissing: false, 
        alwaysLinkToLastBuild: false, 
        keepAll: true, 
        reportDir: &#39;./report/&#39;, 
        reportFiles: &quot;a.html, b.html&quot;, 
        reportName: &#39;InterfaceTestReport&#39;, 
        reportTitles: &#39;HTML&#39;])
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>\u4EA4\u4E92\u8F93\u5165</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>def result = input  message: &#39;\u9009\u62E9xxxxx&#39;, 
                    ok: &#39;\u63D0\u4EA4&#39;,
                    parameters: [extendedChoice( description: &#39;xxxxx&#39;, 
                                                descriptionPropertyValue: &#39;&#39;, 
                                                multiSelectDelimiter: &#39;,&#39;, 
                                                name: &#39;failePositiveCases&#39;, 
                                                quoteValue: false, 
                                                saveJSONParameterToFile: false, 
                                                type: &#39;PT_CHECKBOX&#39;, 
                                                value: &quot;1,2,3&quot;, 
                                                visibleItemCount: 99)]   
println(result)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>\u6784\u5EFA\u7528\u6237</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>wrap([$class: &#39;BuildUser&#39;]){
            echo &quot;full name is $BUILD_USER&quot;
            echo &quot;user id is $BUILD_USER_ID&quot;
            echo &quot;user email is $BUILD_USER_EMAIL&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>\u5236\u54C1\u4E0A\u4F20</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>rtUpload (
        serverId: &quot;artifactory01&quot;,
        spec:
            &quot;&quot;&quot;{
            &quot;files&quot;: [
                {
                &quot;pattern&quot;: &quot;report/a.html&quot;,
                &quot;target&quot;: &quot;\${repoName}/a/b/v&quot;
                }
            ]
            }&quot;&quot;&quot;
    )
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>\u53D1\u9001http\u8BF7\u6C42</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ApiUrl = &quot;http://xxxxxx/api/project_branches/list?project=\${projectName}&quot;
Result = httpRequest authentication: &#39;xxxxxxxxx&#39;,
                         quiet: true, 
                         contentType: &#39;APPLICATION_JSON&#39; ,  
                         url: &quot;\${ApiUrl}&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div>`,21);function B(R,D){const s=t("ExternalLinkIcon");return o(),l(i,null,[c,n("blockquote",null,[n("p",null,[b,n("a",d,[m,a(s)])])]),h,g,x,_,n("p",null,[n("a",v,[q,a(s)])]),n("p",null,[f,n("a",k,[I,a(s)])]),y,n("p",null,[n("a",N,[U,a(s)])]),C,n("p",null,[n("a",E,[L,a(s)])]),S],64)}var T=r(u,[["render",B],["__file","pipeline-dev-tools.html.vue"]]);export{T as default};
