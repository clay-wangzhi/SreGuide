import{_ as t,r as l,c as r,a as s,b as a,F as i,d as e,e as p,o}from"./app.a7ee6068.js";const c={},u=s("h1",{id:"_6-2-python-\u7684-setup-py-\u8BE6\u89E3",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_6-2-python-\u7684-setup-py-\u8BE6\u89E3","aria-hidden":"true"},"#"),e(" 6.2 Python \u7684 setup.py \u8BE6\u89E3")],-1),d=e("\u8F6C\u8F7D\u81EA\uFF1A"),b={href:"https://zhuanlan.zhihu.com/p/276461821",target:"_blank",rel:"noopener noreferrer"},m=e("\u82B1\u4E86\u4E24\u5929\uFF0C\u7EC8\u4E8E\u628A Python \u7684 setup.py \u7ED9\u6574\u660E\u767D\u4E86 | Python\u7F16\u7A0B\u65F6\u5149| \u77E5\u4E4E"),h=p(`<h2 id="_1-\u4E3A\u4EC0\u4E48\u9700\u8981\u5BF9\u9879\u76EE\u5206\u53D1\u6253\u5305" tabindex="-1"><a class="header-anchor" href="#_1-\u4E3A\u4EC0\u4E48\u9700\u8981\u5BF9\u9879\u76EE\u5206\u53D1\u6253\u5305" aria-hidden="true">#</a> 1. \u4E3A\u4EC0\u4E48\u9700\u8981\u5BF9\u9879\u76EE\u5206\u53D1\u6253\u5305\uFF1F</h2><p>\u5E73\u5E38\u6211\u4EEC\u4E60\u60EF\u4E86\u4F7F\u7528 pip \u6765\u5B89\u88C5\u4E00\u4E9B\u7B2C\u4E09\u65B9\u6A21\u5757\uFF0C\u8FD9\u4E2A\u5B89\u88C5\u8FC7\u7A0B\u4E4B\u6240\u4EE5\u7B80\u5355\uFF0C\u662F\u56E0\u4E3A\u6A21\u5757\u5F00\u53D1\u8005\u4E3A\u6211\u4EEC\u9ED8\u9ED8\u5730\u4E3A\u6211\u4EEC\u505A\u4E86\u6240\u6709\u7E41\u6742\u7684\u5DE5\u4F5C\uFF0C\u800C\u8FD9\u4E2A\u8FC7\u7A0B\u5C31\u662F <code>\u6253\u5305</code>\u3002</p><p>\u6253\u5305\uFF0C\u5C31\u662F\u5C06\u4F60\u7684\u6E90\u4EE3\u7801\u8FDB\u4E00\u6B65\u5C01\u88C5\uFF0C\u5E76\u4E14\u5C06\u6240\u6709\u7684\u9879\u76EE\u90E8\u7F72\u5DE5\u4F5C\u90FD\u4E8B\u5148\u5B89\u6392\u597D\uFF0C\u8FD9\u6837\u4F7F\u7528\u8005\u62FF\u5230\u540E\u5373\u88C5\u5373\u7528\uFF0C\u4E0D\u7528\u518D\u64CD\u5FC3\u5982\u4F55\u90E8\u7F72\u7684\u95EE\u9898\uFF08\u5982\u679C\u4F60\u4E0D\u60F3\u5BF9\u7167\u7740\u4E00\u5806\u90E8\u7F72\u6587\u6863\u624B\u5DE5\u64CD\u4F5C\u7684\u8BDD\uFF09\u3002</p><p>\u4E0D\u7BA1\u4F60\u662F\u5728\u5DE5\u4F5C\u4E2D\uFF0C\u8FD8\u662F\u4E1A\u4F59\u51C6\u5907\u81EA\u5DF1\u5199\u4E00\u4E2A\u53EF\u4EE5\u4E0A\u4F20\u5230 PyPI \u7684\u9879\u76EE\uFF0C\u4F60\u90FD\u8981\u5B66\u4F1A\u5982\u4F55\u6253\u5305\u4F60\u7684\u9879\u76EE\u3002</p><p>Python \u53D1\u5C55\u4E86\u8FD9\u4E48\u4E9B\u5E74\u4E86\uFF0C\u9879\u76EE\u6253\u5305\u5DE5\u5177\u4E5F\u5DF2\u7ECF\u5F88\u6210\u719F\u4E86\u3002\u4ED6\u4EEC\u90FD\u6709\u54EA\u4E9B\u5462\uFF1F</p><p>\u4F60\u53EF\u80FD\u542C\u8FC7 <code>disutils</code>\u3001 <code>distutils</code> \u3001<code>distutils2</code>\u3001<code>setuptools</code>\u7B49\u7B49\uFF0C\u597D\u50CF\u5F88\u719F\u6089\uFF0C\u5374\u53C8\u5F88\u964C\u751F\uFF0C\u4ED6\u4EEC\u90FD\u662F\u4EC0\u4E48\u5173\u7CFB\u5462\uFF1F</p><h2 id="_2-\u5305\u5206\u53D1\u7684\u59CB\u7956-distutils" tabindex="-1"><a class="header-anchor" href="#_2-\u5305\u5206\u53D1\u7684\u59CB\u7956-distutils" aria-hidden="true">#</a> 2. \u5305\u5206\u53D1\u7684\u59CB\u7956\uFF1Adistutils</h2><p><code>distutils</code> \u662F Python \u7684\u4E00\u4E2A\u6807\u51C6\u5E93\uFF0C\u4ECE\u547D\u540D\u4E0A\u5F88\u5BB9\u6613\u770B\u51FA\u5B83\u662F\u4E00\u4E2A\u5206\u53D1\uFF08distribute\uFF09\u5DE5\u5177\uFF08utlis\uFF09\uFF0C\u5B83\u662F Python \u5B98\u65B9\u5F00\u53D1\u7684\u4E00\u4E2A\u5206\u53D1\u6253\u5305\u5DE5\u5177\uFF0C\u6240\u6709\u540E\u7EED\u7684\u6253\u5305\u5DE5\u5177\uFF0C\u5168\u90E8\u90FD\u662F\u57FA\u4E8E\u5B83\u8FDB\u884C\u5F00\u53D1\u7684\u3002</p><p><code>distutils</code> \u7684\u7CBE\u9AD3\u5728\u4E8E\u7F16\u5199 setup.py\uFF0C\u5B83\u662F\u6A21\u5757\u5206\u53D1\u4E0E\u5B89\u88C5\u7684\u6307\u5BFC\u6587\u4EF6\u3002</p><p>\u90A3\u4E48\u5982\u4F55\u7F16\u5199 setup.py \u5462\uFF1F\u8FD9\u91CC\u9762\u7684\u5185\u5BB9\u975E\u5E38\u591A\uFF0C\u6211\u4F1A\u5728\u540E\u9762\u8FDB\u884C\u8BE6\u7EC6\u7684\u89E3\u6790\uFF0C\u8BF7\u4F60\u8010\u5FC3\u5F80\u4E0B\u770B\u3002</p><p>\u4F60\u6709\u53EF\u80FD\u6CA1\u5199\u8FC7 setup.py \uFF0C\u4F46\u4F60\u7EDD\u5BF9\u4F7F\u7528\u8FC7 setup.py \u6765\u505A\u4E00\u4E9B\u4E8B\u60C5\uFF0C\u6BD4\u5982\u4E0B\u9762\u8FD9\u6761\u547D\u4EE4\uFF0C\u6211\u4EEC\u7ECF\u5E38\u7528\u5B83\u6765\u8FDB\u884C\u6A21\u5757\u7684\u5B89\u88C5\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ python setup.py install
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u8FD9\u6837\u7684\u5B89\u88C5\u65B9\u6CD5\u662F\u901A\u8FC7\u6E90\u7801\u5B89\u88C5\uFF0C\u4E0E\u4E4B\u5BF9\u5E94\u7684\u662F\u901A\u8FC7\u4E8C\u8FDB\u5236\u8F6F\u4EF6\u5305\u7684\u5B89\u88C5\uFF0C\u540C\u6837\u6211\u4E5F\u4F1A\u5728\u540E\u9762\u8FDB\u884C\u4ECB\u7ECD\u3002</p><h2 id="_3-\u5206\u53D1\u5DE5\u5177\u5347\u7EA7-setuptools" tabindex="-1"><a class="header-anchor" href="#_3-\u5206\u53D1\u5DE5\u5177\u5347\u7EA7-setuptools" aria-hidden="true">#</a> 3. \u5206\u53D1\u5DE5\u5177\u5347\u7EA7\uFF1Asetuptools</h2><p><code>setuptools</code> \u662F distutils \u589E\u5F3A\u7248\uFF0C\u4E0D\u5305\u62EC\u5728\u6807\u51C6\u5E93\u4E2D\u3002\u5176\u6269\u5C55\u4E86\u5F88\u591A\u529F\u80FD\uFF0C\u80FD\u591F\u5E2E\u52A9\u5F00\u53D1\u8005\u66F4\u597D\u7684\u521B\u5EFA\u548C\u5206\u53D1 Python \u5305\u3002\u5927\u90E8\u5206 Python \u7528\u6237\u90FD\u4F1A\u4F7F\u7528\u66F4\u5148\u8FDB\u7684 setuptools \u6A21\u5757\u3002</p><p><strong>distribute</strong>\uFF0C\u6216\u8BB8\u4F60\u5728\u5176\u4ED6\u5730\u65B9\u4E5F\u89C1\u8FC7\u5B83\uFF0C\u8FD9\u91CC\u4E5F\u63D0\u4E00\u4E0B\u3002</p><p>distribute \u662F setuptools \u6709\u4E00\u4E2A\u5206\u652F\u7248\u672C\uFF0C\u5206\u652F\u7684\u539F\u56E0\u53EF\u80FD\u662F\u6709\u4E00\u90E8\u5206\u5F00\u53D1\u8005\u8BA4\u4E3A setuptools \u5F00\u53D1\u592A\u6162\u4E86\u3002\u4F46\u73B0\u5728\uFF0Cdistribute \u53C8\u5408\u5E76\u56DE\u4E86 setuptools \u4E2D\u3002\u56E0\u6B64\uFF0C\u6211\u4EEC\u53EF\u4EE5\u8BA4\u4E3A\u5B83\u4EEC\u662F\u540C\u4E00\u4E2A\u4E1C\u897F\u3002</p><p>\u8FD8\u6709\u4E00\u4E2A\u5927\u5305\u5206\u53D1\u5DE5\u5177\u662F <strong>distutils2</strong>\uFF0C\u5176\u8BD5\u56FE\u5C1D\u8BD5\u5145\u5206\u5229\u7528distutils\uFF0Cdetuptools \u548C distribute \u5E76\u6210\u4E3A Python \u6807\u51C6\u5E93\u4E2D\u7684\u6807\u51C6\u5DE5\u5177\u3002\u4F46\u8BE5\u8BA1\u5212\u5E76\u6CA1\u6709\u8FBE\u5230\u9884\u671F\u7684\u76EE\u7684\uFF0C\u4E14\u5DF2\u7ECF\u662F\u4E00\u4E2A\u5E9F\u5F03\u7684\u9879\u76EE\u3002</p><p>\u56E0\u6B64\uFF0Csetuptools \u662F\u4E00\u4E2A\u4F18\u79C0\u7684\uFF0C\u53EF\u9760\u7684 Python \u5305\u5B89\u88C5\u4E0E\u5206\u53D1\u5DE5\u5177\u3002</p><p>\u90A3\u4E48\u5982\u4F55\u5728\u4E00\u4E2A\u5E72\u51C0\u7684\u73AF\u5883\u4E2D\u5B89\u88C5 setuptools \u5462\uFF1F</p><p>\u4E3B\u8981\u6709\u4E24\u79CD\u65B9\u6CD5\uFF1A</p>`,21),g=e("\u6E90\u7801\u5B89\u88C5\uFF1A\u5728 "),_={href:"https://link.zhihu.com/?target=https%3A//pypi.org/project/setuptools/%23files",target:"_blank",rel:"noopener noreferrer"},y=e("https://pypi.org/project/setuptools/#files"),x=e(" \u4E2D\u4E0B\u8F7D zip \u5305 \u89E3\u538B\u6267\u884C "),v=s("code",null,"python setup.py install",-1),f=e(" \u5B89\u88C5"),q=s("li",null,"\u901A\u8FC7\u5F15\u5BFC\u7A0B\u5E8F\u5B89\u88C5\uFF1A\u4E0B\u8F7D\u5F15\u5BFC\u7A0B\u5E8F\uFF0C\u5B83\u53EF\u4EE5\u7528\u6765\u4E0B\u8F7D\u6216\u8005\u66F4\u65B0\u6700\u65B0\u7248\u672C\u7684 setuptools",-1),P=p(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ wget http://peak.telecommunity.com/dist/ez_setup.py

# \u5B89\u88C5
$ python ez_setup.py

# \u66F4\u65B0\uFF0C\u4EE5\u4E0B\u4E24\u79CD\u4EFB\u9009
$ python ez_setup.py \u2013U setuptools
$ pip install -U setuptools
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_4-easy-install-\u4F7F\u7528\u6307\u5357" tabindex="-1"><a class="header-anchor" href="#_4-easy-install-\u4F7F\u7528\u6307\u5357" aria-hidden="true">#</a> 4. easy_install \u4F7F\u7528\u6307\u5357</h2><p>\u5F53\u4F60\u5B89\u88C5\u5B8C setuptools \u540E\uFF0C\u5C31\u62E5\u6709\u4E86\u4E00\u4E2A\u53EB\u505A <code>easy_install</code> \u7684\u7B2C\u4E09\u65B9\u7BA1\u7406\u5DE5\u5177\uFF0C\u8FD9\u4E5F\u662F\u5B83\u533A\u5206\u4E8E distutils \u7684\u4E00\u5927\u6539\u8FDB\u3002</p><p>\u8FD9\u91CC\u7B80\u5355\u4ECB\u7ECD\u4E00\u4E0B\u5B83\u7684\u7528\u6CD5\uFF0C\u867D\u7136\u5B83\u5DF2\u7ECF\u7528\u5F97\u975E\u5E38\u5C11\u4E86\u3002</p><p>\u5148\u662F\u5305\u7684\u5B89\u88C5</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># \u901A\u8FC7\u5305\u540D\uFF0C\u4ECEPyPI\u5BFB\u627E\u6700\u65B0\u7248\u672C\uFF0C\u81EA\u52A8\u4E0B\u8F7D\u3001\u7F16\u8BD1\u3001\u5B89\u88C5
$ easy_install pkg_name

# \u901A\u8FC7\u5305\u540D\u4ECE\u6307\u5B9A\u4E0B\u8F7D\u9875\u5BFB\u627E\u94FE\u63A5\u6765\u5B89\u88C5\u6216\u5347\u7EA7\u5305
$ easy_install -f http://pythonpaste.org/package_index.html 

# \u6307\u5B9A\u7EBF\u4E0A\u7684\u5305\u5730\u5740\u5B89\u88C5
$ easy_install http://example.com/path/to/MyPackage-1.2.3.tgz

# \u4ECE\u672C\u5730\u7684 .egg \u6587\u4EF6\u5B89\u88C5
$ easy_install xxx.egg

# \u5728\u5B89\u88C5\u65F6\u4F60\u53EF\u4EE5\u6DFB\u52A0\u989D\u5916\u7684\u53C2\u6570
\u6307\u5B9A\u5B89\u88C5\u76EE\u5F55\uFF1A--install-dir=DIR, -d DIR
\u6307\u5B9A\u7528\u6237\u5B89\u88C5\uFF1A--user
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>\u518D\u8005\u662F\u5305\u7684\u5347\u7EA7</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># \u4ECE pypi \u4E2D\u641C\u7D22\u5E76\u5347\u7EA7\u5305
$ easy_install --upgrade pkg_name

# \u6307\u5B9A\u7248\u672C\u8FDB\u884C\u5347\u7EA7
$ easy_install &quot;SomePackage==2.0&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u6700\u540E\u662F\u5305\u7684\u5220\u9664</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ easy_install -m pkg_name
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u8FD9\u6837\u7684\u5220\u9664\uFF0C\u4EC5\u662F\u5728 easy-install.pth \u6587\u4EF6\u4E2D\u5220\u9664\uFF0C\u4F7F\u5176\u4E0D\u80FD\u5728 python \u4E2D\u4F7F\u7528 \u8FD9\u4E2A\u6A21\u5757\uFF0C\u4F46\u5B9E\u9645\u7684\u5305\u8FD8\u5728\u4F60\u7684\u7535\u8111\u4E2D\uFF0C\u82E5\u8981\u5220\u9664\u5F7B\u5E95\uFF0C\u9700\u8981\u4F60\u624B\u52A8\u5220\u9664\u76F8\u5173\u7684 .egg \u53CA \u5176\u4ED6\u6587\u4EF6\u3002</p><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Ceasy_install \u53EA\u4F1A\u4ECE pypi \u4E0A\u4E0B\u8F7D\u76F8\u5173\u8F6F\u4EF6\u5305\uFF0C\u7531\u4E8E\u8FD9\u4E2A\u6E90\u5728\u56FD\u5916\uFF0C\u4E0B\u8F7D\u5305\u7684\u901F\u5EA6\u5E76\u4E0D\u7406\u60F3\uFF0C\u4F7F\u7528\u8FC7pip\u7684\u670B\u53CB\u81EA\u7136\u4F1A\u60F3\uFF0Ceasy_install \u662F\u5426\u80FD\u6307\u5B9A\u6E90\u8FDB\u884C\u5B89\u88C5\u5462\uFF1F</p><p>\u7B54\u6848\u662F\uFF0C\u53EF\u4EE5\u7684\u3002</p><p>\u7F16\u8F91\u914D\u7F6E\u6587\u4EF6 <code>/root/.pydistutils.cfg</code></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[easy_install]
index-url=http://mirrors.aliyun.com/pypi/simple/
find-links=http://mirrors.aliyun.com/pypi/simple/
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>`,15),k=e("\u4EE5\u4E0A\u4EC5\u4ECB\u7ECD\u4E86 easy_install \u7684\u4E00\u4E9B\u5E38\u7528\u7684\u65B9\u6CD5\uFF0C\u60F3\u8981\u4E86\u89E3\u66F4\u591A\uFF0C\u4F60\u53EF\u4EE5\u70B9\u51FB\u5B98\u65B9\u6587\u6863\uFF1A"),w={href:"https://link.zhihu.com/?target=https%3A//setuptools.readthedocs.io/en/latest/easy_install.html",target:"_blank",rel:"noopener noreferrer"},E=e("https://setuptools.readthedocs.io/en/latest/easy_install.html"),z=p(`<p>\u603B\u7ED3\u4E00\u53E5\uFF1Asetuptools \u662F\u5B98\u65B9\u63D0\u4F9B\u7684\u4E00\u4E2A\u4E13\u4E1A\u7528\u4E8E\u5305\u5206\u53D1\u7684\u5DE5\u5177\uFF0C\u82E5\u53EA\u4ECE\u5B89\u88C5\u7684\u89D2\u5EA6\u6765\u770B\uFF0C\u5B83\u7684\u529F\u80FD\u786E\u5B9E\u7B80\u5355\u3002\u5B83\u66F4\u5927\u7684\u610F\u4E49\u662F\u5BF9\u5305\u7684\u5206\u53D1\u5F88\u6709\u7528\uFF0C\u5B9A\u5236\u5316\u7A0B\u5E8F\u975E\u5E38\u9AD8\uFF0C\u6211\u4EEC\u73B0\u5728\u4E5F\u8FD8\u5728\u7528\u5B83\u8FDB\u884C\u7248\u672C\u5305\u7684\u53D1\u5E03\u3002</p><h2 id="_5-\u6E90\u7801\u5305\u4E0E\u4E8C\u8FDB\u5236\u5305\u4EC0\u4E48\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_5-\u6E90\u7801\u5305\u4E0E\u4E8C\u8FDB\u5236\u5305\u4EC0\u4E48\u533A\u522B" aria-hidden="true">#</a> 5. \u6E90\u7801\u5305\u4E0E\u4E8C\u8FDB\u5236\u5305\u4EC0\u4E48\u533A\u522B\uFF1F</h2><p>Python \u5305\u7684\u5206\u53D1\u53EF\u4EE5\u5206\u4E3A\u4E24\u79CD\uFF1A</p><p>1\u3001\u4EE5\u6E90\u7801\u5305\u7684\u65B9\u5F0F\u53D1\u5E03</p><p>\u6E90\u7801\u5305\u5B89\u88C5\u7684\u8FC7\u7A0B\uFF0C\u662F\u5148\u89E3\u538B\uFF0C\u518D\u7F16\u8BD1\uFF0C\u6700\u540E\u624D\u5B89\u88C5\uFF0C\u6240\u4EE5\u5B83\u662F\u8DE8\u5E73\u53F0\u7684\uFF0C\u7531\u4E8E\u6BCF\u6B21\u5B89\u88C5\u90FD\u8981\u8FDB\u884C\u7F16\u8BD1\uFF0C\u76F8\u5BF9\u4E8C\u8FDB\u5305\u5B89\u88C5\u65B9\u5F0F\u6765\u8BF4\u5B89\u88C5\u901F\u5EA6\u8F83\u6162\u3002</p><p>\u6E90\u7801\u5305\u7684\u672C\u8D28\u662F\u4E00\u4E2A\u538B\u7F29\u5305\uFF0C\u5176\u5E38\u89C1\u7684\u683C\u5F0F\u6709\uFF1A</p><p><img src="https://pic1.zhimg.com/80/v2-dffd77a245997a841eb426d9c0ce5184_720w.jpg" alt="img" loading="lazy"></p><p>2\u3001\u4EE5\u4E8C\u8FDB\u5236\u5305\u5F62\u5F0F\u53D1\u5E03</p><p>\u4E8C\u8FDB\u5236\u5305\u7684\u5B89\u88C5\u8FC7\u7A0B\u7701\u53BB\u4E86\u7F16\u8BD1\u7684\u8FC7\u7A0B\uFF0C\u76F4\u63A5\u8FDB\u884C\u89E3\u538B\u5B89\u88C5\uFF0C\u6240\u4EE5\u5B89\u88C5\u901F\u5EA6\u8F83\u6E90\u7801\u5305\u6765\u8BF4\u66F4\u5FEB\u3002</p><p>\u7531\u4E8E\u4E0D\u540C\u5E73\u53F0\u7684\u7F16\u8BD1\u51FA\u6765\u7684\u5305\u65E0\u6CD5\u901A\u7528\uFF0C\u6240\u4EE5\u5728\u53D1\u5E03\u65F6\uFF0C\u9700\u4E8B\u5148\u7F16\u8BD1\u597D\u591A\u4E2A\u5E73\u53F0\u7684\u5305\u3002</p><p>\u4E8C\u8FDB\u5236\u5305\u7684\u5E38\u89C1\u683C\u5F0F\u6709\uFF1A</p><p><img src="https://pic4.zhimg.com/80/v2-b0a22d8b82eac1f25bc6a1b95f6e0c2f_720w.jpg" alt="img" loading="lazy"></p><h2 id="_6-eggs-\u4E0E-wheels-\u6709\u4EC0\u4E48\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_6-eggs-\u4E0E-wheels-\u6709\u4EC0\u4E48\u533A\u522B" aria-hidden="true">#</a> 6. eggs \u4E0E wheels \u6709\u4EC0\u4E48\u533A\u522B\uFF1F</h2><p>Egg \u683C\u5F0F\u662F\u7531 setuptools \u5728 2004 \u5E74\u5F15\u5165\uFF0C\u800C Wheel \u683C\u5F0F\u662F\u7531 PEP427 \u5728 2012 \u5E74\u5B9A\u4E49\u3002Wheel \u7684\u51FA\u73B0\u662F\u4E3A\u4E86\u66FF\u4EE3 Egg\uFF0C\u5B83\u7684\u672C\u8D28\u662F\u4E00\u4E2Azip\u5305\uFF0C\u5176\u73B0\u5728\u88AB\u8BA4\u4E3A\u662F Python \u7684\u4E8C\u8FDB\u5236\u5305\u7684\u6807\u51C6\u683C\u5F0F\u3002</p><p>\u4EE5\u4E0B\u662F Wheel \u548C Egg \u7684\u4E3B\u8981\u533A\u522B\uFF1A</p><ul><li>Wheel \u6709\u4E00\u4E2A\u5B98\u65B9\u7684 PEP427 \u6765\u5B9A\u4E49\uFF0C\u800C Egg \u6CA1\u6709 PEP \u5B9A\u4E49</li><li>Wheel \u662F\u4E00\u79CD\u5206\u53D1\u683C\u5F0F\uFF0C\u5373\u6253\u5305\u683C\u5F0F\u3002\u800C Egg \u65E2\u662F\u4E00\u79CD\u5206\u53D1\u683C\u5F0F\uFF0C\u4E5F\u662F\u4E00\u79CD\u8FD0\u884C\u65F6\u5B89\u88C5\u7684\u683C\u5F0F\uFF0C\u5E76\u4E14\u662F\u53EF\u4EE5\u88AB\u76F4\u63A5 import</li><li>Wheel \u6587\u4EF6\u4E0D\u4F1A\u5305\u542B .pyc \u6587\u4EF6</li><li>Wheel \u4F7F\u7528\u548C PEP376 \u517C\u5BB9\u7684 .dist-info \u76EE\u5F55\uFF0C\u800C Egg \u4F7F\u7528 .egg-info \u76EE\u5F55</li><li>Wheel \u6709\u7740\u66F4\u4E30\u5BCC\u7684\u547D\u540D\u89C4\u5219\u3002</li><li>Wheel \u662F\u6709\u7248\u672C\u7684\u3002\u6BCF\u4E2A Wheel \u6587\u4EF6\u90FD\u5305\u542B wheel \u89C4\u8303\u7684\u7248\u672C\u548C\u6253\u5305\u7684\u5B9E\u73B0</li><li>Wheel \u5728\u5185\u90E8\u88AB sysconfig path type \u7BA1\u7406\uFF0C\u56E0\u6B64\u8F6C\u5411\u5176\u4ED6\u683C\u5F0F\u4E5F\u66F4\u5BB9\u6613</li></ul><p>wheel \u5305\u53EF\u4EE5\u901A\u8FC7 pip \u6765\u5B89\u88C5\uFF0C\u53EA\u4E0D\u8FC7\u9700\u8981\u5148\u5B89\u88C5 wheel \u6A21\u5757\uFF0C\u7136\u540E\u518D\u4F7F\u7528 pip \u7684\u547D\u4EE4\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ pip install wheel
$ pip wheel --wheel-dir=/local/wheels pkg
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_7-\u8D85\u8BE6\u7EC6\u8BB2\u89E3-setup-py-\u7684\u7F16\u5199" tabindex="-1"><a class="header-anchor" href="#_7-\u8D85\u8BE6\u7EC6\u8BB2\u89E3-setup-py-\u7684\u7F16\u5199" aria-hidden="true">#</a> 7. \u8D85\u8BE6\u7EC6\u8BB2\u89E3 setup.py \u7684\u7F16\u5199\uFF1F</h2><p>\u6253\u5305\u5206\u53D1\u6700\u5173\u952E\u7684\u4E00\u6B65\u662F\u7F16\u5199 <code>setup.py</code> \u6587\u4EF6\u3002</p><p>\u4EE5\u4E0B\u662F\u4E00\u4E2A setup.py \u7B80\u5355\u7684\u4F7F\u7528\u793A\u4F8B</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>from setuptools import setup, find_packages

setup(
    name=&quot;mytest&quot;,
    version=&quot;1.0&quot;,
    author=&quot;wangbm&quot;,
    author_email=&quot;wongbingming@163.com&quot;,
    description=&quot;Learn to Pack Python Module  --&gt;\u516C\u4F17\u53F7\uFF1APython\u7F16\u7A0B\u65F6\u5149&quot;,

    # \u9879\u76EE\u4E3B\u9875
    url=&quot;http://iswbm.com/&quot;, 

    # \u4F60\u8981\u5B89\u88C5\u7684\u5305\uFF0C\u901A\u8FC7 setuptools.find_packages \u627E\u5230\u5F53\u524D\u76EE\u5F55\u4E0B\u6709\u54EA\u4E9B\u5305
    packages=find_packages()
)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>\u63A5\u4E0B\u6765\uFF0C\u6211\u5C06\u6162\u6162\u6269\u5145\u8FD9\u4E2Asetup\u51FD\u6570\uFF0C\u589E\u52A0\u66F4\u591A\u7684\u53C2\u6570\uFF0C\u4EE5\u4FBF\u4F60\u80FD\u7406\u89E3setup\u51FD\u6570\u80FD\u505A\u54EA\u4E9B\u4E8B\u60C5\u3002</p><p><strong>\u7A0B\u5E8F\u5206\u7C7B\u4FE1\u606F</strong></p>`,24),A=s("code",null,"classifiers",-1),$=e(" \u53C2\u6570\u8BF4\u660E\u5305\u7684\u5206\u7C7B\u4FE1\u606F\u3002\u6240\u6709\u652F\u6301\u7684\u5206\u7C7B\u5217\u8868\u89C1\uFF1A"),L={href:"https://link.zhihu.com/?target=https%3A//pypi.org/pypi%3F%3Aaction%3Dlist_classifiers",target:"_blank",rel:"noopener noreferrer"},I=e("https://pypi.org/pypi?%3Aaction=list_classifiers"),B=p(`<p>\u793A\u4F8B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>from setuptools import setup, find_packages

setup(
    classifiers = [
        # \u53D1\u5C55\u65F6\u671F,\u5E38\u89C1\u7684\u5982\u4E0B
        #   3 - Alpha
        #   4 - Beta
        #   5 - Production/Stable
        &#39;Development Status :: 3 - Alpha&#39;,

        # \u5F00\u53D1\u7684\u76EE\u6807\u7528\u6237
        &#39;Intended Audience :: Developers&#39;,

        # \u5C5E\u4E8E\u4EC0\u4E48\u7C7B\u578B
        &#39;Topic :: Software Development :: Build Tools&#39;,

        # \u8BB8\u53EF\u8BC1\u4FE1\u606F
        &#39;License :: OSI Approved :: MIT License&#39;,

        # \u76EE\u6807 Python \u7248\u672C
        &#39;Programming Language :: Python :: 2&#39;,
        &#39;Programming Language :: Python :: 2.7&#39;,
        &#39;Programming Language :: Python :: 3&#39;,
        &#39;Programming Language :: Python :: 3.3&#39;,
        &#39;Programming Language :: Python :: 3.4&#39;,
        &#39;Programming Language :: Python :: 3.5&#39;,
    ]
)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p><strong>\u5173\u4E8E\u6587\u4EF6\u7684\u5206\u53D1</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>from setuptools import setup, find_packages


setup(
    name=&quot;mytest&quot;,
    version=&quot;1.0&quot;,
    author=&quot;wangbm&quot;,
    author_email=&quot;wongbingming@163.com&quot;,
    description=&quot;Learn to Pack Python Module&quot;,
    url=&quot;http://iswbm.com/&quot;, 
    packages=find_packages(),

    # \u5B89\u88C5\u8FC7\u7A0B\u4E2D\uFF0C\u9700\u8981\u5B89\u88C5\u7684\u9759\u6001\u6587\u4EF6\uFF0C\u5982\u914D\u7F6E\u6587\u4EF6\u3001service\u6587\u4EF6\u3001\u56FE\u7247\u7B49
    data_files=[
        (&#39;&#39;, [&#39;conf/*.conf&#39;]),
        (&#39;/usr/lib/systemd/system/&#39;, [&#39;bin/*.service&#39;]),
               ],

    # \u5E0C\u671B\u88AB\u6253\u5305\u7684\u6587\u4EF6
    package_data={
        &#39;&#39;:[&#39;*.txt&#39;],
        &#39;bandwidth_reporter&#39;:[&#39;*.txt&#39;]
               },
    # \u4E0D\u6253\u5305\u67D0\u4E9B\u6587\u4EF6
    exclude_package_data={
        &#39;bandwidth_reporter&#39;:[&#39;*.txt&#39;]
               }
)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>\u9664\u4E86\u4EE5\u4E0A\u7684\u53C2\u6570\u914D\u7F6E\u4E4B\u5916\uFF0C\u8FD8\u53EF\u4EE5\u4F7F\u7528\u4E00\u4E2A\u53EB\u505A <code>MANIFEST.in</code> \u7684\u6587\u4EF6\uFF0C\u6765\u63A7\u5236\u6587\u4EF6\u7684\u5206\u53D1\u3002</p><p>\u5982\u4E0B\u8FD9\u662F\u4E00\u4E2A <code>MANIFEST.in</code> \u7684\u6837\u4F8B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>include *.txt
recursive-include examples *.txt *.py
prune examples/sample?/build
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u8FD9\u4E9B\u914D\u7F6E\uFF0C\u89C4\u5B9A\u4E86\u5982\u4E0B\u51E0\u70B9</p><ul><li>\u6240\u6709\u6839\u76EE\u5F55\u4E0B\u7684\u4EE5 txt \u4E3A\u540E\u7F00\u540D\u7684\u6587\u4EF6\uFF0C\u90FD\u4F1A\u5206\u53D1</li><li>\u6839\u76EE\u5F55\u4E0B\u7684 examples \u76EE\u5F55 \u548C txt\u3001py\u6587\u4EF6\u90FD\u4F1A\u5206\u53D1</li><li>\u8DEF\u5F84\u5339\u914D\u4E0A examples/sample?/build \u4E0D\u4F1A\u5206\u53D1</li></ul><p><code>MANIFEST.in</code> \u9700\u8981\u653E\u5728\u548C setup.py \u540C\u7EA7\u7684\u9876\u7EA7\u76EE\u5F55\u4E0B\uFF0Csetuptools \u4F1A\u81EA\u52A8\u8BFB\u53D6\u8BE5\u6587\u4EF6\u3002</p><p><strong>\u5173\u4E8E\u4F9D\u8D56\u5305\u4E0B\u8F7D\u5B89\u88C5</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>from setuptools import setup, find_packages


setup(
    ...

    # \u8868\u660E\u5F53\u524D\u6A21\u5757\u4F9D\u8D56\u54EA\u4E9B\u5305\uFF0C\u82E5\u73AF\u5883\u4E2D\u6CA1\u6709\uFF0C\u5219\u4F1A\u4ECEpypi\u4E2D\u4E0B\u8F7D\u5B89\u88C5
    install_requires=[&#39;docutils&gt;=0.3&#39;],

    # setup.py \u672C\u8EAB\u8981\u4F9D\u8D56\u7684\u5305\uFF0C\u8FD9\u901A\u5E38\u662F\u4E3A\u4E00\u4E9Bsetuptools\u7684\u63D2\u4EF6\u51C6\u5907\u7684\u914D\u7F6E
    # \u8FD9\u91CC\u5217\u51FA\u7684\u5305\uFF0C\u4E0D\u4F1A\u81EA\u52A8\u5B89\u88C5\u3002
    setup_requires=[&#39;pbr&#39;],

    # \u4EC5\u5728\u6D4B\u8BD5\u65F6\u9700\u8981\u4F7F\u7528\u7684\u4F9D\u8D56\uFF0C\u5728\u6B63\u5E38\u53D1\u5E03\u7684\u4EE3\u7801\u4E2D\u662F\u6CA1\u6709\u7528\u7684\u3002
    # \u5728\u6267\u884Cpython setup.py test\u65F6\uFF0C\u53EF\u4EE5\u81EA\u52A8\u5B89\u88C5\u8FD9\u4E09\u4E2A\u5E93\uFF0C\u786E\u4FDD\u6D4B\u8BD5\u7684\u6B63\u5E38\u8FD0\u884C\u3002
    tests_require=[
        &#39;pytest&gt;=3.3.1&#39;,
        &#39;pytest-cov&gt;=2.5.1&#39;,
    ],

    # \u7528\u4E8E\u5B89\u88C5setup_requires\u6216tests_require\u91CC\u7684\u8F6F\u4EF6\u5305
    # \u8FD9\u4E9B\u4FE1\u606F\u4F1A\u5199\u5165egg\u7684 metadata \u4FE1\u606F\u4E2D
    dependency_links=[
        &quot;http://example2.com/p/foobar-1.0.tar.gz&quot;,
    ],

    # install_requires \u5728\u5B89\u88C5\u6A21\u5757\u65F6\u4F1A\u81EA\u52A8\u5B89\u88C5\u4F9D\u8D56\u5305
    # \u800C extras_require \u4E0D\u4F1A\uFF0C\u8FD9\u91CC\u4EC5\u8868\u793A\u8BE5\u6A21\u5757\u4F1A\u4F9D\u8D56\u8FD9\u4E9B\u5305
    # \u4F46\u662F\u8FD9\u4E9B\u5305\u901A\u5E38\u4E0D\u4F1A\u4F7F\u7528\u5230\uFF0C\u53EA\u6709\u5F53\u4F60\u6DF1\u5EA6\u4F7F\u7528\u6A21\u5757\u65F6\uFF0C\u624D\u4F1A\u7528\u5230\uFF0C\u8FD9\u91CC\u9700\u8981\u4F60\u624B\u52A8\u5B89\u88C5
    extras_require={
        &#39;PDF&#39;:  [&quot;ReportLab&gt;=1.2&quot;, &quot;RXP&quot;],
        &#39;reST&#39;: [&quot;docutils&gt;=0.3&quot;],
    }
)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>\u5173\u4E8E <code>install_requires</code>\uFF0C \u6709\u4EE5\u4E0B\u4E94\u79CD\u5E38\u7528\u7684\u8868\u793A\u65B9\u6CD5\uFF1A</p><ol><li><code>&#39;argparse&#39;</code>\uFF0C\u53EA\u5305\u542B\u5305\u540D\u3002 \u8FD9\u79CD\u5F62\u5F0F\u53EA\u68C0\u67E5\u5305\u7684\u5B58\u5728\u6027\uFF0C\u4E0D\u68C0\u67E5\u7248\u672C\u3002 \u65B9\u4FBF\uFF0C\u4F46\u4E0D\u5229\u4E8E\u63A7\u5236\u98CE\u9669\u3002</li><li><code>&#39;setuptools==38.2.4&#39;</code>\uFF0C\u6307\u5B9A\u7248\u672C\u3002 \u8FD9\u79CD\u5F62\u5F0F\u628A\u98CE\u9669\u964D\u5230\u4E86\u6700\u4F4E\uFF0C\u786E\u4FDD\u4E86\u5F00\u53D1\u3001\u6D4B\u8BD5\u4E0E\u90E8\u7F72\u7684\u7248\u672C\u4E00\u81F4\uFF0C\u4E0D\u4F1A\u51FA\u73B0\u610F\u5916\u3002 \u7F3A\u70B9\u662F\u4E0D\u5229\u4E8E\u66F4\u65B0\uFF0C\u6BCF\u6B21\u66F4\u65B0\u90FD\u9700\u8981\u6539\u52A8\u4EE3\u7801\u3002</li><li><code>&#39;docutils &gt;= 0.3&#39;</code>\uFF0C\u8FD9\u662F\u6BD4\u8F83\u5E38\u7528\u7684\u5F62\u5F0F\u3002 \u5F53\u5BF9\u67D0\u4E2A\u5E93\u6BD4\u8F83\u4FE1\u4EFB\u65F6\uFF0C\u8FD9\u79CD\u5F62\u5F0F\u53EF\u4EE5\u81EA\u52A8\u4FDD\u6301\u7248\u672C\u4E3A\u6700\u65B0\u3002</li><li><code>&#39;Django &gt;= 1.11, != 1.11.1, &lt;= 2&#39;</code>\uFF0C\u8FD9\u662F\u6BD4\u8F83\u590D\u6742\u7684\u5F62\u5F0F\u3002 \u5982\u8FD9\u4E2A\u4F8B\u5B50\uFF0C\u4FDD\u8BC1\u4E86Django\u7684\u5927\u7248\u672C\u57281.11\u548C2\u4E4B\u95F4\uFF0C\u4E5F\u53731.11.x\uFF1B\u5E76\u4E14\uFF0C\u6392\u9664\u4E86\u5DF2\u77E5\u6709\u95EE\u9898\u7684\u7248\u672C1.11.1\uFF08\u4EC5\u4E3E\u4F8B\uFF09\u3002 \u5BF9\u4E8E\u4E00\u4E9B\u5927\u578B\u3001\u590D\u6742\u7684\u5E93\uFF0C\u8FD9\u79CD\u5F62\u5F0F\u662F\u6700\u5408\u9002\u7684\u3002</li><li><code>&#39;requests[security, socks] &gt;= 2.18.4&#39;</code>\uFF0C\u8FD9\u662F\u5305\u542B\u4E86\u989D\u5916\u7684\u53EF\u9009\u4F9D\u8D56\u7684\u5F62\u5F0F\u3002 \u6B63\u5E38\u5B89\u88C5requests\u4F1A\u81EA\u52A8\u5B89\u88C5\u5B83\u7684<code>install_requires</code>\u4E2D\u6307\u5B9A\u7684\u4F9D\u8D56\uFF0C\u800C\u4E0D\u4F1A\u5B89\u88C5<code>security</code>\u548C<code>socks</code>\u8FD9\u4E24\u7EC4\u4F9D\u8D56\u3002 \u8FD9\u4E24\u7EC4\u4F9D\u8D56\u662F\u5B9A\u4E49\u5728\u5B83\u7684<code>extras_require</code>\u4E2D\u3002 \u8FD9\u79CD\u5F62\u5F0F\uFF0C\u7528\u5728\u6DF1\u5EA6\u4F7F\u7528\u67D0\u4E9B\u5E93\u65F6\u3002</li></ol><p><strong>\u5173\u4E8E\u5B89\u88C5\u73AF\u5883\u7684\u9650\u5236</strong></p><p>\u6709\u4E9B\u5E93\u5E76\u4E0D\u662F\u5728\u6240\u4EE5\u7684 Python \u7248\u672C\u4E2D\u90FD\u9002\u7528\u7684\uFF0C\u82E5\u4E00\u4E2A\u5E93\u5B89\u88C5\u5728\u4E00\u4E2A\u672A\u517C\u5BB9\u7684 Python \u73AF\u5883\u4E2D\uFF0C\u7406\u8BBA\u4E0A\u4E0D\u5E94\u8BE5\u5728\u4F7F\u7528\u65F6\u624D\u62A5\u9519\uFF0C\u800C\u5E94\u8BE5\u5728\u5B89\u88C5\u8FC7\u7A0B\u5C31\u4F7F\u5176\u5931\u8D25\uFF0C\u63D0\u793A\u7981\u6B62\u5B89\u88C5\u3002</p><p>\u8FD9\u6837\u7684\u529F\u80FD\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>python_requires</code> \u6765\u5B9E\u73B0\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>setup(
    ...
    python_requires=&#39;&gt;=2.7, &lt;=3&#39;,
)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>\u751F\u6210\u53EF\u6267\u884C\u6587\u4EF6\u7684\u5206\u53D1</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>from setuptools import setup, find_packages


setup(
    name=&quot;mytest&quot;,
    version=&quot;1.0&quot;,
    author=&quot;wangbm&quot;,
    author_email=&quot;wongbingming@163.com&quot;,
    description=&quot;Learn to Pack Python Module&quot;,
    url=&quot;http://iswbm.com/&quot;, 
    packages=find_packages(),

    # \u7528\u6765\u652F\u6301\u81EA\u52A8\u751F\u6210\u811A\u672C\uFF0C\u5B89\u88C5\u540E\u4F1A\u81EA\u52A8\u751F\u6210 /usr/bin/foo \u7684\u53EF\u6267\u884C\u6587\u4EF6
    # \u8BE5\u6587\u4EF6\u5165\u53E3\u6307\u5411 foo/main.py \u7684main \u51FD\u6570
    entry_points={
        &#39;console_scripts&#39;: [
            &#39;foo = foo.main:main&#39;
        ]
    },

    # \u5C06 bin/foo.sh \u548C bar.py \u811A\u672C\uFF0C\u751F\u6210\u5230\u7CFB\u7EDF PATH\u4E2D
    # \u6267\u884C python setup.py install \u540E
    # \u4F1A\u751F\u6210 \u5982 /usr/bin/foo.sh \u548C \u5982 /usr/bin/bar.py
    scripts=[&#39;bin/foo.sh&#39;, &#39;bar.py&#39;]
)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>\u4E0A\u9762\u7684 scripts \u91CC\u6709\u7684\u811A\u672C\u4E2D\u6709 <code>sh</code> \u548C <code>py</code> \u540E\u7F00\uFF0C\u90A3\u4E48\u5B89\u88C5\u540E\uFF0Csetuptools \u4F1A\u539F\u5C01\u4E0D\u52A8\u7684\u79FB\u52A8\u5230 /usr/bin \u4E2D\uFF0C\u5E76\u6DFB\u52A0\u53EF\u6267\u884C\u6743\u9650\u3002</p><p>\u82E5\u4F60\u60F3\u5BF9\u8FD9\u4E9B\u6587\u4EF6\u518D\u4F5C\u4E00\u4E9B\u66F4\u6539\uFF0C\u6BD4\u5982\u53BB\u6389\u591A\u4F59\u7684\u540E\u7F00\uFF0C\u53EF\u4EE5\u8FD9\u6837\u505A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>from setuptools.command.install_scripts import install_scripts

class InstallScripts(install_scripts):

    def run(self):
        setuptools.command.install_scripts.install_scripts.run(self)

        # Rename some script files
        for script in self.get_outputs():
            if basename.endswith(&quot;.py&quot;) or basename.endswith(&quot;.sh&quot;):
                dest = script[:-3]
            else:
                continue
            print(&quot;moving %s to %s&quot; % (script, dest))
            shutil.move(script, dest)

setup(
    ...
    scripts=[&#39;bin/foo.sh&#39;, &#39;bar.py&#39;],

    cmdclass={
        &quot;install_scripts&quot;: InstallScripts
    }
)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><strong>ext_modules</strong></p><p><code>ext_modules</code> \u53C2\u6570\u7528\u4E8E\u6784\u5EFA C \u548C C++ \u6269\u5C55\u6269\u5C55\u5305\u3002\u5176\u662F Extension \u5B9E\u4F8B\u7684\u5217\u8868\uFF0C\u6BCF\u4E00\u4E2A Extension \u5B9E\u4F8B\u63CF\u8FF0\u4E86\u4E00\u4E2A\u72EC\u7ACB\u7684\u6269\u5C55\u6A21\u5757\uFF0C\u6269\u5C55\u6A21\u5757\u53EF\u4EE5\u8BBE\u7F6E\u6269\u5C55\u5305\u540D\uFF0C\u5934\u6587\u4EF6\u3001\u6E90\u6587\u4EF6\u3001\u94FE\u63A5\u5E93\u53CA\u5176\u8DEF\u5F84\u3001\u5B8F\u5B9A\u4E49\u548C\u7F16\u8F91\u53C2\u6570\u7B49\u3002\u5982\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>setup(
    # other arguments here...
    ext_modules=[
        Extension(&#39;foo&#39;,
                  glob(path.join(here, &#39;src&#39;, &#39;*.c&#39;)),
                  libraries = [ &#39;rt&#39; ],
                  include_dirs=[numpy.get_include()])
    ]
)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div>`,26),S=e("\u8BE6\u7EC6\u4E86\u89E3\u53EF\u53C2\u8003\uFF1A"),W={href:"https://link.zhihu.com/?target=https%3A//docs.python.org/3.6/distutils/setupscript.html%23preprocessor-options",target:"_blank",rel:"noopener noreferrer"},D=e("https://docs.python.org/3.6/distutils/setupscript.html#preprocessor-options"),F=p(`<p><strong>\u6307\u5B9Arelease</strong></p><p>setup.py \u91CC\u53EA\u80FD\u6307\u5B9A version\uFF0C\u800C\u4E0D\u80FD\u6307\u5B9A release\uFF0C\u5982\u679C\u4F60\u9700\u8981\u53D8\u66F4\u7248\u672C\u53F7\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>--release</code> \u53C2\u6570\u8FDB\u884C\u6307\u5B9A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>python setup.py bdist_rpm --release=20200617
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>setup.py \u7684\u53C2\u6570\u975E\u5E38\u591A\uFF0C\u80FD\u591F\u4E0D\u501F\u52A9\u6587\u6863\u5199\u597D\u4E00\u4E2Asetup.py\u597D\u50CF\u6CA1\u90A3\u4E48\u7B80\u5355\u3002\u4E3A\u4E86\u5907\u5FD8\uFF0C\u6211\u6574\u7406\u4E86 setup \u51FD\u6570\u5E38\u7528\u7684\u4E00\u4E9B\u53C2\u6570\uFF1A</p><p><img src="https://pic3.zhimg.com/80/v2-4563e810d05ec25ce283c7f54a271e2e_720w.jpg" alt="img" loading="lazy"></p>`,5),M=e("\u66F4\u591A\u53C2\u6570\u53EF\u89C1\uFF1A"),R={href:"https://link.zhihu.com/?target=https%3A//setuptools.readthedocs.io/en/latest/setuptools.html",target:"_blank",rel:"noopener noreferrer"},T=e("https://setuptools.readthedocs.io/en/latest/setuptools.html"),j=s("h2",{id:"_8-\u6253\u5305\u8F85\u52A9\u795E\u5668pbr-\u662F\u4EC0\u4E48",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_8-\u6253\u5305\u8F85\u52A9\u795E\u5668pbr-\u662F\u4EC0\u4E48","aria-hidden":"true"},"#"),e(" 8. \u6253\u5305\u8F85\u52A9\u795E\u5668PBR \u662F\u4EC0\u4E48\uFF1F")],-1),C=s("code",null,"pbr",-1),N=e(" \u662F setuptools \u7684\u8F85\u52A9\u5DE5\u5177\uFF0C\u6700\u521D\u662F\u4E3A OpenStack \u5F00\u53D1("),V={href:"https://link.zhihu.com/?target=https%3A//launchpad.net/pbr",target:"_blank",rel:"noopener noreferrer"},U=e("https://launchpad.net/pbr)\uFF0C\u57FA\u4E8E"),O=s("code",null,"d2to1",-1),H=e("\u3002"),X=e("%EF%BC%8C%E5%9F%BA%E4%BA%8E%60d2to1%60%E3%80%82)"),Z=p(`<p><code>pbr</code> \u4F1A\u8BFB\u53D6\u548C\u8FC7\u6EE4setup.cfg\u4E2D\u7684\u6570\u636E\uFF0C\u7136\u540E\u5C06\u89E3\u6790\u540E\u7684\u6570\u636E\u63D0\u4F9B\u7ED9 <code>setup.py</code> \u4F5C\u4E3A\u53C2\u6570\u3002\u5305\u542B\u5982\u4E0B\u529F\u80FD\uFF1A</p><ol><li>\u4ECEgit\u4E2D\u83B7\u53D6Version\u3001AUTHORS and ChangeLog\u4FE1\u606F</li><li>Sphinx Autodoc\u3002pbr \u4F1A\u626B\u63CFproject\uFF0C\u627E\u5230\u6240\u6709\u6A21\u5757\uFF0C\u751F\u6210stub files</li><li>Requirements\u3002pbr\u4F1A\u8BFB\u53D6requirements.txt\uFF0C\u751F\u6210setup\u51FD\u6570\u9700\u8981\u7684<code>install_requires/tests_require/dependency_links</code></li></ol><p>\u8FD9\u91CC\u9700\u8981\u6CE8\u610F\uFF0C\u5728 <code>requirements.txt</code> \u6587\u4EF6\u7684\u5934\u90E8\u53EF\u4EE5\u4F7F\u7528\uFF1A<code>--index https://pypi.python.org/simple/</code>\uFF0C\u8FD9\u4E00\u884C\u628A\u4E00\u4E2A\u62BD\u8C61\u7684\u4F9D\u8D56\u58F0\u660E\u5982 requests==1.2.0 \u8F6C\u53D8\u4E3A\u4E00\u4E2A\u5177\u4F53\u7684\u4F9D\u8D56\u58F0\u660E requests 1.2.0 from pypi.python.org/simple/</p><ol><li>long_description\u3002\u4ECEREADME.rst, README.txt or README file\u4E2D\u751F\u6210<code>long_description</code>\u53C2\u6570</li></ol><p>\u4F7F\u7528pbr\u5F88\u7B80\u5355\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>from setuptools import setup

setup(
    setup_requires=[&#39;pbr&#39;],
    pbr=True,
)
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u4F7F\u7528pbr\u65F6\uFF0Csetup.cfg\u4E2D\u6709\u4E00\u4E9B\u914D\u7F6E\u3002\u5728[files]\u4E2D\uFF0C\u6709\u4E09\u4E2Akey\uFF1A <code>packages</code>:\u6307\u5B9A\u9700\u8981\u5305\u542B\u7684\u5305\uFF0C\u884C\u4E3A\u7C7B\u4F3C\u4E8Esetuptools.find_packages <code>namespace_packages</code>:\u6307\u5B9Anamespace packages <code>data_files</code>: \u6307\u5B9A\u76EE\u7684\u76EE\u5F55\u548C\u6E90\u6587\u4EF6\u8DEF\u5F84\uFF0C\u4E00\u4E2A\u793A\u4F8B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[files]
data_files =
    etc/pbr = etc/pbr/*
    etc/neutron =
        etc/api-paste.ini
        etc/dhcp-agent.ini
    etc/init.d = neutron.init
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>[entry_points]</code> \u6BB5\u8DDF setuptools \u7684\u65B9\u5F0F\u76F8\u540C\u3002</p><p>\u5230\u6B64\uFF0C\u6211\u8BB2\u4E86\u4E09\u79CD\u7F16\u5199\u4F7F\u7528 setup.py \u7684\u65B9\u6CD5</p><ul><li>\u4F7F\u7528\u547D\u4EE4\u884C\u53C2\u6570\u6307\u5B9A\uFF0C\u4E00\u4E2A\u4E00\u4E2A\u5C06\u53C2\u6570\u4F20\u9012\u8FDB\u53BB\uFF08\u6781\u4E0D\u63A8\u8350\uFF09</li><li>\u5728 setup.py \u4E2D\u7684setup\u51FD\u6570\u4E2D\u6307\u5B9A\uFF08\u63A8\u8350\u4F7F\u7528\uFF09</li><li>\u4F7F\u7528 pbr \uFF0C\u5728 setup.cfg \u4E2D\u6307\u5B9A\uFF08\u6613\u4E8E\u7BA1\u7406\uFF0C\u66F4\u63A8\u8350\uFF09</li></ul><h2 id="_9-\u5982\u4F55\u4F7F\u7528-setup-py-\u6784\u5EFA\u5305" tabindex="-1"><a class="header-anchor" href="#_9-\u5982\u4F55\u4F7F\u7528-setup-py-\u6784\u5EFA\u5305" aria-hidden="true">#</a> 9. \u5982\u4F55\u4F7F\u7528 setup.py \u6784\u5EFA\u5305</h2><p>1\u3001\u6784\u5EFA\u6E90\u7801\u53D1\u5E03\u5305\u3002</p><p>\u7528\u4E8E\u53D1\u5E03\u4E00\u4E2A Python \u6A21\u5757\u6216\u9879\u76EE\uFF0C\u5C06\u6E90\u7801\u6253\u5305\u6210 tar.gz \uFF08\u7528\u4E8E Linux \u73AF\u5883\u4E2D\uFF09\u6216\u8005 zip \u538B\u7F29\u5305\uFF08\u7528\u4E8E Windows \u73AF\u5883\u4E2D\uFF09</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ python setup.py sdist
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u90A3\u8FD9\u79CD\u5305\u5982\u4F55\u5B89\u88C5\u5462</p><p>\u7B54\u6848\u662F\uFF0C\u4F7F\u7528\u4E0B\u4E00\u8282\u5373\u5C06\u4ECB\u7ECD\u7684 <code>setuptools</code> \u4E2D\u63D0\u4F9B\u7684 <code>easy_install</code> \u5DE5\u5177\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ easy_install xxx.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u4F7F\u7528 sdist \u5C06\u6839\u636E\u5F53\u524D\u5E73\u53F0\u521B\u5EFA\u9ED8\u8BA4\u683C\u5F0F\u7684\u5B58\u6863\u3002\u5728\u7C7B Unix \u5E73\u53F0\u4E0A\uFF0C\u5C06\u521B\u5EFA\u540E\u7F00\u540E\u4E3A <code>.tar.gz</code> \u7684 gzip \u538B\u7F29\u7684tar\u6587\u4EF6\u5206\u53D1\u5305\uFF0C\u800C\u5728Windows\u4E0A\u4E3A ZIP \u6587\u4EF6\u3002</p><p>\u5F53\u7136\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u901A\u8FC7\u6307\u5B9A\u4F60\u8981\u7684\u53D1\u5E03\u5305\u683C\u5F0F\u6765\u6253\u7834\u8FD9\u4E2A\u9ED8\u8BA4\u884C\u4E3A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ python setup.py sdist --formats=gztar,zip
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u4F60\u53EF\u4EE5\u6307\u5B9A\u7684\u683C\u5F0F\u6709\u54EA\u4E9B\u5462\uFF1F</p><p>\u521B\u5EFA\u4E00\u4E2A\u538B\u7F29\u7684tarball\u548C\u4E00\u4E2Azip\u6587\u4EF6\u3002\u53EF\u7528\u683C\u5F0F\u4E3A\uFF1A</p><p><img src="https://pic2.zhimg.com/80/v2-7416d2c5ffd4fde928d7bd214ea59d39_720w.jpg" alt="img" loading="lazy"></p><p>\u5BF9\u4EE5\u4E0A\u7684\u683C\u5F0F\uFF0C\u6709\u51E0\u70B9\u9700\u8981\u6CE8\u610F\u4E00\u4E0B\uFF1A</p><ul><li>\u5728\u7248\u672C3.5\u4E2D\u624D\u6DFB\u52A0\u4E86\u5BF9 <code>xztar</code> \u683C\u5F0F\u7684\u652F\u6301</li><li>zip \u683C\u5F0F\u9700\u8981\u4F60\u4E8B\u5148\u5DF2\u5B89\u88C5\u76F8\u5E94\u7684\u6A21\u5757\uFF1Azip\u7A0B\u5E8F\u6216zipfile\u6A21\u5757\uFF08\u5DF2\u6210\u4E3APython\u7684\u6807\u51C6\u5E93\uFF09</li><li>ztar \u683C\u5F0F\u6B63\u5728\u5F03\u7528\uFF0C\u8BF7\u5C3D\u91CF\u4E0D\u8981\u4F7F\u7528</li></ul><p>\u53E6\u5916\uFF0C\u5982\u679C\u60A8\u5E0C\u671B\u5F52\u6863\u6587\u4EF6\u7684\u6240\u6709\u6587\u4EF6\u5F52root\u62E5\u6709\uFF0C\u53EF\u4EE5\u8FD9\u6837\u6307\u5B9A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>python setup.py sdist --owner=root --group=root
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>2\u3001\u6784\u5EFA\u4E8C\u8FDB\u5236\u5206\u53D1\u5305\u3002</p><p>\u5728windows\u4E2D\u6211\u4EEC\u4E60\u60EF\u4E86\u53CC\u51FB exe \u8FDB\u884C\u8F6F\u4EF6\u7684\u5B89\u88C5\uFF0CPython \u6A21\u5757\u7684\u5B89\u88C5\u4E5F\u540C\u6837\u652F\u6301 \u6253\u5305\u6210 exe \u8FD9\u6837\u7684\u4E8C\u8FDB\u5236\u8F6F\u4EF6\u5305\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ python setup.py bdist_wininst
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u800C\u5728 Linux \u4E2D\uFF0C\u5927\u5BB6\u4E5F\u4E60\u60EF\u4E86\u4F7F\u7528 rpm \u6765\u5B89\u88C5\u5305\uFF0C\u5BF9\u6B64\u4F60\u53EF\u4EE5\u4F7F\u7528\u8FD9\u6761\u547D\u4EE4\u5B9E\u73B0 rpm \u5305\u7684\u6784\u5EFA</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ python setup.py bdist_rpm
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u82E5\u4F60\u559C\u6B22\u4F7F\u7528 easy_install \u6216\u8005 pip \u6765\u5B89\u88C5\u79BB\u7EBF\u5305\u3002\u4F60\u53EF\u4EE5\u5C06\u5176\u6253\u5305\u6210 egg \u5305</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ python setup.py bdist_egg
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u82E5\u4F60\u7684\u9879\u76EE\uFF0C\u9700\u8981\u5B89\u88C5\u591A\u4E2A\u5E73\u53F0\u4E0B\uFF0C\u65E2\u6709 Windows \u4E5F\u6709 Linux\uFF0C\u6309\u7167\u4E0A\u9762\u7684\u65B9\u6CD5\uFF0C\u591A\u79CD\u683C\u5F0F\u6211\u4EEC\u8981\u6267\u884C\u591A\u6B21\u547D\u4EE4\uFF0C\u4E3A\u4E86\u65B9\u4FBF\uFF0C\u4F60\u53EF\u4EE5\u4E00\u6B65\u5230\u4F4D\uFF0C\u6267\u884C\u5982\u4E0B\u8FD9\u6761\u547D\u4EE4\uFF0C\u5373\u53EF\u751F\u6210\u591A\u4E2A\u683C\u5F0F\u7684\u8FDB\u5236</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ python setup.py bdist
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_10-\u5982\u4F55\u4F7F\u7528-setup-py-\u5B89\u88C5\u5305" tabindex="-1"><a class="header-anchor" href="#_10-\u5982\u4F55\u4F7F\u7528-setup-py-\u5B89\u88C5\u5305" aria-hidden="true">#</a> 10. \u5982\u4F55\u4F7F\u7528 setup.py \u5B89\u88C5\u5305</h2><p>\u6B63\u5E38\u60C5\u51B5\u4E0B\uFF0C\u6211\u4EEC\u90FD\u662F\u901A\u8FC7\u4EE5\u4E0A\u6784\u5EFA\u7684\u6E90\u7801\u5305\u6216\u8005\u4E8C\u8FDB\u5236\u5305\u8FDB\u884C\u6A21\u5757\u7684\u5B89\u88C5\u3002</p><p>\u4F46\u5728\u7F16\u5199 setup.py \u7684\u8FC7\u7A0B\u4E2D\uFF0C\u53EF\u80FD\u4E0D\u80FD\u4E00\u6B65\u5230\u4F4D\uFF0C\u9700\u8981\u591A\u6B21\u8C03\u8BD5\uFF0C\u8FD9\u65F6\u5019\u5982\u4F55\u6D4B\u8BD5\u81EA\u5DF1\u5199\u7684 setup.py \u6587\u4EF6\u662F\u53EF\u7528\u7684\u5462\uFF1F</p><p>\u8FD9\u65F6\u5019\u4F60\u53EF\u4EE5\u4F7F\u7528\u8FD9\u6761\u547D\u4EE4\uFF0C\u5B83\u4F1A\u5C06\u4F60\u7684\u6A21\u5757\u5B89\u88C5\u81F3\u7CFB\u7EDF\u5168\u5C40\u73AF\u5883\u4E2D</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ python setup.py install
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u5982\u82E5\u4F60\u7684\u9879\u76EE\u8FD8\u5904\u4E8E\u5F00\u53D1\u9636\u6BB5\uFF0C\u9891\u7E41\u7684\u5B89\u88C5\u6A21\u5757\uFF0C\u4E5F\u662F\u4E00\u4E2A\u9EBB\u70E6\u4E8B\u3002</p><p>\u8FD9\u65F6\u5019\u4F60\u53EF\u4EE5\u4F7F\u7528\u8FD9\u6761\u547D\u4EE4\u5B89\u88C5\uFF0C\u8BE5\u65B9\u6CD5\u4E0D\u4F1A\u771F\u6B63\u7684\u5B89\u88C5\u5305\uFF0C\u800C\u662F\u5728\u7CFB\u7EDF\u73AF\u5883\u4E2D\u521B\u5EFA\u4E00\u4E2A\u8F6F\u94FE\u63A5\u6307\u5411\u5305\u5B9E\u9645\u6240\u5728\u76EE\u5F55\u3002\u8FD9\u8FB9\u5728\u4FEE\u6539\u5305\u4E4B\u540E\u4E0D\u7528\u518D\u5B89\u88C5\u5C31\u80FD\u751F\u6548\uFF0C\u4FBF\u4E8E\u8C03\u8BD5\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ python setup.py develop
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_11-\u5982\u4F55\u53D1\u5E03\u5305\u5230-pypi" tabindex="-1"><a class="header-anchor" href="#_11-\u5982\u4F55\u53D1\u5E03\u5305\u5230-pypi" aria-hidden="true">#</a> 11. \u5982\u4F55\u53D1\u5E03\u5305\u5230 PyPi\uFF1F</h2><p>\u901A\u8FC7\u4E0A\u9762\u7684\u5B66\u4E60\uFF0C\u4F60\u4E00\u5B9A\u5DF2\u7ECF\u5B66\u4F1A\u4E86\u5982\u4F55\u6253\u5305\u81EA\u5DF1\u7684\u9879\u76EE\uFF0C\u82E5\u4F60\u89C9\u5F97\u81EA\u5DF1\u5F00\u53D1\u7684\u6A21\u5757\u975E\u5E38\u4E0D\u9519\uFF0C\u60F3\u8981 share \u7ED9\u5176\u4ED6\u4EBA\u4F7F\u7528\uFF0C\u4F60\u53EF\u4EE5\u5C06\u5176\u4E0A\u4F20\u5230 PyPi \uFF08Python Package Index\uFF09\u4E0A\uFF0C\u5B83\u662F Python \u5B98\u65B9\u7EF4\u62A4\u7684\u7B2C\u4E09\u65B9\u5305\u4ED3\u5E93\uFF0C\u7528\u4E8E\u7EDF\u4E00\u5B58\u50A8\u548C\u7BA1\u7406\u5F00\u53D1\u8005\u53D1\u5E03\u7684 Python \u5305\u3002</p><p>\u5982\u679C\u8981\u53D1\u5E03\u81EA\u5DF1\u7684\u5305\uFF0C\u9700\u8981\u5148\u5230 pypi \u4E0A\u6CE8\u518C\u8D26\u53F7\u3002\u7136\u540E\u521B\u5EFA <code>~/.pypirc</code> \u6587\u4EF6\uFF0C\u6B64\u6587\u4EF6\u4E2D\u914D\u7F6E PyPI \u8BBF\u95EE\u5730\u5740\u548C\u8D26\u53F7\u3002\u5982\u7684.pypirc\u6587\u4EF6\u5185\u5BB9\u8BF7\u6839\u636E\u81EA\u5DF1\u7684\u8D26\u53F7\u6765\u4FEE\u6539\u3002</p><p>\u5178\u578B\u7684 .pypirc \u6587\u4EF6</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[distutils]
index-servers = pypi

[pypi]
username:xxx
password:xxx
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u7136\u540E\u4F7F\u7528\u8FD9\u6761\u547D\u4EE4\u8FDB\u884C\u4FE1\u606F\u6CE8\u518C\uFF0C\u5B8C\u6210\u540E\uFF0C\u4F60\u53EF\u4EE5\u5728 PyPi \u4E0A\u770B\u5230\u9879\u76EE\u4FE1\u606F\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ python setup.py register
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u6CE8\u518C\u5B8C\u4E86\u540E\uFF0C\u4F60\u8FD8\u8981\u4E0A\u4F20\u6E90\u7801\u5305\uFF0C\u522B\u4EBA\u624D\u4F7F\u7528\u4E0B\u8F7D\u5B89\u88C5</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ python setup.py upload
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,54),G=e("\u6216\u8005\u4E5F\u53EF\u4EE5\u4F7F\u7528 "),J=s("code",null,"twine",-1),K=e(" \u5DE5\u5177\u6CE8\u518C\u4E0A\u4F20\uFF0C\u5B83\u662F\u4E00\u4E2A\u4E13\u95E8\u7528\u4E8E\u4E0E pypi \u8FDB\u884C\u4EA4\u4E92\u7684\u5DE5\u5177\uFF0C\u8BE6\u60C5\u53EF\u4EE5\u53C2\u8003\u5B98\u7F51\uFF1A"),Q={href:"https://link.zhihu.com/?target=https%3A//www.ctolib.com/twine.html%EF%BC%8C%E8%BF%99%E9%87%8C%E4%B8%8D%E8%AF%A6%E7%BB%86%E8%AE%B2%E4%BA%86%E3%80%82",target:"_blank",rel:"noopener noreferrer"},Y=e("https://www.ctolib.com/twine.html\uFF0C\u8FD9\u91CC\u4E0D\u8BE6\u7EC6\u8BB2\u4E86\u3002"),ss=s("h2",{id:"\u53C2\u8003\u6587\u7AE0",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u53C2\u8003\u6587\u7AE0","aria-hidden":"true"},"#"),e(" \u53C2\u8003\u6587\u7AE0")],-1),es={href:"https://link.zhihu.com/?target=http%3A//blog.konghy.cn/2018/04/29/setup-dot-py/",target:"_blank",rel:"noopener noreferrer"},ns=e("http://blog.konghy.cn/2018/04/29/setup-dot-py/"),as={href:"https://link.zhihu.com/?target=https%3A//note.qidong.name/2018/01/python-setup-requires/",target:"_blank",rel:"noopener noreferrer"},ps=e("https://note.qidong.name/2018/01/python-setup-requires/");function ts(ls,rs){const n=l("ExternalLinkIcon");return o(),r(i,null,[u,s("blockquote",null,[s("p",null,[d,s("a",b,[m,a(n)])])]),h,s("ul",null,[s("li",null,[g,s("a",_,[y,a(n)]),x,v,f]),q]),P,s("p",null,[k,s("a",w,[E,a(n)])]),z,s("p",null,[A,$,s("a",L,[I,a(n)])]),B,s("p",null,[S,s("a",W,[D,a(n)])]),F,s("p",null,[M,s("a",R,[T,a(n)])]),j,s("p",null,[C,N,s("a",V,[U,O,H,a(n)]),X]),Z,s("p",null,[G,J,K,s("a",Q,[Y,a(n)])]),ss,s("ul",null,[s("li",null,[s("a",es,[ns,a(n)])]),s("li",null,[s("a",as,[ps,a(n)])])])],64)}var os=t(c,[["render",ts],["__file","python-setup.html.vue"]]);export{os as default};
