const t=JSON.parse('{"key":"v-e16cc5fc","path":"/cloudnative/etcd/monitor.html","title":"Etcd 监控","lang":"zh-CN","frontmatter":{"category":"云原生","tag":["etcd"],"description":"Etcd 监控 重点监控指标 指标分类 健康状态 USE 方法（系统） 使用率 饱和度 错误 RED 方法（应用） 请求速率 错误率 延迟 指标分类 指标 释义 健康状态 实例健康状态 etcd是一个分布式系统，由多个成员节点组成。监控etcd成员节点的状态可以帮助你了解集群中节点的健康状况，发现掉线或者异常节点。 健康状态 主从状态 健康状态 etcd leader切换统计 频繁的领导者变更会严重影响 etcd 的性能。这也意味着领导者不稳定，可能是由于网络连接问题或对 etcd 集群施加的过载负荷导致的。 健康状态 心跳 etcd集群中的节点通过发送心跳来保持彼此之间的连接。监控丢失的心跳可以帮助你发现etcd节点之间的通信问题或者网络延迟。 RED 方法 QPS RED 方法 请求错误率 监控etcd的错误率可以帮助你发现etcd操作中的潜在问题。高错误率可能表明集群遇到了故障或其他异常情况。 RED 方法 请求延迟 监控etcd的请求延迟可以帮助你了解API请求的处理时间。较高的延迟可能表明etcd正面临负载压力或性能问题。 RED 方法 磁盘同步（WAL/DB fsync）耗时 高磁盘操作延迟（wal_fsync_duration_seconds或backend_commit_duration_seconds）通常表示磁盘问题。它可能会导致高请求延迟或使群集不稳定。 RED 方法 同步延迟 如果集群正常运行，已提交的提案应该随着时间的推移而增加。重要的是要在集群的所有成员中监控这个指标；如果单个成员与其领导节点之间存在持续较大的滞后，这表明该成员运行缓慢或存在异常。 RED 方法 提案失败次数 失败的提案通常与两个问题相关：与领导选举相关的暂时性故障或由于集群丧失法定人数而导致的较长时间的停机。 RED 方法 快照处理时间 etcd定期创建快照以备份数据。监控快照处理时间可以帮助你了解etcd备份的性能，确保备份任务能够及时完成。 RED 方法 watcher 数量 监控etcd集群当前连接到etcd的客户端数量。如果连接数过高，可能需要调整etcd的配置或者增加集群的容量。 USE 方法 CPU 使用率 USE 方法 内存使用量 USE 方法 打开文件数 USE 方法 存储空间使用率 监控etcd存储空间的使用率可以帮助你确保etcd有足够的空间存储配置数据。如果使用率接近或达到上限，可能需要考虑扩展存储容量或者清理无用的数据。","head":[["meta",{"property":"og:url","content":"https://clay-wangzhi.com/cloudnative/etcd/monitor.html"}],["meta",{"property":"og:site_name","content":"SRE运维进阶之路"}],["meta",{"property":"og:title","content":"Etcd 监控"}],["meta",{"property":"og:description","content":"Etcd 监控 重点监控指标 指标分类 健康状态 USE 方法（系统） 使用率 饱和度 错误 RED 方法（应用） 请求速率 错误率 延迟 指标分类 指标 释义 健康状态 实例健康状态 etcd是一个分布式系统，由多个成员节点组成。监控etcd成员节点的状态可以帮助你了解集群中节点的健康状况，发现掉线或者异常节点。 健康状态 主从状态 健康状态 etcd leader切换统计 频繁的领导者变更会严重影响 etcd 的性能。这也意味着领导者不稳定，可能是由于网络连接问题或对 etcd 集群施加的过载负荷导致的。 健康状态 心跳 etcd集群中的节点通过发送心跳来保持彼此之间的连接。监控丢失的心跳可以帮助你发现etcd节点之间的通信问题或者网络延迟。 RED 方法 QPS RED 方法 请求错误率 监控etcd的错误率可以帮助你发现etcd操作中的潜在问题。高错误率可能表明集群遇到了故障或其他异常情况。 RED 方法 请求延迟 监控etcd的请求延迟可以帮助你了解API请求的处理时间。较高的延迟可能表明etcd正面临负载压力或性能问题。 RED 方法 磁盘同步（WAL/DB fsync）耗时 高磁盘操作延迟（wal_fsync_duration_seconds或backend_commit_duration_seconds）通常表示磁盘问题。它可能会导致高请求延迟或使群集不稳定。 RED 方法 同步延迟 如果集群正常运行，已提交的提案应该随着时间的推移而增加。重要的是要在集群的所有成员中监控这个指标；如果单个成员与其领导节点之间存在持续较大的滞后，这表明该成员运行缓慢或存在异常。 RED 方法 提案失败次数 失败的提案通常与两个问题相关：与领导选举相关的暂时性故障或由于集群丧失法定人数而导致的较长时间的停机。 RED 方法 快照处理时间 etcd定期创建快照以备份数据。监控快照处理时间可以帮助你了解etcd备份的性能，确保备份任务能够及时完成。 RED 方法 watcher 数量 监控etcd集群当前连接到etcd的客户端数量。如果连接数过高，可能需要调整etcd的配置或者增加集群的容量。 USE 方法 CPU 使用率 USE 方法 内存使用量 USE 方法 打开文件数 USE 方法 存储空间使用率 监控etcd存储空间的使用率可以帮助你确保etcd有足够的空间存储配置数据。如果使用率接近或达到上限，可能需要考虑扩展存储容量或者清理无用的数据。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-06-18T13:22:29.000Z"}],["meta",{"property":"article:author","content":"Clay"}],["meta",{"property":"article:tag","content":"etcd"}],["meta",{"property":"article:modified_time","content":"2023-06-18T13:22:29.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Etcd 监控\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-06-18T13:22:29.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Clay\\",\\"url\\":\\"https://clay-wangzhi.com\\"}]}"]]},"headers":[{"level":2,"title":"重点监控指标","slug":"重点监控指标","link":"#重点监控指标","children":[]},{"level":2,"title":"使用 kube-prometheus 收集 etcd 指标","slug":"使用-kube-prometheus-收集-etcd-指标","link":"#使用-kube-prometheus-收集-etcd-指标","children":[{"level":3,"title":"http 模式（推荐）","slug":"http-模式-推荐","link":"#http-模式-推荐","children":[]},{"level":3,"title":"https 模式","slug":"https-模式","link":"#https-模式","children":[]}]},{"level":2,"title":"大盘展示","slug":"大盘展示","link":"#大盘展示","children":[]},{"level":2,"title":"巡检","slug":"巡检","link":"#巡检","children":[]}],"git":{"createdTime":1687094549000,"updatedTime":1687094549000,"contributors":[{"name":"clay-wangzhi","email":"clay.wangzhi@gmail.com","commits":1}]},"readingTime":{"minutes":3.79,"words":1136},"filePathRelative":"cloudnative/etcd/monitor.md","localizedDate":"2023年6月18日","excerpt":"<h1> Etcd 监控</h1>\\n<h2> 重点监控指标</h2>\\n<p>指标分类</p>\\n<ul>\\n<li>健康状态</li>\\n<li>USE 方法（系统）\\n<ul>\\n<li>使用率</li>\\n<li>饱和度</li>\\n<li>错误</li>\\n</ul>\\n</li>\\n<li>RED 方法（应用）\\n<ul>\\n<li>请求速率</li>\\n<li>错误率</li>\\n<li>延迟</li>\\n</ul>\\n</li>\\n</ul>\\n<table>\\n<thead>\\n<tr>\\n<th>指标分类</th>\\n<th>指标</th>\\n<th>释义</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td>健康状态</td>\\n<td>实例健康状态</td>\\n<td>etcd是一个分布式系统，由多个成员节点组成。监控etcd成员节点的状态可以帮助你了解集群中节点的健康状况，发现掉线或者异常节点。</td>\\n</tr>\\n<tr>\\n<td>健康状态</td>\\n<td>主从状态</td>\\n<td></td>\\n</tr>\\n<tr>\\n<td>健康状态</td>\\n<td>etcd leader切换统计</td>\\n<td>频繁的领导者变更会严重影响 etcd 的性能。这也意味着领导者不稳定，可能是由于网络连接问题或对 etcd 集群施加的过载负荷导致的。</td>\\n</tr>\\n<tr>\\n<td>健康状态</td>\\n<td>心跳</td>\\n<td>etcd集群中的节点通过发送心跳来保持彼此之间的连接。监控丢失的心跳可以帮助你发现etcd节点之间的通信问题或者网络延迟。</td>\\n</tr>\\n<tr>\\n<td>RED 方法</td>\\n<td>QPS</td>\\n<td></td>\\n</tr>\\n<tr>\\n<td>RED 方法</td>\\n<td>请求错误率</td>\\n<td>监控etcd的错误率可以帮助你发现etcd操作中的潜在问题。高错误率可能表明集群遇到了故障或其他异常情况。</td>\\n</tr>\\n<tr>\\n<td>RED 方法</td>\\n<td>请求延迟</td>\\n<td>监控etcd的请求延迟可以帮助你了解API请求的处理时间。较高的延迟可能表明etcd正面临负载压力或性能问题。</td>\\n</tr>\\n<tr>\\n<td>RED 方法</td>\\n<td>磁盘同步（WAL/DB fsync）耗时</td>\\n<td>高磁盘操作延迟（wal_fsync_duration_seconds或backend_commit_duration_seconds）通常表示磁盘问题。它可能会导致高请求延迟或使群集不稳定。</td>\\n</tr>\\n<tr>\\n<td>RED 方法</td>\\n<td>同步延迟</td>\\n<td>如果集群正常运行，已提交的提案应该随着时间的推移而增加。重要的是要在集群的所有成员中监控这个指标；如果单个成员与其领导节点之间存在持续较大的滞后，这表明该成员运行缓慢或存在异常。</td>\\n</tr>\\n<tr>\\n<td>RED 方法</td>\\n<td>提案失败次数</td>\\n<td>失败的提案通常与两个问题相关：与领导选举相关的暂时性故障或由于集群丧失法定人数而导致的较长时间的停机。</td>\\n</tr>\\n<tr>\\n<td>RED 方法</td>\\n<td>快照处理时间</td>\\n<td>etcd定期创建快照以备份数据。监控快照处理时间可以帮助你了解etcd备份的性能，确保备份任务能够及时完成。</td>\\n</tr>\\n<tr>\\n<td>RED 方法</td>\\n<td>watcher 数量</td>\\n<td>监控etcd集群当前连接到etcd的客户端数量。如果连接数过高，可能需要调整etcd的配置或者增加集群的容量。</td>\\n</tr>\\n<tr>\\n<td>USE 方法</td>\\n<td>CPU 使用率</td>\\n<td></td>\\n</tr>\\n<tr>\\n<td>USE 方法</td>\\n<td>内存使用量</td>\\n<td></td>\\n</tr>\\n<tr>\\n<td>USE 方法</td>\\n<td>打开文件数</td>\\n<td></td>\\n</tr>\\n<tr>\\n<td>USE 方法</td>\\n<td>存储空间使用率</td>\\n<td>监控etcd存储空间的使用率可以帮助你确保etcd有足够的空间存储配置数据。如果使用率接近或达到上限，可能需要考虑扩展存储容量或者清理无用的数据。</td>\\n</tr>\\n</tbody>\\n</table>","copyright":{"author":"Clay"},"autoDesc":true}');export{t as data};
