import{_ as o,r as l,c as r,a as s,b as a,F as i,e as t,d as e,o as c}from"./app.4908d213.js";const p={},b=t('<h1 id="\u4F7F\u7528-kubeasz-\u5B89\u88C5-kubernetes" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-kubeasz-\u5B89\u88C5-kubernetes" aria-hidden="true">#</a> \u4F7F\u7528 kubeasz \u5B89\u88C5 kubernetes</h1><blockquote><p>github \u5730\u5740\uFF1Ahttps://github.com/easzlab/kubeasz</p></blockquote><p>\u9879\u76EE\u81F4\u529B\u4E8E\u63D0\u4F9B\u5FEB\u901F\u90E8\u7F72\u9AD8\u53EF\u7528<code>k8s</code>\u96C6\u7FA4\u7684\u5DE5\u5177, \u540C\u65F6\u4E5F\u52AA\u529B\u6210\u4E3A<code>k8s</code>\u5B9E\u8DF5\u3001\u4F7F\u7528\u7684\u53C2\u8003\u4E66\uFF1B\u57FA\u4E8E\u4E8C\u8FDB\u5236\u65B9\u5F0F\u90E8\u7F72\u548C\u5229\u7528<code>ansible-playbook</code>\u5B9E\u73B0\u81EA\u52A8\u5316\uFF1B\u65E2\u63D0\u4F9B\u4E00\u952E\u5B89\u88C5\u811A\u672C, \u4E5F\u53EF\u4EE5\u6839\u636E<code>\u5B89\u88C5\u6307\u5357</code>\u5206\u6B65\u6267\u884C\u5B89\u88C5\u5404\u4E2A\u7EC4\u4EF6\u3002</p>',3),d=s("strong",null,"\u96C6\u7FA4\u7279\u6027",-1),u=e(),h=s("code",null,"TLS",-1),_=e("\u53CC\u5411\u8BA4\u8BC1\u3001"),m=s("code",null,"RBAC",-1),k=e("\u6388\u6743\u3001"),g={href:"https://github.com/easzlab/kubeasz/blob/master/docs/setup/00-planning_and_overall_intro.md#ha-architecture",target:"_blank",rel:"noopener noreferrer"},f=e("\u591AMaster\u9AD8\u53EF\u7528"),z=e("\u3001\u652F\u6301"),v=s("code",null,"Network Policy",-1),x=e("\u3001\u5907\u4EFD\u6062\u590D\u3001"),y={href:"https://github.com/easzlab/kubeasz/blob/master/docs/setup/offline_install.md",target:"_blank",rel:"noopener noreferrer"},w=e("\u79BB\u7EBF\u5B89\u88C5"),I=s("li",null,[s("strong",null,"\u96C6\u7FA4\u7248\u672C"),e(" kubernetes v1.18, v1.19, v1.20, v1.21")],-1),q=s("li",null,[s("strong",null,"\u64CD\u4F5C\u7CFB\u7EDF"),e(" CentOS/RedHat 7, Debian 9/10, Ubuntu 16.04/18.04/20.04")],-1),N=s("strong",null,"\u8FD0\u884C\u65F6",-1),B=e(" docker 19.03.x, 20.10.x "),C={href:"https://github.com/easzlab/kubeasz/blob/master/docs/setup/containerd.md",target:"_blank",rel:"noopener noreferrer"},L=e("containerd"),P=e(" v1.4.4"),V=s("strong",null,"\u7F51\u7EDC",-1),E=e(),O={href:"https://github.com/easzlab/kubeasz/blob/master/docs/setup/network-plugin/calico.md",target:"_blank",rel:"noopener noreferrer"},S=e("calico"),T=e(", "),$={href:"https://github.com/easzlab/kubeasz/blob/master/docs/setup/network-plugin/cilium.md",target:"_blank",rel:"noopener noreferrer"},D=e("cilium"),F=e(", "),R={href:"https://github.com/easzlab/kubeasz/blob/master/docs/setup/network-plugin/flannel.md",target:"_blank",rel:"noopener noreferrer"},A=e("flannel"),H=e(", "),K={href:"https://github.com/easzlab/kubeasz/blob/master/docs/setup/network-plugin/kube-ovn.md",target:"_blank",rel:"noopener noreferrer"},M=e("kube-ovn"),U=e(", "),j={href:"https://github.com/easzlab/kubeasz/blob/master/docs/setup/network-plugin/kube-router.md",target:"_blank",rel:"noopener noreferrer"},G=e("kube-router"),J=t(`<h2 id="\u96C6\u7FA4\u89C4\u5212\u548C\u57FA\u7840\u53C2\u6570\u8BBE\u5B9A" tabindex="-1"><a class="header-anchor" href="#\u96C6\u7FA4\u89C4\u5212\u548C\u57FA\u7840\u53C2\u6570\u8BBE\u5B9A" aria-hidden="true">#</a> \u96C6\u7FA4\u89C4\u5212\u548C\u57FA\u7840\u53C2\u6570\u8BBE\u5B9A</h2><p><img src="https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/ha-2x.gif" alt="" loading="lazy"></p><blockquote><p>\u26A0\uFE0F \u6CE8\u610F\uFF1A</p><ul><li>\u65F6\u95F4\u540C\u6B65</li><li>\u7CFB\u7EDF\u5E72\u51C0</li><li>\u65B0\u7684\u7A33\u5B9A\u5185\u6838</li><li>worker \u8282\u70B9 <code>/var/lib/docker/</code>\u3001<code>/var/lib/kubelet</code> \u76EE\u5F55\u78C1\u76D8\u7A7A\u95F4\u8981\u5927\u4E00\u4E9B</li></ul></blockquote><h2 id="\u90E8\u7F72\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#\u90E8\u7F72\u6B65\u9AA4" aria-hidden="true">#</a> \u90E8\u7F72\u6B65\u9AA4</h2><h3 id="_1-\u5728\u90E8\u7F72\u8282\u70B9\u5B89\u88C5ansible\u53CA\u51C6\u5907ssh\u514D\u5BC6\u767B\u9646" tabindex="-1"><a class="header-anchor" href="#_1-\u5728\u90E8\u7F72\u8282\u70B9\u5B89\u88C5ansible\u53CA\u51C6\u5907ssh\u514D\u5BC6\u767B\u9646" aria-hidden="true">#</a> 1. \u5728\u90E8\u7F72\u8282\u70B9\u5B89\u88C5ansible\u53CA\u51C6\u5907ssh\u514D\u5BC6\u767B\u9646</h3><ul><li>1.1 \u5B89\u88C5ansible</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u6CE8\u610Fpip 21.0\u4EE5\u540E\u4E0D\u518D\u652F\u6301python2\u548Cpython3.5\uFF0C\u9700\u8981\u5982\u4E0B\u5B89\u88C5</span>
<span class="token comment"># To install pip for Python 2.7 install it from https://bootstrap.pypa.io/2.7/ :</span>
<span class="token function">curl</span> -O https://bootstrap.pypa.io/pip/2.7/get-pip.py
python get-pip.py
python -m pip <span class="token function">install</span> --upgrade <span class="token string">&quot;pip &lt; 21.0&quot;</span>
 
<span class="token comment"># pip\u5B89\u88C5ansible(\u56FD\u5185\u5982\u679C\u5B89\u88C5\u592A\u6162\u53EF\u4EE5\u76F4\u63A5\u7528pip\u963F\u91CC\u4E91\u52A0\u901F)</span>
pip <span class="token function">install</span> ansible -i https://mirrors.aliyun.com/pypi/simple/
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>1.2 \u5728ansible\u63A7\u5236\u7AEF\u914D\u7F6E\u514D\u5BC6\u7801\u767B\u5F55</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ssh-keygen -t rsa -b <span class="token number">2048</span> -N <span class="token string">&#39;&#39;</span> -f ~/.ssh/id_rsa

ssh-copy-id <span class="token variable">$IPs</span> <span class="token comment">#$IPs\u4E3A\u6240\u6709\u8282\u70B9\u5730\u5740\u5305\u62EC\u81EA\u8EAB\uFF0C\u6309\u7167\u63D0\u793A\u8F93\u5165yes \u548Croot\u5BC6\u7801</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-\u5728\u90E8\u7F72\u8282\u70B9\u7F16\u6392k8s\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#_2-\u5728\u90E8\u7F72\u8282\u70B9\u7F16\u6392k8s\u5B89\u88C5" aria-hidden="true">#</a> 2. \u5728\u90E8\u7F72\u8282\u70B9\u7F16\u6392k8s\u5B89\u88C5</h3><ul><li>2.1 \u4E0B\u8F7D\u9879\u76EE\u6E90\u7801\u3001\u4E8C\u8FDB\u5236\u53CA\u79BB\u7EBF\u955C\u50CF</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u4E0B\u8F7D\u5DE5\u5177\u811A\u672Cezdown</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">release</span><span class="token operator">=</span><span class="token number">3.0</span>.0
<span class="token function">curl</span> -C- -fLO --retry <span class="token number">3</span> https://github.com/easzlab/kubeasz/releases/download/<span class="token variable">\${release}</span>/ezdown
<span class="token function">chmod</span> +x ./ezdown

<span class="token comment"># \u4F7F\u7528\u5DE5\u5177\u811A\u672C\u4E0B\u8F7D</span>
./ezdown -k v1.18.15 -D
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u4E0A\u8FF0\u811A\u672C\u8FD0\u884C\u6210\u529F\u540E\uFF0C\u6240\u6709\u6587\u4EF6\uFF08kubeasz\u4EE3\u7801\u3001\u4E8C\u8FDB\u5236\u3001\u79BB\u7EBF\u955C\u50CF\uFF09\u5747\u5DF2\u6574\u7406\u597D\u653E\u5165\u76EE\u5F55<code>/etc/kubeasz</code></p><ul><li>2.2 \u521B\u5EFA\u96C6\u7FA4\u914D\u7F6E\u5B9E\u4F8B</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">ln</span> -s /etc/kubeasz/ezctl /usr/bin/ezctl
ezctl new k8s-test
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u7136\u540E\u6839\u636E\u63D0\u793A\u914D\u7F6E<code>/etc/kubeasz/clusters/k8s-test/hosts</code>\u548C <code>/etc/kubeasz/clusters/k8s-test/config.yml</code></p><p>\u6839\u636E\u524D\u9762\u8282\u70B9\u89C4\u5212\u4FEE\u6539hosts \u6587\u4EF6\u548C\u5176\u4ED6\u96C6\u7FA4\u5C42\u9762\u7684\u4E3B\u8981\u914D\u7F6E\u9009\u9879\uFF1B\u5176\u4ED6\u96C6\u7FA4\u7EC4\u4EF6\u7B49\u914D\u7F6E\u9879\u53EF\u4EE5\u5728<code>config.yml</code>\u6587\u4EF6\u4E2D\u4FEE\u6539</p><ul><li>2.3 \u5F00\u59CB\u5B89\u88C5</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u4E00\u952E\u5B89\u88C5</span>
ezctl setup k8s-test all
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,19);function Q(W,X){const n=l("ExternalLinkIcon");return c(),r(i,null,[b,s("ul",null,[s("li",null,[d,u,h,_,m,k,s("a",g,[f,a(n)]),z,v,x,s("a",y,[w,a(n)])]),I,q,s("li",null,[N,B,s("a",C,[L,a(n)]),P]),s("li",null,[V,E,s("a",O,[S,a(n)]),T,s("a",$,[D,a(n)]),F,s("a",R,[A,a(n)]),H,s("a",K,[M,a(n)]),U,s("a",j,[G,a(n)])])]),J],64)}var Z=o(p,[["render",Q],["__file","kubeasz-install-k8s.html.vue"]]);export{Z as default};
