const t=JSON.parse('{"key":"v-a1ff8004","path":"/basic/network/kernel-para-opt.html","title":"内核参数调优","lang":"zh-CN","frontmatter":{"category":"计算机网络","description":"内核参数调优 TCP 三次握手中需要调优的内核参数 \\tSYN 半连接队列 \\t\\t\\t\\t\\t\\t\\tnet.ipv4.tcp_max_syn_backlog \\t半连接队列满时 开启syncookies \\t\\t\\tnet.ipv4.tcp_syncookies = 1 \\t全连接队列 大小取的 min(somaxconn, backlog)最小值，所以调整两个参数 \\tnet.core.somaxconn net.core.somaxconn=65535 \\tnginx配置文件调整 listen 80 backlog=8192 \\ttcp_synack_retries 值调小 \\t开始 TCP Fast Open,减少TCP建立连接的时延 \\techo 3 &gt; /proc/sys/net/ipv4/tcp_fastopen TCP 四次挥手中需要调优的内核参数 \\tTIME_WAIT 状态的连接数量，会占用一定资源 net.ipv4.tcp_max_tw_buckets = 6000 \\t开启端口复用，被 TIME_WAIT 状态占用的端口，还能用到新建的连接中 net.ipv4.tcp_tw_reuse=1 \\t减小FIN_WAIT2 状态的参数 net.ipv4.tcp_fin_timeout=15 \\t增大本地端口的范围，这样就可以支持更多连接，提高整体的并发能力。 net.ipv4.ip_local_port_range=\\"1024 65535\\" \\t 数据传输优化 \\t启用窗口扩大因子功能，net.ipv4.tcp_window_scaling = 1 \\t调整发送缓冲区 net.ipv4.tcp_rmem = 4096 87380 4194304 \\t调整接收缓冲区 net.ipv4.tcp_wmem = 4096 65536 4194304 \\t调整内存范围 net.ipv4.tcp_mem = 524288 699050 1048576","head":[["meta",{"property":"og:url","content":"https://clay-wangzhi.com/basic/network/kernel-para-opt.html"}],["meta",{"property":"og:site_name","content":"SRE运维进阶之路"}],["meta",{"property":"og:title","content":"内核参数调优"}],["meta",{"property":"og:description","content":"内核参数调优 TCP 三次握手中需要调优的内核参数 \\tSYN 半连接队列 \\t\\t\\t\\t\\t\\t\\tnet.ipv4.tcp_max_syn_backlog \\t半连接队列满时 开启syncookies \\t\\t\\tnet.ipv4.tcp_syncookies = 1 \\t全连接队列 大小取的 min(somaxconn, backlog)最小值，所以调整两个参数 \\tnet.core.somaxconn net.core.somaxconn=65535 \\tnginx配置文件调整 listen 80 backlog=8192 \\ttcp_synack_retries 值调小 \\t开始 TCP Fast Open,减少TCP建立连接的时延 \\techo 3 &gt; /proc/sys/net/ipv4/tcp_fastopen TCP 四次挥手中需要调优的内核参数 \\tTIME_WAIT 状态的连接数量，会占用一定资源 net.ipv4.tcp_max_tw_buckets = 6000 \\t开启端口复用，被 TIME_WAIT 状态占用的端口，还能用到新建的连接中 net.ipv4.tcp_tw_reuse=1 \\t减小FIN_WAIT2 状态的参数 net.ipv4.tcp_fin_timeout=15 \\t增大本地端口的范围，这样就可以支持更多连接，提高整体的并发能力。 net.ipv4.ip_local_port_range=\\"1024 65535\\" \\t 数据传输优化 \\t启用窗口扩大因子功能，net.ipv4.tcp_window_scaling = 1 \\t调整发送缓冲区 net.ipv4.tcp_rmem = 4096 87380 4194304 \\t调整接收缓冲区 net.ipv4.tcp_wmem = 4096 65536 4194304 \\t调整内存范围 net.ipv4.tcp_mem = 524288 699050 1048576"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-04-19T13:08:31.000Z"}],["meta",{"property":"article:author","content":"Clay"}],["meta",{"property":"article:modified_time","content":"2023-04-19T13:08:31.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"内核参数调优\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-04-19T13:08:31.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Clay\\",\\"url\\":\\"https://clay-wangzhi.com\\"}]}"]]},"headers":[],"git":{"createdTime":1681909711000,"updatedTime":1681909711000,"contributors":[{"name":"clay-wangzhi","email":"clay.wangzhi@gmail.com","commits":1}]},"readingTime":{"minutes":0.85,"words":256},"filePathRelative":"basic/network/kernel-para-opt.md","localizedDate":"2023年4月19日","excerpt":"<h1> 内核参数调优</h1>\\n<div class=\\"language-text line-numbers-mode\\" data-ext=\\"text\\"><pre class=\\"language-text\\"><code>TCP 三次握手中需要调优的内核参数\\n\\tSYN 半连接队列 \\t\\t\\t\\t\\t\\t\\tnet.ipv4.tcp_max_syn_backlog\\n\\t半连接队列满时 开启syncookies \\t\\t\\tnet.ipv4.tcp_syncookies = 1\\n\\n\\t全连接队列 大小取的 min(somaxconn, backlog)最小值，所以调整两个参数\\n\\tnet.core.somaxconn net.core.somaxconn=65535\\n\\tnginx配置文件调整 listen 80 backlog=8192\\n\\n\\ttcp_synack_retries 值调小\\n\\t开始 TCP Fast Open,减少TCP建立连接的时延\\n\\techo 3 &gt; /proc/sys/net/ipv4/tcp_fastopen\\n\\nTCP 四次挥手中需要调优的内核参数\\n\\tTIME_WAIT 状态的连接数量，会占用一定资源 net.ipv4.tcp_max_tw_buckets = 6000\\n\\t开启端口复用，被 TIME_WAIT 状态占用的端口，还能用到新建的连接中 net.ipv4.tcp_tw_reuse=1\\n\\t减小FIN_WAIT2 状态的参数 net.ipv4.tcp_fin_timeout=15\\n\\t增大本地端口的范围，这样就可以支持更多连接，提高整体的并发能力。 net.ipv4.ip_local_port_range=\\"1024 65535\\"\\n\\t\\n数据传输优化\\n\\t启用窗口扩大因子功能，net.ipv4.tcp_window_scaling = 1\\n\\t调整发送缓冲区 net.ipv4.tcp_rmem = 4096 87380 4194304\\n\\t调整接收缓冲区 net.ipv4.tcp_wmem = 4096 65536 4194304\\n\\t调整内存范围 net.ipv4.tcp_mem = 524288 699050 1048576\\n\\n\\t\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","copyright":{"author":"Clay"},"autoDesc":true}');export{t as data};
