(window.webpackJsonp=window.webpackJsonp||[]).push([[184],{1196:function(s,n,a){"use strict";a.r(n);var e=a(1),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"nginx升级加固ssl-tls协议信息泄露漏洞-cve-2016-2183-和http服务器的缺省banner漏洞"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx升级加固ssl-tls协议信息泄露漏洞-cve-2016-2183-和http服务器的缺省banner漏洞"}},[s._v("#")]),s._v(" Nginx升级加固SSL/TLS协议信息泄露漏洞(CVE-2016-2183)和HTTP服务器的缺省banner漏洞")]),s._v(" "),a("blockquote",[a("p",[s._v("⚠️ 注意：要根据实际情况进行修改，这只是大体的思路")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd /tmp\nwget  https://www.openssl.org/source/openssl-1.1.0k.tar.gz\ntar zxvf openssl-1.1.0k.tar.gz -C /usr/local\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# 打开nginx源文件下的/usr/local/src/nginx-1.9.9/auto/lib/openssl/conf文件：\nvi /root/nginx-1.14.2/auto/lib/openssl/conf\n# 找到以下代码,差不多三四十行\nCORE_INCS="$CORE_INCS $OPENSSL/.openssl/include"\nCORE_DEPS="$CORE_DEPS $OPENSSL/.openssl/include/openssl/ssl.h"\nCORE_LIBS="$CORE_LIBS $OPENSSL/.openssl/lib/libssl.a"\nCORE_LIBS="$CORE_LIBS $OPENSSL/.openssl/lib/libcrypto.a"\nCORE_LIBS="$CORE_LIBS $NGX_LIBDL"\n# 修改成以下代码\nCORE_INCS="$CORE_INCS $OPENSSL/include"\nCORE_DEPS="$CORE_DEPS $OPENSSL/include/openssl/ssl.h"\nCORE_LIBS="$CORE_LIBS $OPENSSL/lib/libssl.a"\nCORE_LIBS="$CORE_LIBS $OPENSSL/lib/libcrypto.a"\nCORE_LIBS="$CORE_LIBS $NGX_LIBDL"\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd /usr/local/openssl-1.1.0k/\nmkdir lib\ncp libssl.a libcrypto.a lib\n\n./configure --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module --with-openssl=/usr/local/openssl-1.1.0k\nmake -j 8\ncd /usr/local/nginx/sbin/\ncp nginx nginx.bak\ncd /opt/nginx-1.16.1\ncp -f objs/nginx /usr/local/nginx/sbin/\n\nps -ef|grep nginx\nkill -USR2 `master 进程号`\n#关闭旧的woker进程，kill -WINCH旧的master进程号\nkill -WINCH `master 进程号`\n#关闭旧的master进程\nkill -QUIT `master 进程号`\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("h3",{attrs:{id:"nginx缺省banner修改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx缺省banner修改"}},[s._v("#")]),s._v(" Nginx缺省banner修改")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('[root@Test ~]# vim nginx-1.19.1/src/http/ngx_http_header_filter_module.c \n\n需要修改：\n\nstatic u_char ngx_http_server_string[] = "Server: nginx" CRLF;\nstatic u_char ngx_http_server_full_string[] = "Server: " NGINX_VER CRLF;\nstatic u_char ngx_http_server_build_string[] = "Server: " NGINX_VER_BUILD CRLF;\n\n修改成：\n\nstatic u_char ngx_http_server_string[] = "Server: unknow" CRLF;\nstatic u_char ngx_http_server_full_string[] = "Server: unknow"  CRLF;\nstatic u_char ngx_http_server_build_string[] = "Server: unknow"  CRLF;\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("然后重新编译，热升级nginx")])])}),[],!1,null,null,null);n.default=t.exports}}]);