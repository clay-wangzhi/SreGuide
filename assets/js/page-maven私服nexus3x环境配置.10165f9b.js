(window.webpackJsonp=window.webpackJsonp||[]).push([[274],{989:function(s,n,a){"use strict";a.r(n);var e=a(1),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"maven私服nexus3-x环境配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#maven私服nexus3-x环境配置"}},[s._v("#")]),s._v(" maven私服nexus3.x环境配置")]),s._v(" "),a("blockquote",[a("p",[s._v("转载自："),a("a",{attrs:{href:"https://www.xncoding.com/2017/09/02/tool/nexus.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("maven私服nexus3.x环境配置 | 飞污熊博客"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("私服是指私有服务器，是架设在局域网的一种特殊的远程仓库，目的是代理远程仓库及部署第三方构建。 有了私服之后，当 Maven 需要下载构件时，直接请求私服，私服上存在则下载到本地仓库； 否则，私服请求外部的远程仓库，将构件下载到私服，再提供给本地仓库下载。")]),s._v(" "),a("p",[s._v("Nexus是一个强大的Maven仓库管理器，它极大地简化了本地内部仓库的维护和外部仓库的访问。 如果使用了公共的Maven仓库服务器，可以从Maven中央仓库下载所需要的构件（Artifact），但这通常不是一个好的做法。 正常做法是在本地架设一个本地Maven仓库服务器，利用Nexus私服可以只在一个地方就能够完全控制访问和部署在你所维护仓库中的每个Artifact。")]),s._v(" "),a("h2",{attrs:{id:"nexus优点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nexus优点"}},[s._v("#")]),s._v(" Nexus优点")]),s._v(" "),a("p",[s._v("为什么要构建Nexus私服？好处我随便列几点：")]),s._v(" "),a("ul",[a("li",[s._v("Nexus在代理远程仓库的同时维护本地仓库，以降低中央仓库的负荷,节省外网带宽和时间，Nexus私服就可以满足这样的需要。")]),s._v(" "),a("li",[s._v("Nexus是一套”开箱即用”的系统不需要数据库，它使用文件系统加Lucene来组织数据。")]),s._v(" "),a("li",[s._v("Nexus使用ExtJS来开发界面，利用Restlet来提供完整的REST APIs，并能通过插件和各种IDE集成。")]),s._v(" "),a("li",[s._v("Nexus支持WebDAV与LDAP安全身份认证。")]),s._v(" "),a("li",[s._v("Nexus还提供了强大的仓库管理功能，构件搜索功能，它基于REST，提供友好的UI，占用较少的内存，基于简单文件系统而非数据库。")])]),s._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("p",[s._v("我的环境是centos7.2 + JDK8 + Maven3，首先需要安装 JDK8 和 Maven3，这里不多讲。")]),s._v(" "),a("p",[s._v("去官网下载最新的 "),a("a",{attrs:{href:"https://www.sonatype.com/download-oss-sonatype",target:"_blank",rel:"noopener noreferrer"}},[s._v("download nexus"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("下载文件nexus-3.6.0-02-unix.tar.gz，解压缩。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("tar zxf nexus-3.6.0-02-unix.tar.gz -C /usr/local/\ncd /usr/local/\nmv nexus-3.6.0-02/ nexus\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("启动：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("./nexus/bin/nexus start\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("默认端口8081，如果开了防火墙，就把这个端口放开：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("firewall-cmd --zone=public --add-port=8081/tcp --permanent\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("启动之后，运行命令"),a("code",[s._v("lsof -i:8081")]),s._v("可查看是否成功启动了。")]),s._v(" "),a("p",[s._v("Nexus默认的端口是8081，可以在etc/nexus-default.properties配置中修改。")]),s._v(" "),a("p",[s._v("Nexus默认的用户名密码是admin/admin123")]),s._v(" "),a("p",[s._v("当遇到奇怪问题时，重启nexus，重启后web界面要1分钟左右后才能访问。")]),s._v(" "),a("p",[s._v("Nexus的工作目录是"),a("code",[s._v("sonatype-work")]),s._v("（路径一般在nexus同级目录下），日志文件也在这里。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ls sonatype-work/nexus3/\nbackup  blobs  cache  db  elasticsearch  etc  generated-bundles  \nhealth-check  instances  keystores  lock  log  orient  port  tmp\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("访问："),a("a",{attrs:{href:"http://localhost:8081/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://localhost:8081"),a("OutboundLink")],1),s._v("，效果如下：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/nexus01.png",alt:"img"}})]),s._v(" "),a("p",[s._v("使用默认的管理员admin/admin123登录，进入管理界面：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/nexus02.png",alt:"img"}})]),s._v(" "),a("h2",{attrs:{id:"用户和角色"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用户和角色"}},[s._v("#")]),s._v(" 用户和角色")]),s._v(" "),a("p",[s._v("可以点击上面的”设置”图标，在”设置”里可以添加用户、角色，对接LDAP等的设置。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/nexus03.png",alt:"img"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/nexus04.png",alt:"img"}})]),s._v(" "),a("h2",{attrs:{id:"仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#仓库"}},[s._v("#")]),s._v(" 仓库")]),s._v(" "),a("p",[s._v("最核心的是仓库管理")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/nexus05.png",alt:"img"}})]),s._v(" "),a("p",[s._v("默认的这几个仓库我解释一下：")]),s._v(" "),a("ol",[a("li",[s._v("maven-central：maven中央库，默认从https://repo1.maven.org/maven2/拉取jar")]),s._v(" "),a("li",[s._v("maven-releases：私库发行版jar，初次安装请将"),a("code",[s._v("Deployment policy")]),s._v("设置为"),a("code",[s._v("Allow redeploy")])]),s._v(" "),a("li",[s._v("maven-snapshots：私库快照（调试版本）jar")]),s._v(" "),a("li",[s._v("maven-public：仓库分组，把上面三个仓库组合在一起对外提供服务，在本地maven基础配置"),a("code",[s._v("settings.xml")]),s._v("中使用。")])]),s._v(" "),a("p",[s._v("Nexus默认的仓库类型有以下四种：")]),s._v(" "),a("ol",[a("li",[s._v("group(仓库组类型)：又叫组仓库，用于方便开发人员自己设定的仓库；")]),s._v(" "),a("li",[s._v("hosted(宿主类型)：内部项目的发布仓库（内部开发人员，发布上去存放的仓库）；")]),s._v(" "),a("li",[s._v("proxy(代理类型)：从远程中央仓库中寻找数据的仓库（可以点击对应的仓库的Configuration页签下Remote Storage属性的值即被代理的远程仓库的路径）；")]),s._v(" "),a("li",[s._v("virtual(虚拟类型)：虚拟仓库（这个基本用不到，重点关注上面三个仓库的使用）；")])]),s._v(" "),a("p",[s._v("Policy(策略): 表示该仓库为发布(Release)版本仓库还是快照(Snapshot)版本仓库；")]),s._v(" "),a("p",[s._v("由于访问中央仓库有时候会比较慢，这里我添加一个阿里云的代理仓库，然后优先级放到默认中央库之前,， 阿里云的maven仓库url为"),a("code",[s._v("http://maven.aliyun.com/nexus/content/groups/public")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/nexus09.png",alt:"img"}})]),s._v(" "),a("p",[s._v("然后再public组里面讲这个"),a("code",[s._v("aliyun-proxy")]),s._v("仓库加入，排在"),a("code",[s._v("maven-central")]),s._v("之前即可。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/nexus10.png",alt:"img"}})]),s._v(" "),a("p",[s._v("** Nexus仓库分类的概念 **")]),s._v(" "),a("p",[s._v("1）Maven可直接从宿主仓库下载构件,也可以从代理仓库下载构件,而代理仓库间接的从远程仓库下载并缓存构件")]),s._v(" "),a("p",[s._v("2）为了方便,Maven可以从仓库组下载构件,而仓库组并没有时间的内容(下图中用虚线表示,它会转向包含的宿主仓库或者代理仓库获得实际构件的内容)")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/nexus06.png",alt:"img"}})]),s._v(" "),a("h2",{attrs:{id:"nexus的调度任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nexus的调度任务"}},[s._v("#")]),s._v(" Nexus的调度任务")]),s._v(" "),a("p",[s._v("默认安装好之后是没有索引和jar文件的，因为你要自己定义任务去执行。")]),s._v(" "),a("p",[s._v("Nexus提供了一系列可配置的调度任务来方便用户管理系统。用户可以设定这些任务运行的方式，例如每天、每周等。调度任务会在适当的时候在后台运行。")]),s._v(" "),a("p",[s._v("要建立一个调度任务，单击左边导航菜单中的Tasks，点击"),a("code",[s._v("Create Task")]),s._v("，然后选择一个任务类型。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/nexus11.png",alt:"img"}})]),s._v(" "),a("p",[s._v("以下几种常用类型的调度任务：")]),s._v(" "),a("ul",[a("li",[s._v("Execute script：执行自定义脚本")]),s._v(" "),a("li",[s._v("Purge开头：清理一些不使用的资源。")]),s._v(" "),a("li",[s._v("Rebuild repository index：为仓库重新编纂索引，从远仓库下载最新的索引。")]),s._v(" "),a("li",[s._v("Rebuild Maven repository metadata：基于仓库内容重新创建仓库元数据文件，同时重新创建每个文件的校验和md5与sha1。")]),s._v(" "),a("li",[s._v("Remove snapshots from Maven repository：把快照删了，这个是在稳定版发布后清除")])]),s._v(" "),a("p",[s._v("比如我新建一个重构索引的任务，然后选择aliyun仓库，让它把远程索引取下来，手动执行。不过最好别这样做，因为需要很大的硬盘空间。")]),s._v(" "),a("p",[s._v("最好是让它自己去维护，请求一个依赖的时候如果私服没有会自动去远仓库取的。")]),s._v(" "),a("h2",{attrs:{id:"nexus搜索页"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nexus搜索页"}},[s._v("#")]),s._v(" Nexus搜索页")]),s._v(" "),a("p",[s._v("这个不需要登录就可以访问，用来查询jar包。支持模糊查询")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/nexus07.png",alt:"img"}})]),s._v(" "),a("h2",{attrs:{id:"blob-stores"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#blob-stores"}},[s._v("#")]),s._v(" Blob Stores")]),s._v(" "),a("p",[s._v("文件存储的地方，创建一个目录的话，对应文件系统的一个目录，可供仓库上传文件使用，如图所示：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/nexus08.png",alt:"img"}})]),s._v(" "),a("h2",{attrs:{id:"本地maven使用私服"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地maven使用私服"}},[s._v("#")]),s._v(" 本地Maven使用私服")]),s._v(" "),a("p",[s._v("安装和配置好之后，在开发中如何使用呢。可在maven的默认配置"),a("code",[s._v("settings.xml")]),s._v("中修改如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<servers>\n    <server>\n        <id>releases</id>\n        <username>admin</username>\n        <password>admin123</password>\n    </server>\n    <server>\n        <id>snapshots</id>\n        <username>admin</username>\n        <password>admin123</password>\n    </server>\n</servers>\n\n<mirrors>\n    <mirror>\n        <id>nexus</id>\n        <mirrorOf>*</mirrorOf>\n        <url>http://123.207.66.156:8081/repository/maven-public/</url>\n    </mirror>\n</mirrors>\n\n<profiles>\n    <profile>  \n      <id>dev</id>\n      <repositories>\n        <repository>\n          <id>Nexus</id>\n          <url>http://123.207.66.156:8081/repository/maven-public/</url>\n          <releases>\n            <enabled>true</enabled>\n          </releases>\n          <snapshots>\n            <enabled>true</enabled>\n            <updatePolicy>always</updatePolicy>\n          </snapshots>\n        </repository>\n      </repositories>\n      <activation>\n        <activeByDefault>true</activeByDefault>      \n        <jdk>1.8</jdk>\n      </activation>\n      <properties>\n        <maven.compiler.source>1.8</maven.compiler.source>\n        <maven.compiler.target>1.8</maven.compiler.target>\n        <maven.compiler.compilerVersion>1.8</maven.compiler.compilerVersion>\n      </properties>\n    </profile>\n</profiles>\n<activeProfiles>\n    <activeProfile>dev</activeProfile>\n</activeProfiles>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br")])]),a("p",[s._v("如果要发布自己的jar到私服，就需要修改工程的"),a("code",[s._v("pom.xml")]),s._v("，添加如下内容，否则什么都不用做：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<distributionManagement>\n    <repository>\n        <id>releases</id>\n        <name>Releases</name>\n        <url>http://123.207.66.156:8081/repository/maven-releases/</url>\n    </repository>\n    <snapshotRepository>\n        <id>snapshots</id>\n        <name>Snapshot</name>\n        <url>http://123.207.66.156:8081/repository/maven-snapshots/</url>\n    </snapshotRepository>\n</distributionManagement>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("注意上面的repository的id值一定要跟"),a("code",[s._v("settings.xml")]),s._v("文件中配置的server一致。")]),s._v(" "),a("p",[s._v("上传到Nexus上，使用 "),a("code",[s._v("mvn deploy")]),s._v(" 即可，开发的时候请使用snapshot版本，也就是version的后缀必须是"),a("code",[s._v("-SNAPSHOT")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<groupId>com.enzhico</groupId>\n<artifactId>micro-pay-sdk</artifactId>\n<version>1.2-SNAPSHOT</version>\n<packaging>jar</packaging>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/nexus12.png",alt:"img"}})]),s._v(" "),a("p",[s._v("上次成功后再去私服仓库查询快照版发现已经成功上传：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/nexus13.png",alt:"img"}})]),s._v(" "),a("p",[s._v("** 第三方Jar上传到Nexus **")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mvn deploy:deploy-file \\\n    -DgroupId=<group-id> \\\n    -DartifactId=<artifact-id> \\\n    -Dversion=<version> \\\n    -Dpackaging=<type-of-packaging> \\\n    -Dfile=<path-to-file> \\\n    -DrepositoryId=<server-id-settings.xml> \\\n    -Durl=<url-of-the-repository-to-deploy>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[a("code",[s._v("-DrepositoryId")]),s._v("的值即为在"),a("code",[s._v("setttings.xml")]),s._v("里面配置的server id。")]),s._v(" "),a("h2",{attrs:{id:"上次不同jdk版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#上次不同jdk版本"}},[s._v("#")]),s._v(" 上次不同JDK版本")]),s._v(" "),a("p",[s._v("pom.xml里面配置多个profile，其中一个默认的：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<build>\n    <plugins>\n        <plugin>\n            <groupId>org.apache.maven.plugins</groupId>\n            <artifactId>maven-compiler-plugin</artifactId>\n            <version>3.6.1</version>\n            <configuration>\n                <source>${jar.source}</source>\n                <target>${jar.target}</target>\n                <encoding>UTF-8</encoding>\n            </configuration>\n        </plugin>\n        <plugin>\n            <groupId>org.apache.maven.plugins</groupId>\n            <artifactId>maven-deploy-plugin</artifactId>\n            <version>2.8.2</version>\n            <executions>\n                <execution>\n                    <id>deploy</id>\n                    <phase>deploy</phase>\n                    <goals>\n                        <goal>deploy</goal>\n                    </goals>\n                </execution>\n            </executions>\n        </plugin>\n    </plugins>\n</build>\n\n<profiles>\n    <profile>\n        <id>default</id>\n        <activation>\n            <activeByDefault>true</activeByDefault>\n        </activation>\n        <properties>\n            <jar.source>1.8</jar.source>\n            <jar.target>1.8</jar.target>\n        </properties>\n    </profile>\n    <profile>\n        <id>jdk16</id>\n        <build>\n            <plugins>\n                <plugin>\n                    <artifactId>maven-jar-plugin</artifactId>\n                    <executions>\n                        <execution>\n                            <phase>package</phase>\n                            <goals>\n                                <goal>jar</goal>\n                            </goals>\n                            <configuration>\n                                <classifier>jdk16</classifier>\n                            </configuration>\n                        </execution>\n                    </executions>\n                </plugin>\n            </plugins>\n        </build>\n        <properties>\n            <jar.source>1.6</jar.source>\n            <jar.target>1.6</jar.target>\n        </properties>\n    </profile>\n</profiles>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br")])]),a("p",[s._v("上面我定义了两个profile，那么打包或者发布的时候可指定不同的JDK版本：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 默认版本JDK1.8\nmvn clean && mvn deploy\n# JDK1.6版本\nmvn clean && mvn deploy -P jdk16\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("第一条命令打包使用默认的profile，编译的版本是1.8，生成的文件是xxx-SNAPSHOT.jar； 而第二条命令打包指定使用jdk16这个profile，编译版本是1.6，生成的文件是xxx-SNAPSHOT-jdk16.jar。")]),s._v(" "),a("p",[s._v("项目中引用的时候可通过指定classifier：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<dependency>\n    <groupId>com.enzhico</groupId>\n    <artifactId>adm-traffic-common-model</artifactId>\n    <version>1.0.0-SNAPSHOT</version>\n    <classifier>jdk16</classifier>\n</dependency>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h2",{attrs:{id:"发布源码和文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布源码和文档"}},[s._v("#")]),s._v(" 发布源码和文档")]),s._v(" "),a("p",[s._v("如果你还想发布源码和javadoc，那么需要使用maven插件，我把插件配置列出来：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<build>\n    <plugins>\n        <plugin>\n            <groupId>org.apache.maven.plugins</groupId>\n            <artifactId>maven-compiler-plugin</artifactId>\n            <version>3.7.0</version>\n            <configuration>\n                <source>1.8</source>\n                <target>1.8</target>\n                <encoding>UTF-8</encoding>\n            </configuration>\n        </plugin>\n        <plugin>\n            <groupId>org.apache.maven.plugins</groupId>\n            <artifactId>maven-resources-plugin</artifactId>\n            <configuration>\n                <encoding>UTF-8</encoding>\n            </configuration>\n        </plugin>\n        <plugin>\n            <groupId>org.apache.maven.plugins</groupId>\n            <artifactId>maven-source-plugin</artifactId>\n            <version>3.0.1</version>\n            <executions>\n                <execution>\n                    <id>attach-sources</id>\n                    <goals>\n                        <goal>jar</goal>\n                    </goals>\n                </execution>\n            </executions>\n        </plugin>\n        <plugin>\n            <groupId>org.apache.maven.plugins</groupId>\n            <artifactId>maven-javadoc-plugin</artifactId>\n            <version>2.10.4</version>\n            <configuration>\n                <encoding>UTF-8</encoding>\n                <aggregate>true</aggregate>\n                <charset>UTF-8</charset>\n                <docencoding>UTF-8</docencoding>\n            </configuration>\n            <executions>\n                <execution>\n                    <id>attach-javadocs</id>\n                    <goals>\n                        <goal>jar</goal>\n                    </goals>\n                </execution>\n            </executions>\n        </plugin>\n        <plugin>\n            <groupId>org.apache.maven.plugins</groupId>\n            <artifactId>maven-deploy-plugin</artifactId>\n            <version>2.8.2</version>\n            <executions>\n                <execution>\n                    <id>deploy</id>\n                    <phase>deploy</phase>\n                    <goals>\n                        <goal>deploy</goal>\n                    </goals>\n                </execution>\n            </executions>\n        </plugin>\n    </plugins>\n</build>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br")])]),a("p",[s._v("发布javadoc的时候，每个方法注释必须遵循规范，比如参数、返回值、异常都应该有说明。")]),s._v(" "),a("p",[s._v("打包或发布的时候如果想跳过测试，加一个参数：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mvn clean && mvn deploy -DskipTests=true\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);