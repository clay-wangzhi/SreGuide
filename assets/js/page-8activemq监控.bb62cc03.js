(window.webpackJsonp=window.webpackJsonp||[]).push([[197],{1251:function(a,e,t){"use strict";t.r(e);var s=t(1),r=Object(s.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"_8-activemq监控"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-activemq监控"}},[a._v("#")]),a._v(" 8 activemq监控")]),a._v(" "),t("blockquote",[t("p",[a._v("zabbix旧版本可以用，新版本建议用官方模板")])]),a._v(" "),t("h2",{attrs:{id:"关闭被监控端的防火墙"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#关闭被监控端的防火墙"}},[a._v("#")]),a._v(" 关闭被监控端的防火墙")]),a._v(" "),t("p",[a._v("activemq  防火墙的添加还是有问题，先把防火墙给关了，它好像是后续会再产生一个随机端口，进行数据的传输")]),a._v(" "),t("h2",{attrs:{id:"zabbix-proxy安装java-gateway"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zabbix-proxy安装java-gateway"}},[a._v("#")]),a._v(" zabbix_proxy安装java_gateway，")]),a._v(" "),t("p",[a._v("因为是基于JMX进行监控的")]),a._v(" "),t("h2",{attrs:{id:"修改配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件"}},[a._v("#")]),a._v(" 修改配置文件")]),a._v(" "),t("p",[a._v("配置"),t("code",[a._v("./apache-activemq-5.11.1/conf/activemq.xml")])]),a._v(" "),t("p",[a._v('修改broker字段： 增加useJmx="true"')]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('<broker useJmx="true" xmlns="http://activemq.apache.org/schema/core" brokerName="localhost" dataDirectory="${activemq.data}"> \n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("修改broken字段内的managementContext节点：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('<managementContext>\n            <managementContext createConnector="true" connectorPort="11099"/>\n</managementContext> \n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("配置./apache-activemq-5.11.1/bin/activemq")]),a._v(" "),t("p",[a._v("在脚本最后添加：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('ACTIVEMQ_SUNJMX_START="-Dcom.sun.management.jmxremote.port=11099 "\nACTIVEMQ_SUNJMX_START="$ACTIVEMQ_SUNJMX_START -Dcom.sun.management.jmxremote.password.file=${ACTIVEMQ_CONF}/jmx.password"\nACTIVEMQ_SUNJMX_START="$ACTIVEMQ_SUNJMX_START -Dcom.sun.management.jmxremote.access.file=${ACTIVEMQ_CONF}/jmx.access"\nACTIVEMQ_SUNJMX_START="$ACTIVEMQ_SUNJMX_START -Dcom.sun.management.jmxremote.ssl=false"\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("p",[a._v("然后重启activemq")]),a._v(" "),t("blockquote",[t("p",[a._v("增加的方式不对，添加上以后密码还是为空，后续有空查一下原因")])]),a._v(" "),t("h2",{attrs:{id:"导入模板"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#导入模板"}},[a._v("#")]),a._v(" 导入模板")]),a._v(" "),t("p",[a._v("在zabbix_web中导入zbx_activemq目录下的xml文件")]),a._v(" "),t("p",[a._v("在被监控主机上增加宏设置\n加入{"),t("span",{staticClass:"katex-error",attrs:{title:"ParseError: KaTeX parse error: Expected &#039;EOF&#039;, got &#039;}&#039; at position 13: JMX_PASSWORD}̲，和{"}},[a._v("JMX_PASSWORD}，和{")]),a._v("JMX_USERNAME}，user为admin，pass为activemq")])])}),[],!1,null,null,null);e.default=r.exports}}]);