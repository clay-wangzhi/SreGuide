(window.webpackJsonp=window.webpackJsonp||[]).push([[158],{971:function(e,t,i){"use strict";i.r(t);var n=i(1),s=Object(n.a)({},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[i("h1",{attrs:{id:"_5-2-用户认证系统集成"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-用户认证系统集成"}},[e._v("#")]),e._v(" 5.2 用户认证系统集成")]),e._v(" "),i("blockquote",[i("p",[e._v("转载自："),i("a",{attrs:{href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/",target:"_blank",rel:"noopener noreferrer"}},[e._v("用户认证系统集成 | 泽阳"),i("OutboundLink")],1)])]),e._v(" "),i("p",[e._v("您好，本章主要讲解与jenkins与用户认证系统集成 例如：LDAP Gitlab GitHub 。我们做实验的过程中建议先开启匿名模式，防止配置错误导致无法直接登录。 😀")]),e._v(" "),i("hr"),e._v(" "),i("p",[e._v("Jenkins默认使用自带数据库模式存储用户，在企业中一般都会有统一的认证中心，例如 LDAP、ActiveDirectory中管理用户。可以配置Jenkins集成实现统一用户管理。")]),e._v(" "),i("h2",{attrs:{id:"ldap系统集成"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#ldap系统集成"}},[e._v("#")]),e._v(" ldap系统集成")]),e._v(" "),i("p",[e._v("LDAP系统是用于用户管理，在配置集成的时候我们只需要以下信息：")]),e._v(" "),i("ul",[i("li",[e._v("服务器地址： ldap://192.168.1.200")]),e._v(" "),i("li",[e._v("服务器端口: 389")]),e._v(" "),i("li",[e._v("组织OU: ou=jenkins,dc=devops,dc=com")]),e._v(" "),i("li",[e._v("管理员账号和密码: cn=admin,dc=devops,dc=com")])]),e._v(" "),i("p",[e._v("首先，我需要在Jenkins系统中安装"),i("code",[e._v("LDAP")]),e._v("插件，然后进入 系统管理 -> "),i("code",[e._v("全局安全配置")]),e._v("页面中。")]),e._v(" "),i("p",[i("a",{attrs:{href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/01.png",target:"_blank",rel:"noopener noreferrer"}},[i("img",{attrs:{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/01.png",alt:"images"}}),i("OutboundLink")],1)]),e._v(" "),i("p",[e._v("填写好信息之后，我们可以点击测试按钮进行测试。会模拟用户登录，成功后再保存配置即可。")]),e._v(" "),i("p",[i("a",{attrs:{href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/02.png",target:"_blank",rel:"noopener noreferrer"}},[i("img",{attrs:{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/02.png",alt:"images"}}),i("OutboundLink")],1)]),e._v(" "),i("h2",{attrs:{id:"gitlab单点登录"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#gitlab单点登录"}},[e._v("#")]),e._v(" gitlab单点登录")]),e._v(" "),i("p",[e._v("一般我们会配置Gitlab系统与LDAP系统做用户认证集成，开发人员登录gitlab系统的频率还是很多的，今天我们的配置效果是：当用户已经登录了gitlab，再次打开Jenkins会自动登入。")]),e._v(" "),i("h3",{attrs:{id:"gitlab配置"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#gitlab配置"}},[e._v("#")]),e._v(" gitlab配置")]),e._v(" "),i("p",[e._v("首先，我们需要在Gitlab中添加一个应用。系统设置 -> 应用管理")]),e._v(" "),i("p",[e._v("填写Jenkins回调地址"),i("code",[e._v("http://jenkinsserver:8080/securityRealm/finishLogin")]),e._v(",勾选权限默认具有"),i("code",[e._v("read_user")]),e._v("权限即可。")]),e._v(" "),i("p",[i("a",{attrs:{href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/03.png",target:"_blank",rel:"noopener noreferrer"}},[i("img",{attrs:{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/03.png",alt:"images"}}),i("OutboundLink")],1)]),e._v(" "),i("p",[e._v("保存配置，会提示以下信息，这些信息需要填写到Jenkins中。"),i("code",[e._v("ApplicationId")]),e._v(" "),i("code",[e._v("secret")]),i("a",{attrs:{href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/04.png",target:"_blank",rel:"noopener noreferrer"}},[i("img",{attrs:{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/04.png",alt:"images"}}),i("OutboundLink")],1)]),e._v(" "),i("h3",{attrs:{id:"jenkins配置"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#jenkins配置"}},[e._v("#")]),e._v(" jenkins配置")]),e._v(" "),i("p",[e._v("我们需要在Jenkins系统中安装插件"),i("code",[e._v("Gitlab Authentication")]),e._v("， 然后导航到"),i("code",[e._v("全局安全配置")]),e._v("。 填写Gitlab系统地址和上面在Gitlab创建的应用的"),i("code",[e._v("ApplicationId")]),e._v(" "),i("code",[e._v("secret")]),e._v("。"),i("a",{attrs:{href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/05.png",target:"_blank",rel:"noopener noreferrer"}},[i("img",{attrs:{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/05.png",alt:"images"}}),i("OutboundLink")],1)]),e._v(" "),i("p",[e._v("注意：当Jenkins前面有代理的时候可能会出现跳转错误的问题。这时候需要看下提示错误的redirect URL地址,检查下图配置。 如果下图配置没有问题，请检查代理的配置问题。另外要注意是"),i("code",[e._v("http")]),e._v("模式哦")]),e._v(" "),i("p",[i("a",{attrs:{href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/06.png",target:"_blank",rel:"noopener noreferrer"}},[i("img",{attrs:{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/06.png",alt:"images"}}),i("OutboundLink")],1)]),e._v(" "),i("h2",{attrs:{id:"github单点登录"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#github单点登录"}},[e._v("#")]),e._v(" github单点登录")]),e._v(" "),i("p",[e._v("如果你用过GitLab，你会发现与GitHub很类似。这里我们要配置的GitHub集成与GitLab配置很类似。")]),e._v(" "),i("h3",{attrs:{id:"github配置"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#github配置"}},[e._v("#")]),e._v(" github配置")]),e._v(" "),i("p",[e._v("首先登录GitHub, settings -> Developer Settings -> Oauth Apps。"),i("a",{attrs:{href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/07.png",target:"_blank",rel:"noopener noreferrer"}},[i("img",{attrs:{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/07.png",alt:"images"}}),i("OutboundLink")],1)]),e._v(" "),i("p",[e._v("新建应用：填写Jenkins回调地址"),i("code",[e._v("http://jenkinsserver:8080/securityRealm/finishLogin")]),e._v("。"),i("a",{attrs:{href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/08.png",target:"_blank",rel:"noopener noreferrer"}},[i("img",{attrs:{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/08.png",alt:"images"}}),i("OutboundLink")],1)]),e._v(" "),i("p",[e._v("保存，获取应用ID和secret"),i("a",{attrs:{href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/09.png",target:"_blank",rel:"noopener noreferrer"}},[i("img",{attrs:{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/09.png",alt:"images"}}),i("OutboundLink")],1)]),e._v(" "),i("h3",{attrs:{id:"配置jenkins"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#配置jenkins"}},[e._v("#")]),e._v(" 配置jenkins")]),e._v(" "),i("p",[e._v("我们需要在Jenkins系统中安装插件"),i("code",[e._v("Github Authentication")]),e._v("， 然后导航到"),i("code",[e._v("全局安全配置")]),e._v("。 填写Gitlab系统地址和上面在Gitlab创建的应用的"),i("code",[e._v("ApplicationId")]),e._v(" "),i("code",[e._v("secret")]),e._v("。")]),e._v(" "),i("p",[i("a",{attrs:{href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/10.png",target:"_blank",rel:"noopener noreferrer"}},[i("img",{attrs:{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/10.png",alt:"images"}}),i("OutboundLink")],1)]),e._v(" "),i("p",[e._v("效果："),i("a",{attrs:{href:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/11.png",target:"_blank",rel:"noopener noreferrer"}},[i("img",{attrs:{src:"http://docs.idevops.site/jenkins/pipelineintegrated/chapter02/images/11.png",alt:"images"}}),i("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=s.exports}}]);