(window.webpackJsonp=window.webpackJsonp||[]).push([[269],{1265:function(t,e,r){"use strict";r.r(e);var v=r(1),_=Object(v.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"curl方式执行shell脚本时如何传参"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#curl方式执行shell脚本时如何传参"}},[t._v("#")]),t._v(" curl方式执行shell脚本时如何传参")]),t._v(" "),r("p",[t._v("有时候shell脚本可以放在http页面上，不用download，可以直接执行。")]),t._v(" "),r("p",[t._v("通常我们可以用curl的方式执行http页面上的shell脚本。 一般方式是：")]),t._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("curl ftp://192.168.166.21:/system_optimize.sh | bash\n")])]),t._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[t._v("1")]),r("br")])]),r("p",[t._v("这样脚本就可以在本地机器上执行了。")]),t._v(" "),r("p",[t._v("但是需要传入参数的脚本。我们可以用下面的方式传入shell参数")]),t._v(" "),r("ul",[r("li",[t._v("-s方式")])]),t._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("curl -s ftp://192.168.166.21:/system_optimize.sh | bash -s arg1 arg2\n")])]),t._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[t._v("1")]),r("br")])]),r("ul",[r("li",[t._v("< 方式")])]),t._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("bash <(curl -s ftp://192.168.166.21:/system_optimize.sh) arg1 arg2\n")])]),t._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[t._v("1")]),r("br")])]),r("blockquote",[r("p",[t._v("注意 <( 之间不要有空格！！！")])]),t._v(" "),r("ul",[r("li",[t._v("若参数中带有"),r("code",[t._v("-")]),t._v("，则可使用长选项"),r("code",[t._v("--")]),t._v("解决")])]),t._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("curl -s ftp://192.168.166.21:/system_optimize.sh | bash -s -- arg1 arg2\n")])]),t._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[t._v("1")]),r("br")])]),r("ul",[r("li",[t._v("若参数为”-p arg -d arg”,则可使用以下命令执行")])]),t._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("curl -s ftp://192.168.166.21:/system_optimize.sh | bash -s -- -p arg1 -d arg2\n")])]),t._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[t._v("1")]),r("br")])]),r("ul",[r("li",[t._v("不止是curl的输入，其他方式的输入也满足。可以通过以下例子深入理解下")])]),t._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("echo 'i=1; for a in $@; do echo \"$i = $a\"; i=$((i+1)); done' | bash -s -- -a1 -a2 -\n")])]),t._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[t._v("1")]),r("br")])]),r("h2",{attrs:{id:"bash选项"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#bash选项"}},[t._v("#")]),t._v(" Bash选项")]),t._v(" "),r("p",[t._v("Bash选项")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("缩写")]),t._v(" "),r("th",[t._v("名称")]),t._v(" "),r("th",[t._v("作用")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("-B")]),t._v(" "),r("td",[t._v("brace expansion")]),t._v(" "),r("td",[t._v("开启"),r("a",{attrs:{href:""}},[t._v("大括号展开")]),t._v("(默认 setting = on)")])]),t._v(" "),r("tr",[r("td",[t._v("+B")]),t._v(" "),r("td",[t._v("brace expansion")]),t._v(" "),r("td",[t._v("关闭大括号展开")])]),t._v(" "),r("tr",[r("td",[t._v("-C")]),t._v(" "),r("td",[t._v("noclobber")]),t._v(" "),r("td",[t._v("防止重定向时覆盖文件(可能会被>|覆盖)")])]),t._v(" "),r("tr",[r("td",[t._v("-D")]),t._v(" "),r("td",[t._v("(none)")]),t._v(" "),r("td",[t._v("列出用双引号引用起来的, 以$为前缀的字符串, 但是不执行脚本中的命令")])]),t._v(" "),r("tr",[r("td",[t._v("-a")]),t._v(" "),r("td",[t._v("all export")]),t._v(" "),r("td",[t._v("export(导出)所有定义过的变量")])]),t._v(" "),r("tr",[r("td",[t._v("-b")]),t._v(" "),r("td",[t._v("notify")]),t._v(" "),r("td",[t._v("当后台运行的作业终止时, 给出通知(脚本中并不常见)")])]),t._v(" "),r("tr",[r("td",[t._v("-c ...")]),t._v(" "),r("td",[t._v("(none)")]),t._v(" "),r("td",[t._v("从...中读取命令")])]),t._v(" "),r("tr",[r("td",[t._v("checkjobs")]),t._v(" "),r("td",[t._v("(none)")]),t._v(" "),r("td",[t._v("通知有活跃shell"),r("a",{attrs:{href:"http://tldp.org/LDP/abs/html/x9644.html#JOBSREF",target:"_blank",rel:"noopener noreferrer"}},[t._v("任务"),r("OutboundLink")],1),t._v("的用户退出。"),r("a",{attrs:{href:"http://tldp.org/LDP/abs/html/bashver4.html#BASH4REF",target:"_blank",rel:"noopener noreferrer"}},[t._v("Bash 4"),r("OutboundLink")],1),t._v('版本中引入，仍然处于"实验"阶段. 用法:shopt -s checkjobs .(注意：可能会hang！')])]),t._v(" "),r("tr",[r("td",[t._v("-e")]),t._v(" "),r("td",[t._v("errexit")]),t._v(" "),r("td",[t._v("当脚本发生第一个错误时, 就退出脚本, 换种说法就是, 当一个命令返回非零值时, 就退出脚本(除了"),r("a",{attrs:{href:"http://tldp.org/LDP/abs/html/loops1.html#UNTILLOOPREF",target:"_blank",rel:"noopener noreferrer"}},[t._v("until"),r("OutboundLink")],1),t._v("或"),r("a",{attrs:{href:"http://tldp.org/LDP/abs/html/loops1.html#WHILELOOPREF",target:"_blank",rel:"noopener noreferrer"}},[t._v("while loops"),r("OutboundLink")],1),t._v(", "),r("a",{attrs:{href:"http://tldp.org/LDP/abs/html/testconstructs.html#TESTCONSTRUCTS1",target:"_blank",rel:"noopener noreferrer"}},[t._v("if-tests"),r("OutboundLink")],1),t._v(", "),r("a",{attrs:{href:"http://tldp.org/LDP/abs/html/list-cons.html#LCONS1",target:"_blank",rel:"noopener noreferrer"}},[t._v("list constructs"),r("OutboundLink")],1),t._v(")")])]),t._v(" "),r("tr",[r("td",[t._v("-f")]),t._v(" "),r("td",[t._v("noglob")]),t._v(" "),r("td",[t._v("禁用文件名扩展(就是禁用globbing)")])]),t._v(" "),r("tr",[r("td",[t._v("globstar")]),t._v(" "),r("td",[r("a",{attrs:{href:"http://tldp.org/LDP/abs/html/bashver4.html#GLOBSTARREF",target:"_blank",rel:"noopener noreferrer"}},[t._v("globbing star-match"),r("OutboundLink")],1)]),t._v(" "),r("td",[t._v("打开"),r("a",{attrs:{href:"http://tldp.org/LDP/abs/html/globbingref.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("globbling"),r("OutboundLink")],1),t._v("操作符(Bash "),r("a",{attrs:{href:"http://tldp.org/LDP/abs/html/bashver4.html#BASH4REF",target:"_blank",rel:"noopener noreferrer"}},[t._v("4+"),r("OutboundLink")],1),t._v("). 使用方法：shopt -s globstar")])]),t._v(" "),r("tr",[r("td",[t._v("-i")]),t._v(" "),r("td",[t._v("interactive")]),t._v(" "),r("td",[t._v("让脚本以交互模式运行")])]),t._v(" "),r("tr",[r("td",[t._v("-n")]),t._v(" "),r("td",[t._v("noexec")]),t._v(" "),r("td",[t._v("从脚本中读取命令, 但是不执行它们(做语法检查)")])]),t._v(" "),r("tr",[r("td",[t._v("-o Option-Name")]),t._v(" "),r("td",[t._v("(none)")]),t._v(" "),r("td",[t._v("调用Option-Name选项")])]),t._v(" "),r("tr",[r("td",[t._v("-o posix")]),t._v(" "),r("td",[t._v("POSIX")]),t._v(" "),r("td",[t._v("修改Bash或被调用脚本的行为, 使其符合"),r("a",{attrs:{href:"http://tldp.org/LDP/abs/html/sha-bang.html#POSIX2REF",target:"_blank",rel:"noopener noreferrer"}},[t._v("POSIX"),r("OutboundLink")],1),t._v("标准.")])]),t._v(" "),r("tr",[r("td",[t._v("-o pipefail")]),t._v(" "),r("td",[t._v("pipe failure")]),t._v(" "),r("td",[t._v("创建一个管道去返回最后一条命令的"),r("a",{attrs:{href:"http://tldp.org/LDP/abs/html/exit-status.html#EXITSTATUSREF",target:"_blank",rel:"noopener noreferrer"}},[t._v("退出状态码"),r("OutboundLink")],1),t._v("，这个返回值是一个非0的返回值")])]),t._v(" "),r("tr",[r("td",[t._v("-p")]),t._v(" "),r("td",[t._v("privileged")]),t._v(" "),r("td",[t._v('以"suid"身份来运行脚本(小心!)')])]),t._v(" "),r("tr",[r("td",[t._v("-r")]),t._v(" "),r("td",[t._v("restricted")]),t._v(" "),r("td",[t._v("以受限模式来运行脚本(参考 "),r("a",{attrs:{href:"http://tldp.org/LDP/abs/html/restricted-sh.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("22"),r("OutboundLink")],1),t._v(").")])]),t._v(" "),r("tr",[r("td",[t._v("-s")]),t._v(" "),r("td",[t._v("stdin")]),t._v(" "),r("td",[t._v("从stdin 中读取命令")])]),t._v(" "),r("tr",[r("td",[t._v("-t")]),t._v(" "),r("td",[t._v("(none)")]),t._v(" "),r("td",[t._v("执行完第一个命令之后, 就退出")])]),t._v(" "),r("tr",[r("td",[t._v("-u")]),t._v(" "),r("td",[t._v("nounset")]),t._v(" "),r("td",[t._v("如果尝试使用了未定义的变量, 就会输出一个错误消息, 然后强制退出")])]),t._v(" "),r("tr",[r("td",[t._v("-v")]),t._v(" "),r("td",[t._v("verbose")]),t._v(" "),r("td",[t._v("在执行每个命令之前, 把每个命令打印到stdout上")])]),t._v(" "),r("tr",[r("td",[t._v("-x")]),t._v(" "),r("td",[t._v("xtrace")]),t._v(" "),r("td",[t._v("与-v选项类似, 但是会打印完整命令")])]),t._v(" "),r("tr",[r("td",[t._v("-")]),t._v(" "),r("td",[t._v("(none)")]),t._v(" "),r("td",[t._v("选项结束标志. 后面的参数为"),r("a",{attrs:{href:"http://tldp.org/LDP/abs/html/internalvariables.html#POSPARAMREF",target:"_blank",rel:"noopener noreferrer"}},[t._v("位置参数"),r("OutboundLink")],1),t._v(".")])]),t._v(" "),r("tr",[r("td",[t._v("--")]),t._v(" "),r("td",[t._v("(none)")]),t._v(" "),r("td",[t._v("unset(释放)位置参数. 如果指定了参数列表(-- arg1 arg2), 那么位置 参数将会依次设置到参数列表中.")])])])]),t._v(" "),r("p",[t._v('重点是后面的"-"和"--"，理解一下')])])}),[],!1,null,null,null);e.default=_.exports}}]);