(window.webpackJsonp=window.webpackJsonp||[]).push([[179],{1308:function(s,t,a){"use strict";a.r(t);var n=a(1),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"_6-模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-模块"}},[s._v("#")]),s._v(" 6 模块")]),s._v(" "),a("h2",{attrs:{id:"模块简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块简介"}},[s._v("#")]),s._v(" 模块简介")]),s._v(" "),a("p",[s._v("在计算机程序的开发过程中，随着程序代码越写越多，在一个文件里代码就会越来越长，越来越不容易维护。")]),s._v(" "),a("p",[s._v("为了编写可维护的代码，我们把很多函数分组，分别放到不同的文件里，这样，每个文件包含的代码就相对较少，很多编程语言都采用这种组织代码的方式。在Python中，一个.py文件就称之为一个模块（Module）。")]),s._v(" "),a("p",[s._v("使用模块有什么好处？")]),s._v(" "),a("p",[s._v("最大的好处是大大提高了代码的可维护性。其次，编写代码不必从零开始。当一个模块编写完毕，就可以被其他地方引用。我们在编写程序的时候，也经常引用其他模块，包括Python内置的模块和来自第三方的模块。")]),s._v(" "),a("p",[s._v("使用模块还可以避免函数名和变量名冲突。相同名字的函数和变量完全可以分别存在不同的模块中，因此，我们自己在编写模块时，不必考虑名字会与其他模块冲突。但是也要注意，尽量不要与内置函数名字冲突。点"),a("a",{attrs:{href:"http://docs.python.org/3/library/functions.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("这里"),a("OutboundLink")],1),s._v("查看Python的所有内置函数。")]),s._v(" "),a("p",[s._v("你也许还想到，如果不同的人编写的模块名相同怎么办？为了避免模块名冲突，Python又引入了按目录来组织模块的方法，称为包（Package）。")]),s._v(" "),a("p",[s._v("举个例子，一个"),a("code",[s._v("abc.py")]),s._v("的文件就是一个名字叫"),a("code",[s._v("abc")]),s._v("的模块，一个"),a("code",[s._v("xyz.py")]),s._v("的文件就是一个名字叫"),a("code",[s._v("xyz")]),s._v("的模块。")]),s._v(" "),a("p",[s._v("现在，假设我们的"),a("code",[s._v("abc")]),s._v("和"),a("code",[s._v("xyz")]),s._v("这两个模块名字与其他模块冲突了，于是我们可以通过包来组织模块，避免冲突。方法是选择一个顶层包名，比如"),a("code",[s._v("mycompany")]),s._v("，按照如下目录存放：")]),s._v(" "),a("div",{staticClass:"language-ascii line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mycompany\n├─ __init__.py\n├─ abc.py\n└─ xyz.py\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("引入了包以后，只要顶层的包名不与别人冲突，那所有模块都不会与别人冲突。现在，"),a("code",[s._v("abc.py")]),s._v("模块的名字就变成了"),a("code",[s._v("mycompany.abc")]),s._v("，类似的，"),a("code",[s._v("xyz.py")]),s._v("的模块名变成了"),a("code",[s._v("mycompany.xyz")]),s._v("。")]),s._v(" "),a("p",[s._v("请注意，每一个包目录下面都会有一个"),a("code",[s._v("__init__.py")]),s._v("的文件，这个文件是必须存在的，否则，Python就把这个目录当成普通目录，而不是一个包。"),a("code",[s._v("__init__.py")]),s._v("可以是空文件，也可以有Python代码，因为"),a("code",[s._v("__init__.py")]),s._v("本身就是一个模块，而它的模块名就是"),a("code",[s._v("mycompany")]),s._v("。")]),s._v(" "),a("p",[s._v("类似的，可以有多级目录，组成多级层次的包结构。比如如下的目录结构：")]),s._v(" "),a("div",{staticClass:"language-ascii line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mycompany\n ├─ web\n │  ├─ __init__.py\n │  ├─ utils.py\n │  └─ www.py\n ├─ __init__.py\n ├─ abc.py\n └─ utils.py\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("文件"),a("code",[s._v("www.py")]),s._v("的模块名就是"),a("code",[s._v("mycompany.web.www")]),s._v("，两个文件"),a("code",[s._v("utils.py")]),s._v("的模块名分别是"),a("code",[s._v("mycompany.utils")]),s._v("和"),a("code",[s._v("mycompany.web.utils")]),s._v("。")]),s._v(" "),a("blockquote",[a("p",[s._v("⚠️ 自己创建模块时要注意命名，不能和Python自带的模块名称冲突。点"),a("a",{attrs:{href:"https://docs.python.org/3/py-modindex.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("这里"),a("OutboundLink")],1),s._v("查看Python的所有内置包。例如，系统自带了sys模块，自己的模块就不可命名为sys.py，否则将无法导入系统自带的sys模块。")])]),s._v(" "),a("p",[a("strong",[s._v("总结")])]),s._v(" "),a("p",[s._v("模块是一组Python代码的集合，可以使用其他模块，也可以被其他模块使用。")]),s._v(" "),a("p",[s._v("创建自己的模块时，要注意：")]),s._v(" "),a("ul",[a("li",[s._v("模块名要遵循Python变量命名规范，不要使用中文、特殊字符；")]),s._v(" "),a("li",[s._v("模块名不要和系统模块名冲突，最好先查看系统是否已存在该模块，检查方法是在Python交互环境执行"),a("code",[s._v("import abc")]),s._v("，若成功则说明系统存在此模块。")])]),s._v(" "),a("h2",{attrs:{id:"使用模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用模块"}},[s._v("#")]),s._v(" 使用模块")]),s._v(" "),a("p",[s._v("Python本身就内置了很多非常有用的模块，只要安装完毕，这些模块就可以立刻使用。")]),s._v(" "),a("p",[s._v("我们以内建的"),a("code",[s._v("sys")]),s._v("模块为例，编写一个"),a("code",[s._v("hello")]),s._v("的模块：")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/usr/bin/env python3")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -*- coding: utf-8 -*-")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' a test module '")]),s._v("\n\n__author__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Michael Liao'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" sys\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    args "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" sys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("argv\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("len")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Hello, world!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("elif")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("len")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Hello, %s!'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Too many arguments!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" __name__"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'__main__'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("p",[s._v("第1行和第2行是标准注释，第1行注释可以让这个"),a("code",[s._v("hello.py")]),s._v("文件直接在Unix/Linux/Mac上运行，第2行注释表示.py文件本身使用标准UTF-8编码；")]),s._v(" "),a("p",[s._v("第4行是一个字符串，表示模块的文档注释，任何模块代码的第一个字符串都被视为模块的文档注释；")]),s._v(" "),a("p",[s._v("第6行使用"),a("code",[s._v("__author__")]),s._v("变量把作者写进去，这样当你公开源代码后别人就可以瞻仰你的大名；")]),s._v(" "),a("p",[s._v("以上就是Python模块的标准文件模板，当然也可以全部删掉不写，但是，按标准办事肯定没错。")]),s._v(" "),a("p",[s._v("后面开始就是真正的代码部分。")]),s._v(" "),a("p",[s._v("你可能注意到了，使用"),a("code",[s._v("sys")]),s._v("模块的第一步，就是导入该模块：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" sys\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("导入"),a("code",[s._v("sys")]),s._v("模块后，我们就有了变量"),a("code",[s._v("sys")]),s._v("指向该模块，利用"),a("code",[s._v("sys")]),s._v("这个变量，就可以访问"),a("code",[s._v("sys")]),s._v("模块的所有功能。")]),s._v(" "),a("p",[a("code",[s._v("sys")]),s._v("模块有一个"),a("code",[s._v("argv")]),s._v("变量，用list存储了命令行的所有参数。"),a("code",[s._v("argv")]),s._v("至少有一个元素，因为第一个参数永远是该.py文件的名称，例如：")]),s._v(" "),a("p",[s._v("运行"),a("code",[s._v("python3 hello.py")]),s._v("获得的"),a("code",[s._v("sys.argv")]),s._v("就是"),a("code",[s._v("['hello.py']")]),s._v("；")]),s._v(" "),a("p",[s._v("运行"),a("code",[s._v("python3 hello.py Michael")]),s._v("获得的"),a("code",[s._v("sys.argv")]),s._v("就是"),a("code",[s._v("['hello.py', 'Michael']")]),s._v("。")]),s._v(" "),a("p",[s._v("最后，注意到这两行代码：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("__name__")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'__main__'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v("\n    test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("当我们在命令行运行"),a("code",[s._v("hello")]),s._v("模块文件时，Python解释器把一个特殊变量"),a("code",[s._v("__name__")]),s._v("置为"),a("code",[s._v("__main__")]),s._v("，而如果在其他地方导入该"),a("code",[s._v("hello")]),s._v("模块时，"),a("code",[s._v("if")]),s._v("判断将失败，因此，这种"),a("code",[s._v("if")]),s._v("测试可以让一个模块通过命令行运行时执行一些额外的代码，最常见的就是运行测试。")]),s._v(" "),a("p",[s._v("我们可以用命令行运行"),a("code",[s._v("hello.py")]),s._v("看看效果：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ python3 hello.py\nHello, world"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n$ python hello.py Michael\nHello, Michael"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("如果启动Python交互环境，再导入"),a("code",[s._v("hello")]),s._v("模块：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ python3\nPython "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.4")]),s._v(".3 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("v3.4.3:9b73f1c3e601, Feb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2015")]),s._v(", 02:52:03"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("GCC "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.2")]),s._v(".1 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Apple Inc. build "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5666")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dot "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" on darwin\nType "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"help"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"copyright"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"credits"')]),s._v(" or "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"license"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" information.\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" hello\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("导入时，没有打印"),a("code",[s._v("Hello, word!")]),s._v("，因为没有执行"),a("code",[s._v("test()")]),s._v("函数。")]),s._v(" "),a("p",[s._v("调用"),a("code",[s._v("hello.test()")]),s._v("时，才能打印出"),a("code",[s._v("Hello, word!")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" hello.test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nHello, world"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);