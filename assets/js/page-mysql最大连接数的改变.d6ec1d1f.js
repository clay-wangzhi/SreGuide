(window.webpackJsonp=window.webpackJsonp||[]).push([[267],{1192:function(s,t,a){"use strict";a.r(t);var n=a(1),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"mysql最大连接数的改变"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql最大连接数的改变"}},[s._v("#")]),s._v(" mysql最大连接数的改变")]),s._v(" "),a("p",[s._v("在使用MySQL数据库的时候，经常会遇到这么一个问题，就是“Can not connect to MySQL server. Too many connections”-mysql 1040错误，这是因为访问MySQL且还未释放的连接数目已经达到MySQL的上限。通常，mysql的最大连接数默认是100, 最大可以达到16384。")]),s._v(" "),a("p",[s._v("常用的有两种方式修改最大连接数。")]),s._v(" "),a("h3",{attrs:{id:"命令行修改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令行修改"}},[s._v("#")]),s._v(" 命令行修改")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#mysql -uuser -ppassword(命令行登录MySQL)\nmysql>show variables like 'max_connections';(查可以看当前的最大连接数)\nmsyql>set global max_connections=1000;(设置最大连接数为1000，可以再次查看是否设置成功)\nmysql>exit(退出)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("这种方式有个问题，就是设置的最大连接数只在mysql当前服务进程有效，一旦mysql重启，又会恢复到初始状态。因为mysql启动后的初始化工作是从其配置文件中读取数据的，而这种方式没有对其配置文件做更改。")]),s._v(" "),a("h3",{attrs:{id:"修改配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件"}},[s._v("#")]),s._v(" 修改配置文件")]),s._v(" "),a("p",[s._v("这 种方式说来很简单，只要修改MySQL配置文件my.ini 或 my.cnf的参数max_connections，将其改为max_connections=1000，然后重启MySQL即可。")])])}),[],!1,null,null,null);t.default=e.exports}}]);