(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{1102:function(n,s,a){"use strict";a.r(s);var e=a(1),t=Object(e.a)({},(function(){var n=this,s=n.$createElement,a=n._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[a("h1",{attrs:{id:"_20-3-应用程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_20-3-应用程序"}},[n._v("#")]),n._v(" 20.3 应用程序")]),n._v(" "),a("p",[n._v("使用 I/O 重定向可以同时解析和固定命令输出的片段(see "),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/internal.html#READREDIR",target:"_blank",rel:"noopener noreferrer"}},[n._v("样例 15-7"),a("OutboundLink")],1),n._v("). 这也使得可以生成报告和日志文件.")]),n._v(" "),a("p",[n._v("样例 20-12. 日志记录事件")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('#!/bin/bash\n# logevents.sh\n# 作者: Stephane Chazelas.\n# 用于 ABS 许可指南.\n\n# 事件记录到文件.\n# 必须 root 身份执行 (可以写入 /var/log).\n\nROOT_UID=0     # 只有 $UID 为 0 的用户具有 root 权限.\nE_NOTROOT=67   # 非 root 会报错.\n\n\nif [ "$UID" -ne "$ROOT_UID" ]\nthen\n  echo "Must be root to run this script."\n  exit $E_NOTROOT\nfi  \n\n\nFD_DEBUG1=3\nFD_DEBUG2=4\nFD_DEBUG3=5\n\n# === 取消下面两行注释来激活脚本. ===\n# LOG_EVENTS=1\n# LOG_VARS=1\n\n\nlog()  # 时间和日期写入日志文件.\n{\necho "$(date)  $*" >&7     # *追加* 日期到文件.\n#     ^^^^^^^  命令替换\n                           # 见下文.\n}\n\n\n\ncase $LOG_LEVEL in\n 1) exec 3>&2         4> /dev/null 5> /dev/null;;\n 2) exec 3>&2         4>&2         5> /dev/null;;\n 3) exec 3>&2         4>&2         5>&2;;\n *) exec 3> /dev/null 4> /dev/null 5> /dev/null;;\nesac\n\nFD_LOGVARS=6\nif [[ $LOG_VARS ]]\nthen exec 6>> /var/log/vars.log\nelse exec 6> /dev/null                     # 清空输出.\nfi\n\nFD_LOGEVENTS=7\nif [[ $LOG_EVENTS ]]\nthen\n  # exec 7 >(exec gawk \'{print strftime(), $0}\' >> /var/log/event.log)\n  # 上述行在最近高于 bash 2.04 版本会失败，为什么?\n  exec 7>> /var/log/event.log              # 追加到 "event.log".\n  log                                      # 写入时间和日期.\nelse exec 7> /dev/null                     # 清空输出.\nfi\n\necho "DEBUG3: beginning" >&${FD_DEBUG3}\n\nls -l >&5 2>&4                             # 命令1 >&5 2>&4\n\necho "Done"                                # 命令2 \n\necho "sending mail" >&${FD_LOGEVENTS}\n# 输出信息 "sending mail" 到文件描述符 #7.\n\n\nexit 0\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br"),a("span",{staticClass:"line-number"},[n._v("41")]),a("br"),a("span",{staticClass:"line-number"},[n._v("42")]),a("br"),a("span",{staticClass:"line-number"},[n._v("43")]),a("br"),a("span",{staticClass:"line-number"},[n._v("44")]),a("br"),a("span",{staticClass:"line-number"},[n._v("45")]),a("br"),a("span",{staticClass:"line-number"},[n._v("46")]),a("br"),a("span",{staticClass:"line-number"},[n._v("47")]),a("br"),a("span",{staticClass:"line-number"},[n._v("48")]),a("br"),a("span",{staticClass:"line-number"},[n._v("49")]),a("br"),a("span",{staticClass:"line-number"},[n._v("50")]),a("br"),a("span",{staticClass:"line-number"},[n._v("51")]),a("br"),a("span",{staticClass:"line-number"},[n._v("52")]),a("br"),a("span",{staticClass:"line-number"},[n._v("53")]),a("br"),a("span",{staticClass:"line-number"},[n._v("54")]),a("br"),a("span",{staticClass:"line-number"},[n._v("55")]),a("br"),a("span",{staticClass:"line-number"},[n._v("56")]),a("br"),a("span",{staticClass:"line-number"},[n._v("57")]),a("br"),a("span",{staticClass:"line-number"},[n._v("58")]),a("br"),a("span",{staticClass:"line-number"},[n._v("59")]),a("br"),a("span",{staticClass:"line-number"},[n._v("60")]),a("br"),a("span",{staticClass:"line-number"},[n._v("61")]),a("br"),a("span",{staticClass:"line-number"},[n._v("62")]),a("br"),a("span",{staticClass:"line-number"},[n._v("63")]),a("br"),a("span",{staticClass:"line-number"},[n._v("64")]),a("br"),a("span",{staticClass:"line-number"},[n._v("65")]),a("br"),a("span",{staticClass:"line-number"},[n._v("66")]),a("br"),a("span",{staticClass:"line-number"},[n._v("67")]),a("br"),a("span",{staticClass:"line-number"},[n._v("68")]),a("br"),a("span",{staticClass:"line-number"},[n._v("69")]),a("br"),a("span",{staticClass:"line-number"},[n._v("70")]),a("br"),a("span",{staticClass:"line-number"},[n._v("71")]),a("br")])])])}),[],!1,null,null,null);s.default=t.exports}}]);