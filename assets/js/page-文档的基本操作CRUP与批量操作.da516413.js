(window.webpackJsonp=window.webpackJsonp||[]).push([[318],{1216:function(t,a,e){"use strict";e.r(a);var r=e(1),s=Object(r.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"文档的基本操作crup与批量操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#文档的基本操作crup与批量操作"}},[t._v("#")]),t._v(" 文档的基本操作CRUP与批量操作")]),t._v(" "),e("h2",{attrs:{id:"文档的crud"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#文档的crud"}},[t._v("#")]),t._v(" 文档的CRUD")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/1568013522348.png",alt:""}})]),t._v(" "),e("ul",[e("li",[t._v("Type名，约定都用_doc")]),t._v(" "),e("li",[t._v("Create - 如果ID已经存在，会失败")]),t._v(" "),e("li",[t._v("Index - 如果ID不存在，创建新的文档。否则，先删除现有的文档，再创建现有的文档，再创建新的文档，版本会增加")]),t._v(" "),e("li",[t._v("Update - 文档必须已经存在，更新只会对相应字段做增量修改")])]),t._v(" "),e("h3",{attrs:{id:"create一个文档"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create一个文档"}},[t._v("#")]),t._v(" Create一个文档")]),t._v(" "),e("ul",[e("li",[t._v("支持自动生产文档id和指定文档id两种方式")]),t._v(" "),e("li",[t._v('通过调用"post /users/_doc"\n'),e("ul",[e("li",[t._v("系统会自动生产document id")])])]),t._v(" "),e("li",[t._v("使用HTTP PUT user/create/1创建时，URI中显示指定_create，此时如果该id的文档已经存在，操作失败")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/1568015379663.png",alt:""}})]),t._v(" "),e("h3",{attrs:{id:"get一个文档"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#get一个文档"}},[t._v("#")]),t._v(" Get一个文档")]),t._v(" "),e("ul",[e("li",[t._v("找到文档，返回HTTP 200\n"),e("ul",[e("li",[t._v("文档元信息\n"),e("ul",[e("li",[t._v("_index / _type /")]),t._v(" "),e("li",[t._v("版本信息，同一个id的文档，即使被删除，version号也会不断增加")]),t._v(" "),e("li",[t._v("_source中默认包含了文档的所有原始信息")])])])])]),t._v(" "),e("li",[t._v("找不到文档，返回HTTP 404")])]),t._v(" "),e("h3",{attrs:{id:"index-文档"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#index-文档"}},[t._v("#")]),t._v(" Index 文档")]),t._v(" "),e("ul",[e("li",[t._v("Index和Create不一样的地方：如果文档不存在，就索引新的文档。否则现有文档会被删除，新的文档被索引。版本信息+1")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/1568015891907.png",alt:""}})]),t._v(" "),e("h3",{attrs:{id:"update文档"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#update文档"}},[t._v("#")]),t._v(" Update文档")]),t._v(" "),e("ul",[e("li",[t._v("Update方法不会删除原来的文档，而是实现真正的数据更新")]),t._v(" "),e("li",[t._v('Post方法 / Payload需要包含在"doc"中')])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/1568016019747.png",alt:""}})]),t._v(" "),e("h2",{attrs:{id:"api的批量操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#api的批量操作"}},[t._v("#")]),t._v(" API的批量操作")]),t._v(" "),e("h3",{attrs:{id:"bulk-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bulk-api"}},[t._v("#")]),t._v(" Bulk API")]),t._v(" "),e("ul",[e("li",[t._v("支持在一次API调用中，对不同的索引进行操作")]),t._v(" "),e("li",[t._v("支持四种类型操作\n"),e("ul",[e("li",[t._v("Index")]),t._v(" "),e("li",[t._v("Create")]),t._v(" "),e("li",[t._v("Update")]),t._v(" "),e("li",[t._v("Delete")])])]),t._v(" "),e("li",[t._v("可以在URI中指定Index，也可以在请求的Payload中进行")]),t._v(" "),e("li",[t._v("操作中单条操作失败，并不会影响其他操作")]),t._v(" "),e("li",[t._v("返回结果包括了每一条操作执行的结果")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/1568017190479.png",alt:""}})]),t._v(" "),e("h3",{attrs:{id:"批量读取-mget"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#批量读取-mget"}},[t._v("#")]),t._v(" 批量读取 - mget")]),t._v(" "),e("p",[t._v("批量操作，可以减少网络连接所产生的开销，提高性能")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/1568018531224.png",alt:""}})]),t._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/1568018545981.png",alt:""}})]),t._v(" "),e("h3",{attrs:{id:"批量查询-msearch"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#批量查询-msearch"}},[t._v("#")]),t._v(" 批量查询 - msearch")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/1568018796705.png",alt:""}})]),t._v(" "),e("h2",{attrs:{id:"常见的错误返回"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常见的错误返回"}},[t._v("#")]),t._v(" 常见的错误返回")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/1568018899854.png",alt:""}})])])}),[],!1,null,null,null);a.default=s.exports}}]);