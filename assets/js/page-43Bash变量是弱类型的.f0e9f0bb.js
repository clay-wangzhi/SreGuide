(window.webpackJsonp=window.webpackJsonp||[]).push([[133],{1075:function(s,a,n){"use strict";n.r(a);var t=n(1),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"_4-3-bash变量是弱类型的"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-bash变量是弱类型的"}},[s._v("#")]),s._v(" 4.3 Bash变量是弱类型的")]),s._v(" "),n("p",[s._v("不同于许多其他编程语言，Bash 并不区分变量的类型。本质上说，"),n("em",[s._v("Bash 变量是字符串")]),s._v("，但在某些情况下，Bash 允许对变量进行算术运算和比较。决定因素则是变量值是否只含有数字。")]),s._v(" "),n("p",[s._v("样例 4-4. 整数还是字符串？")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# int-or-string.sh")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("a")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2334")]),s._v("                   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 整数。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("let")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a += 1"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a = '),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$a")]),s._v(' "')]),s._v("           "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# a = 2335")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 依旧是整数。")]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("b")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${a"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("23"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("BB}")]),s._v("             "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 将 "23" 替换为 "BB"。')]),s._v("\n                         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# $b 变成了字符串。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"b = '),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$b")]),s._v('"')]),s._v("            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# b = BB35")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("declare")]),s._v(" -i b             "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将其声明为整数并没有什么卵用。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"b = '),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$b")]),s._v('"')]),s._v("            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# b = BB35")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("let")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"b += 1"')]),s._v("             "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# BB35 + 1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"b = '),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$b")]),s._v('"')]),s._v("            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# b = 1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# Bash 认为字符串的"整数值"为0。')]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("c")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("BB34\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"c = '),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$c")]),s._v('"')]),s._v("            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# c = BB34")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("d")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${c"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("BB"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("23}")]),s._v("             "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 将 "BB" 替换为 "23"。')]),s._v("\n                         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# $d 变为了一个整数。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"d = '),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$d")]),s._v('"')]),s._v("            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# d = 2334")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("let")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"d += 1"')]),s._v("             "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2334 + 1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"d = '),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$d")]),s._v('"')]),s._v("            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# d = 2335")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果是空值会怎样呢？")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("e")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# ...也可以是 e="" 或 e=')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"e = '),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$e")]),s._v('"')]),s._v("            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# e =")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("let")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"e += 1"')]),s._v("             "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 空值是否允许进行算术运算？")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"e = '),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$e")]),s._v('"')]),s._v("            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# e = 1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 空值变为了一个整数。")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果时未声明的变量呢？")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"f = '),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$f")]),s._v('"')]),s._v("            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# f =")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("let")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"f += 1"')]),s._v("             "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 是否允许进行算术运算？")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"f = '),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$f")]),s._v('"')]),s._v("            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# f = 1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 未声明变量变为了一个整数。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 然而……")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("let")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"f /= '),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$undecl_var")]),s._v('"')]),s._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以除以0么？")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#   let: f /= : syntax error: operand expected (error token is " ")')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 语法错误！在这里 $undecl_var 并没有被设置为0！")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 但是，仍旧……")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("let")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"f /= 0"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#   let: f /= 0: division by 0 (error token is "0")')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 预期之中。")]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在执行算术运算时，Bash 通常将其空值的整数值设为0。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 但是不要做这种事情！")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 因为这可能会导致一些意外的后果。")]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 结论：上面的结果都表明 Bash 中的变量是弱类型的。")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br")])]),n("p",[s._v("弱类型变量有利有弊。它可以使编程更加灵活、更加容易（给与你足够的想象空间）。但它也同样的容易造成一些小错误，容易养成粗心大意的编程习惯。")]),s._v(" "),n("p",[s._v("为了减轻脚本持续跟踪变量类型的负担，Bash "),n("em",[s._v("不允许")]),s._v("变量声明。")])])}),[],!1,null,null,null);a.default=e.exports}}]);