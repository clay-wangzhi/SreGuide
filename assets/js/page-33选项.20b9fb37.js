(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{670:function(t,e,a){"use strict";a.r(e);var l=a(1),n=Object(l.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_33-选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_33-选项"}},[t._v("#")]),t._v(" 33 选项")]),t._v(" "),a("p",[t._v("选项用来更改shell和脚本的行为.")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/internal.html#SETREF",target:"_blank",rel:"noopener noreferrer"}},[t._v("set"),a("OutboundLink")],1),t._v("命令用来打开脚本中的选项. 你可以在脚本中任何你想让选项生效的地方插入"),a("strong",[t._v("set -o option-name")]),t._v(", 或者使用更简单的形式, "),a("strong",[t._v("set -option-abbrev")]),t._v(". 这两种形式是等价的.")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("#!/bin/bash\n\nset -o verbose\n# # 打印出所有执行前的命令.\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("#!/bin/bash\n\nset -v\n# 与上边的例子具有相同的效果.\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://tldp.org/LDP/abs/images/note.gif",alt:"extra"}}),t._v(" 如果你想在脚本中禁用某个选项, 可以使用"),a("strong",[t._v("set +o option-name")]),t._v("或"),a("strong",[t._v("set +option-abbrev")]),t._v(".")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("#!/bin/bash\nset -o verbose\n# 激活命令回显.\ncommand\n...\ncommand\n\nset +o verbose\n# 禁用命令回显.\ncommand\n# 没有命令回显了.\n\nset -v\n# 激活命令回显.\ncommand\n...\ncommand\n\nset +v\n# 禁用命令回显.\ncommand\n\nexit 0\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br")])]),a("p",[t._v("还有另一种可以在脚本中启用选项的方法, 那就是在脚本头部, #!的后边直接指定选项.")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("#!/bin/bash -x\n#\n# 下边是脚本的主要内容.\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("也可以从命令行中打开脚本的选项. 某些不能与"),a("strong",[t._v("set")]),t._v("命令一起用的选项就可以使用这种方法来打开. - i就是其中之一, 这个选项用来强制脚本以交互的方式运行.")]),t._v(" "),a("p",[a("strong",[t._v("bash - v script - name")])]),t._v(" "),a("p",[a("strong",[t._v("bash - o verbose script - name")])]),t._v(" "),a("p",[t._v("下表列出了一些有用的选项. 它们都可以使用缩写的形式来指定(开头加一个破折号), 也可以使用完整名字来指定(开头加上双破折号, 或者使用-o选项来指定).")]),t._v(" "),a("p",[t._v("表格 33-1. Bash选项")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("缩写")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("名称")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("作用")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-B")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("brace expansion")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("开启"),a("a",{attrs:{href:""}},[t._v("大括号展开")]),t._v("(默认 setting = on)")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("+B")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("brace expansion")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("关闭大括号展开")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-C")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("noclobber")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("防止重定向时覆盖文件(可能会被>|覆盖)")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-D")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("(none)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("列出用双引号引用起来的, 以$为前缀的字符串, 但是不执行脚本中的命令")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-a")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("all export")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("export(导出)所有定义过的变量")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-b")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("notify")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("当后台运行的作业终止时, 给出通知(脚本中并不常见)")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-c ...")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("(none)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("从...中读取命令")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("checkjobs")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("(none)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("通知有活跃shell"),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/x9644.html#JOBSREF",target:"_blank",rel:"noopener noreferrer"}},[t._v("任务"),a("OutboundLink")],1),t._v("的用户退出。"),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/bashver4.html#BASH4REF",target:"_blank",rel:"noopener noreferrer"}},[t._v("Bash 4"),a("OutboundLink")],1),t._v('版本中引入，仍然处于"实验"阶段. 用法:shopt -s checkjobs .(注意：可能会hang！')])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-e")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("errexit")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("当脚本发生第一个错误时, 就退出脚本, 换种说法就是, 当一个命令返回非零值时, 就退出脚本(除了"),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/loops1.html#UNTILLOOPREF",target:"_blank",rel:"noopener noreferrer"}},[t._v("until"),a("OutboundLink")],1),t._v("或"),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/loops1.html#WHILELOOPREF",target:"_blank",rel:"noopener noreferrer"}},[t._v("while loops"),a("OutboundLink")],1),t._v(", "),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/testconstructs.html#TESTCONSTRUCTS1",target:"_blank",rel:"noopener noreferrer"}},[t._v("if-tests"),a("OutboundLink")],1),t._v(", "),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/list-cons.html#LCONS1",target:"_blank",rel:"noopener noreferrer"}},[t._v("list constructs"),a("OutboundLink")],1),t._v(")")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-f")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("noglob")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("禁用文件名扩展(就是禁用globbing)")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("globstar")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/bashver4.html#GLOBSTARREF",target:"_blank",rel:"noopener noreferrer"}},[t._v("globbing star-match"),a("OutboundLink")],1)]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("打开"),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/globbingref.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("globbling"),a("OutboundLink")],1),t._v("操作符(Bash "),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/bashver4.html#BASH4REF",target:"_blank",rel:"noopener noreferrer"}},[t._v("4+"),a("OutboundLink")],1),t._v("). 使用方法：shopt -s globstar")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-i")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("interactive")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("让脚本以交互模式运行")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-n")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("noexec")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("从脚本中读取命令, 但是不执行它们(做语法检查)")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-o Option-Name")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("(none)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("调用Option-Name选项")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-o posix")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("POSIX")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("修改Bash或被调用脚本的行为, 使其符合"),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/sha-bang.html#POSIX2REF",target:"_blank",rel:"noopener noreferrer"}},[t._v("POSIX"),a("OutboundLink")],1),t._v("标准.")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-o pipefail")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("pipe failure")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("创建一个管道去返回最后一条命令的"),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/exit-status.html#EXITSTATUSREF",target:"_blank",rel:"noopener noreferrer"}},[t._v("退出状态码"),a("OutboundLink")],1),t._v("，这个返回值是一个非0的返回值")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-p")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("privileged")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v('以"suid"身份来运行脚本(小心!)')])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-r")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("restricted")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("以受限模式来运行脚本(参考 "),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/restricted-sh.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("22"),a("OutboundLink")],1),t._v(").")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-s")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("stdin")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("从stdin 中读取命令")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-t")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("(none)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("执行完第一个命令之后, 就退出")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-u")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("nounset")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("如果尝试使用了未定义的变量, 就会输出一个错误消息, 然后强制退出")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-v")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("verbose")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("在执行每个命令之前, 把每个命令打印到stdout上")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-x")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("xtrace")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("与-v选项类似, 但是会打印完整命令")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("-")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("(none)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("选项结束标志. 后面的参数为"),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/internalvariables.html#POSPARAMREF",target:"_blank",rel:"noopener noreferrer"}},[t._v("位置参数"),a("OutboundLink")],1),t._v(".")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("--")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("(none)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("unset(释放)位置参数. 如果指定了参数列表(-- arg1 arg2), 那么位置 参数将会依次设置到参数列表中.")])])])])])}),[],!1,null,null,null);e.default=n.exports}}]);