(window.webpackJsonp=window.webpackJsonp||[]).push([[180],{1013:function(s,t,a){"use strict";a.r(t);var e=a(1),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"_7-2-文件测试操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-文件测试操作"}},[s._v("#")]),s._v(" 7.2 文件测试操作")]),s._v(" "),a("p",[s._v("下列每一个运算符在满足其下条件时，返回的结果为真。")]),s._v(" "),a("h3",{attrs:{id:"e"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#e"}},[s._v("#")]),s._v(" -e")]),s._v(" "),a("p",[s._v("检测文件是否存在")]),s._v(" "),a("h3",{attrs:{id:"a"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#a"}},[s._v("#")]),s._v(" -a")]),s._v(" "),a("p",[s._v("检测文件是否存在")]),s._v(" "),a("p",[s._v("等价于 "),a("code",[s._v("-e")]),s._v("。不推荐使用，已被弃用"),a("sup",{staticClass:"footnote-ref"},[a("a",{attrs:{href:"#footnote1"}},[s._v("[1]")]),a("a",{staticClass:"footnote-anchor",attrs:{id:"footnote-ref1"}})]),s._v("。")]),s._v(" "),a("h3",{attrs:{id:"f"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#f"}},[s._v("#")]),s._v(" -f")]),s._v(" "),a("p",[s._v("文件是常规文件(regular file)，而非目录或 "),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/devref1.html#DEVFILEREF",target:"_blank",rel:"noopener noreferrer"}},[s._v("设备文件"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"s"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#s"}},[s._v("#")]),s._v(" -s")]),s._v(" "),a("p",[s._v("文件大小不为0")]),s._v(" "),a("h3",{attrs:{id:"d"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#d"}},[s._v("#")]),s._v(" -d")]),s._v(" "),a("p",[s._v("文件是一个目录")]),s._v(" "),a("h3",{attrs:{id:"b"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#b"}},[s._v("#")]),s._v(" -b")]),s._v(" "),a("p",[s._v("文件是一个 "),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/devref1.html#BLOCKDEVREF",target:"_blank",rel:"noopener noreferrer"}},[s._v("块设备"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"c"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#c"}},[s._v("#")]),s._v(" -c")]),s._v(" "),a("p",[s._v("文件是一个 "),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/devref1.html#CHARDEVREF",target:"_blank",rel:"noopener noreferrer"}},[s._v("字符设备"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("device0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/dev/sda2"')]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /   (根目录)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -b "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$device0")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$device0")]),s._v(' is a block device."')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /dev/sda2 是一个块设备。")]),s._v("\n\n\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("device1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/dev/ttyS1"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# PCMCIA 调制解调卡")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -c "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$device1")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$device1")]),s._v(' is a character device."')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /dev/ttyS1 是一个字符设备。")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h3",{attrs:{id:"p"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#p"}},[s._v("#")]),s._v(" -p")]),s._v(" "),a("p",[s._v("文件是一个 "),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/special-chars.html#PIPEREF",target:"_blank",rel:"noopener noreferrer"}},[s._v("管道设备"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("show_input_type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -p /dev/fd/0 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" PIPE "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" STDIN\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nshow_input_type "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Input"')]),s._v("                           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# STDIN")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Input"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" show_input_type                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# PIPE")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这个例子由 Carl Anderson 提供。")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h3",{attrs:{id:"h"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#h"}},[s._v("#")]),s._v(" -h")]),s._v(" "),a("p",[s._v("文件是一个 "),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/basic.html#SYMLINKREF",target:"_blank",rel:"noopener noreferrer"}},[s._v("符号链接"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"l"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#l"}},[s._v("#")]),s._v(" -L")]),s._v(" "),a("p",[s._v("文件是一个符号链接")]),s._v(" "),a("h3",{attrs:{id:"s-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#s-2"}},[s._v("#")]),s._v(" -S")]),s._v(" "),a("p",[s._v("文件是一个 "),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/devref1.html#SOCKETREF",target:"_blank",rel:"noopener noreferrer"}},[s._v("套接字"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"t"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#t"}},[s._v("#")]),s._v(" -t")]),s._v(" "),a("p",[s._v("文件（"),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/io-redirection.html#FDREF",target:"_blank",rel:"noopener noreferrer"}},[s._v("文件描述符"),a("OutboundLink")],1),s._v("）与终端设备关联")]),s._v(" "),a("p",[s._v("该选项通常被用于 "),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/intandnonint.html#II2TEST",target:"_blank",rel:"noopener noreferrer"}},[s._v("测试"),a("OutboundLink")],1),s._v(" 脚本中的 "),a("code",[s._v("stdin [ -t 0 ]")]),s._v(" 或 "),a("code",[s._v("stdout [ -t 1 ]")]),s._v(" 是否为终端设备。")]),s._v(" "),a("h3",{attrs:{id:"r"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#r"}},[s._v("#")]),s._v(" -r")]),s._v(" "),a("p",[s._v("该文件对执行测试的用户可读")]),s._v(" "),a("h3",{attrs:{id:"w"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#w"}},[s._v("#")]),s._v(" -w")]),s._v(" "),a("p",[s._v("该文件对执行测试的用户可写")]),s._v(" "),a("h3",{attrs:{id:"x"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#x"}},[s._v("#")]),s._v(" -x")]),s._v(" "),a("p",[s._v("该文件可被执行测试的用户所执行")]),s._v(" "),a("h3",{attrs:{id:"g"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#g"}},[s._v("#")]),s._v(" -g")]),s._v(" "),a("p",[s._v("文件或目录设置了 set-group-id "),a("code",[s._v("sgid")]),s._v(" 标志")]),s._v(" "),a("p",[s._v("如果一个目录设置了 "),a("code",[s._v("sgid")]),s._v(" 标志，那么在该目录中所有的新建文件的权限组都归属于该目录的权限组，而非文件创建者的权限组。该标志对共享文件夹很有用。")]),s._v(" "),a("h3",{attrs:{id:"u"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#u"}},[s._v("#")]),s._v(" -u")]),s._v(" "),a("p",[s._v("文件设置了 set-user-id "),a("code",[s._v("suid")]),s._v(" 标志。")]),s._v(" "),a("p",[s._v("一个属于 root 的可执行文件设置了 "),a("code",[s._v("suid")]),s._v(" 标志后，即使是一个普通用户执行也拥有 root 权限"),a("sup",{staticClass:"footnote-ref"},[a("a",{attrs:{href:"#footnote2"}},[s._v("[2]")]),a("a",{staticClass:"footnote-anchor",attrs:{id:"footnote-ref2"}})]),s._v("。对需要访问硬件设备的可执行文件（例如 "),a("code",[s._v("pppd")]),s._v(" 和 "),a("code",[s._v("cdrecord")]),s._v("）很有用。如果没有 "),a("code",[s._v("suid")]),s._v(" 标志，这些可执行文件就不能被非 root 用户所调用了。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("-rwsr-xr-t    1 root       178236 Oct  2  2000 /usr/sbin/pppd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("设置了 "),a("code",[s._v("suid")]),s._v(" 标志后，在权限中会显示 "),a("code",[s._v("s")]),s._v("。")]),s._v(" "),a("h3",{attrs:{id:"k"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#k"}},[s._v("#")]),s._v(" -k")]),s._v(" "),a("p",[s._v("设置了粘滞位(sticky bit)。")]),s._v(" "),a("p",[s._v("标志粘滞位是一种特殊的文件权限。如果文件设置了粘滞位，那么该文件将会被存储在高速缓存中以便快速访问"),a("sup",{staticClass:"footnote-ref"},[a("a",{attrs:{href:"#footnote3"}},[s._v("[3]")]),a("a",{staticClass:"footnote-anchor",attrs:{id:"footnote-ref3"}})]),s._v("。如果目录设置了该标记，那么它将会对目录的写权限进行限制，目录中只有文件的拥有者可以修改或删除文件。设置标记后你可以在权限中看到 "),a("code",[s._v("t")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("drwxrwxrwt    7 root         1024 May 19 21:26 tmp/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果一个用户不是设置了粘滞位目录的拥有者，但对该目录有写权限，那么他仅仅可以删除目录中他所拥有的文件。这可以防止用户不经意间删除或修改其他人的文件，例如 "),a("code",[s._v("/tmp")]),s._v(" 文件夹。（当然目录的所有者可以删除或修改该目录下的所有文件）")]),s._v(" "),a("h3",{attrs:{id:"o"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#o"}},[s._v("#")]),s._v(" -O")]),s._v(" "),a("p",[s._v("执行用户是文件的拥有者")]),s._v(" "),a("h3",{attrs:{id:"g-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#g-2"}},[s._v("#")]),s._v(" -G")]),s._v(" "),a("p",[s._v("文件的组与执行用户的组相同")]),s._v(" "),a("h3",{attrs:{id:"n"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#n"}},[s._v("#")]),s._v(" -N")]),s._v(" "),a("p",[s._v("文件在在上次访问后被修改过了")]),s._v(" "),a("h3",{attrs:{id:"f1-nt-f2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#f1-nt-f2"}},[s._v("#")]),s._v(" f1 -nt f2")]),s._v(" "),a("p",[s._v("文件 f1 比文件 f2 新")]),s._v(" "),a("h3",{attrs:{id:"f1-ot-f2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#f1-ot-f2"}},[s._v("#")]),s._v(" f1 -ot f2")]),s._v(" "),a("p",[s._v("文件 f1 比文件 f2 旧")]),s._v(" "),a("h3",{attrs:{id:"f1-ef-f2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#f1-ef-f2"}},[s._v("#")]),s._v(" f1 -ef f2")]),s._v(" "),a("p",[s._v("文件 f1 和文件 f2 硬链接到同一个文件")]),s._v(" "),a("h3",{attrs:{id:""}},[a("a",{staticClass:"header-anchor",attrs:{href:"#"}},[s._v("#")]),s._v(" !")]),s._v(" "),a("p",[s._v("取反——对测试结果取反(如果条件缺失则返回真)。")]),s._v(" "),a("p",[s._v("样例 7-4. 检测链接是否损坏")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# broken-link.sh")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Lee bigelow <ligelowbee@yahoo.com> 编写。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ABS Guide 经许可可以使用。")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  该脚本用来发现输出损坏的链接。输出的结果是被引用的，")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#+ 所以可以直接导到 xargs 中进行处理 ：）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  例如：sh broken-link.sh /somedir /someotherdir|xargs rm")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  更加优雅的方式：")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#  find "somedir" -type 1 -print0|\\')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  xargs -r0 file|\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#  grep "broken symbolic"|')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  sed -e 's/^\\|: *broken symbolic.*$/\"/g'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  但是这种方法不是纯 Bash 写法。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  警告：小心 /proc 文件下的文件和任意循环链接！")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("############################################")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  如果不给脚本传任何参数，那么 directories-to-search 设置为当前目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#+ 否则设置为传进的参数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#####################")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$#")]),s._v(" -eq "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("directory")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("directory")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  函数 linkchk 是用来检测传入的文件夹中是否包含损坏的链接文件，")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#+ 并引用输出他们。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  如果文件夹中包含子文件夹，那么将子文件夹继续传给 linkchk 函数进行检测。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#################")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("linkchk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("element")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("/*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -h "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$element")]),s._v('"')]),s._v(" -a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -e "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$element")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$element")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v('"\n      '),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -d "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$element")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" linkchk "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$element")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -h 用来检测是否是链接，-d 用来检测是否是文件夹。")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  检测传递给 linkchk() 函数的参数是否是一个存在的文件夹，")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#+ 如果不是则报错。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("directory")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$direcotrys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -d "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$directory")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" linkchk "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$directory")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$directory")]),s._v(' is not a directory"')]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Usage '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(' dir1 dir2 ..."')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br")])]),a("p",[a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/zeros.html#COOKIES",target:"_blank",rel:"noopener noreferrer"}},[s._v("样例 31-1"),a("OutboundLink")],1),s._v("，"),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/loops1.html#BINGREP",target:"_blank",rel:"noopener noreferrer"}},[s._v("样例 11-8"),a("OutboundLink")],1),s._v("，"),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/loops1.html#FILEINFO",target:"_blank",rel:"noopener noreferrer"}},[s._v("样例 11-3"),a("OutboundLink")],1),s._v("，"),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/zeros.html#RAMDISK",target:"_blank",rel:"noopener noreferrer"}},[s._v("样例 31-3"),a("OutboundLink")],1),s._v("和"),a("a",{attrs:{href:"http://tldp.org/LDP/abs/html/contributed-scripts.html#MAILFORMAT",target:"_blank",rel:"noopener noreferrer"}},[s._v("样例 A-1"),a("OutboundLink")],1),s._v(" 也包含了测试运算符的使用。")]),s._v(" "),a("hr",{staticClass:"footnotes-sep"}),s._v(" "),a("section",{staticClass:"footnotes"},[a("ol",{staticClass:"footnotes-list"},[a("li",{staticClass:"footnote-item",attrs:{id:"footnote1"}},[a("p",[s._v("摘自1913年版本的韦氏词典"),a("br"),a("pre",[s._v("Deprecate"),a("br"),s._v("..."),a("br"),a("br"),s._v("To pray against, as an evil;"),a("br"),s._v("to seek to avert by prayer;"),a("br"),s._v("to desire the removal of;"),a("br"),s._v("to seek deliverance from;"),a("br"),s._v("to express deep regret for;"),a("br"),s._v("to disapprove of strongly.")]),s._v(" "),a("a",{staticClass:"footnote-backref",attrs:{href:"#footnote-ref1"}},[s._v("↩︎")])])]),s._v(" "),a("li",{staticClass:"footnote-item",attrs:{id:"footnote2"}},[a("p",[s._v("注意使用 suid 的可执行文件可能会带来安全问题。suid 标记对 shell 脚本没有影响。 "),a("a",{staticClass:"footnote-backref",attrs:{href:"#footnote-ref2"}},[s._v("↩︎")])])]),s._v(" "),a("li",{staticClass:"footnote-item",attrs:{id:"footnote3"}},[a("p",[s._v("在 Linux 系统中，文件已经不使用粘滞位了, 粘滞位只作用于目录。 "),a("a",{staticClass:"footnote-backref",attrs:{href:"#footnote-ref3"}},[s._v("↩︎")])])])])])])}),[],!1,null,null,null);t.default=n.exports}}]);