(window.webpackJsonp=window.webpackJsonp||[]).push([[190],{947:function(s,e,t){"use strict";t.r(e);var a=t(1),n=Object(a.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"_7-常见问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-常见问题"}},[s._v("#")]),s._v(" 7 常见问题")]),s._v(" "),t("h3",{attrs:{id:"_4-3-关于ssh连接一些常见的错误说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-关于ssh连接一些常见的错误说明"}},[s._v("#")]),s._v(" 4.3 关于ssh连接一些常见的错误说明")]),s._v(" "),t("ol",[t("li",[t("code",[s._v("ERROR! to use the 'ssh' connection type with passwords, you must install the sshpass program")])])]),s._v(" "),t("p",[s._v("完整错误示例如下：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('root@ctnr:/etc/ansible# ansible \'*.a32-168-1.*\' -m ping\nctnr.a32-168-1.prod.yiz | FAILED! => {\n    "failed": true, \n    "msg": "ERROR! to use the \'ssh\' connection type with passwords, you must install the sshpass program"\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("一般出现这种错误，是在通过密码验证远程被管理机的时候，需要在server端安装sshpass：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yum install sshpass -y \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",[t("li",[t("code",[s._v("Using a SSH password instead of a key is not possible because Host Key checking is enabled and sshpass does not support this. Please add this host's fingerprint to your known_hosts file to manage this host")])])]),s._v(" "),t("p",[s._v("完整错误如下：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ansible test -a 'uptime'\n\n192.168.1.1| FAILED =>Using a SSH password instead of a key is not possible because HostKey checking is enabled and sshpass does not support this.Please add this host's fingerprint to your known_hosts file to manage this host.\n192.168.1.2 | FAILED => Using a SSH password instead of a key is not possible because Host Key checking is enabled and sshpass does not support this.  Please add this host's fingerprint to your known_hosts file to manage this host.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("这种错误通常就出现在server端第一次连接被管理机的时候，就是上面说到的需要通过输入yes/no进行确认将key字符串加入到"),t("code",[s._v("~/.ssh/known_hosts")]),s._v("文件中。")]),s._v(" "),t("p",[s._v("解决办法有两个：")]),s._v(" "),t("ul",[t("li",[s._v("通过修改上面提到的host_key_checking，将其设置为false")]),s._v(" "),t("li",[s._v("通过修改ssh_args参数，修改如下：")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ssh_args = -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])}),[],!1,null,null,null);e.default=n.exports}}]);