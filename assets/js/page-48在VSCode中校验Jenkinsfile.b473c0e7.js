(window.webpackJsonp=window.webpackJsonp||[]).push([[144],{978:function(e,n,i){"use strict";i.r(n);var t=i(1),s=Object(t.a)({},(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[i("h1",{attrs:{id:"_4-8-在-vs-code-中校验-jenkinsfile"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_4-8-在-vs-code-中校验-jenkinsfile"}},[e._v("#")]),e._v(" 4.8 在 VS Code 中校验 Jenkinsfile")]),e._v(" "),i("blockquote",[i("p",[e._v("转载自："),i("a",{attrs:{href:"https://github.com/jenkins-zh/jenkins-zh/blob/master/content/wechat/articles/2018/11/2018-11-21-validate-jenkinsfile.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("在 VS Code 中校验 Jenkinsfile |jenkins-zh/jenkins-zh | github "),i("OutboundLink")],1)])]),e._v(" "),i("p",[e._v("在日常工作中，我经常需要创建或修改很多 Jenkinsfile，有时还会发生错误。这是一个非常繁琐的流程——修改 Jenkinsfile，提交、推送，然后等 Jenkins 提醒你少加了一个括号。")]),e._v(" "),i("p",[e._v("Command-line Pipeline Linter(https://jenkins.io/doc/book/pipeline/development/) 可以有效地减少编写 Jenkinsfile 所需要的调试时间，但是它也有一些不方便的地方。你需要使用像 curl 或 ssh 的工具来连接你的 Jenkins，还需要正确地记住验证 Jenkinsfile 的命令。尽管如此，对我来说，这个方案还是不尽如人意。")]),e._v(" "),i("p",[e._v("鉴于每天都会使用 VS Code，于是我开始着手为此研发插件，使得校验 Jenkinsfile 变得更加友好。")]),e._v(" "),i("p",[i("code",[e._v("Jenkins Pipeline Linter Connector")]),e._v(" 的作用就是，把当前打开的文件推送到你的 Jenkins，然后在 VS Code 中显示校验结果。")]),e._v(" "),i("p",[i("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/example1.gif",alt:""}})]),e._v(" "),i("p",[i("img",{attrs:{src:"https://gitee.com/clay-wangzhi/blogImg/raw/master/blogImg/example2.gif",alt:""}})]),e._v(" "),i("p",[e._v("你可以在 VS Code 插件浏览器中或通过下面的地址找到该插件 https://marketplace.visualstudio.com/items?itemName=janjoerke.jenkins-pipeline-linter-connector 。")]),e._v(" "),i("p",[e._v("该插件会在 VS Code 中添加四个配置选项，你必须要使用这些选项来配置用于验证的 Jenkins。")]),e._v(" "),i("ul",[i("li",[i("code",[e._v("jenkins.pipeline.linter.connector.url")]),e._v(" 是 Jenkins 期望的 POST 请求地址，包含你要校验的 Jenkinsfile 文件。通常为 "),i("em",[e._v("http://<your_jenkins_server:port>/pipeline-model-converter/validate")]),e._v("。")]),e._v(" "),i("li",[i("code",[e._v("jenkins.pipeline.linter.connector.user")]),e._v(" 允许指定你的 Jenkins 用户名。")]),e._v(" "),i("li",[i("code",[e._v("jenkins.pipeline.linter.connector.pass")]),e._v(" 允许指定你的 Jenkins 密码。")]),e._v(" "),i("li",[i("code",[e._v("jenkins.pipeline.linter.connector.crumbUrl")]),e._v(" 当你的 Jenkins 启用了 CRSF 时必须指定。通常为 "),i("em",[e._v("http://<your_jenkins_server:port>/crumbIssuer/api/xml?xpath=concat(//crumbRequestField,%22:%22,//crumb)")]),e._v("。")])])])}),[],!1,null,null,null);n.default=s.exports}}]);