(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{623:function(s,a,t){"use strict";t.r(a);var n=t(1),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"_10-1-字符串处理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-1-字符串处理"}},[s._v("#")]),s._v(" 10.1 字符串处理")]),s._v(" "),t("p",[s._v("Bash 支持的字符串操作数量达到了一个惊人的数目。但可惜的是，这些操作工具缺乏一个统一的核心。他们中的一些是"),t("a",{attrs:{href:"http://tldp.org/LDP/abs/html/parameter-substitution.html#PARAMSUBREF",target:"_blank",rel:"noopener noreferrer"}},[s._v("参数代换"),t("OutboundLink")],1),s._v("的子集，另外一些则是 UNIX 下 "),t("a",{attrs:{href:"http://tldp.org/LDP/abs/html/moreadv.html#EXPRREF",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("expr")]),t("OutboundLink")],1),s._v(" 函数的子集。这将会导致语法前后不一致或者功能上出现重叠，更不用说那些可能导致的混乱了。")]),s._v(" "),t("h3",{attrs:{id:"字符串长度"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#字符串长度"}},[s._v("#")]),s._v(" 字符串长度")]),s._v(" "),t("h4",{attrs:{id:"string"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#string"}},[s._v("#")]),s._v(" "),t("code",[s._v("${#string}")])]),s._v(" "),t("h4",{attrs:{id:"expr-length-string"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#expr-length-string"}},[s._v("#")]),s._v(" "),t("code",[s._v("expr length $string")])]),s._v(" "),t("p",[s._v("上面两个表达式等价于C语言中的 "),t("code",[s._v("strlen()")]),s._v(" 函数。")]),s._v(" "),t("h4",{attrs:{id:"expr-string"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#expr-string"}},[s._v("#")]),s._v(" "),t("code",[s._v("expr \"$string\" : '.*'")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stringZ")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("abcABC123ABCabc\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("stringZ}")]),s._v("                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 15")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expr")]),s._v(" length $stringz"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 15")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$stringZ")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.*'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 15")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("样例 10-1. 在文本的段落之间插入空行")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# paragraph-space.sh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 版本 2.1，发布日期 2012年7月29日")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在无空行的文本文件的段落之间插入空行。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 像这样使用: $0 <FILENAME")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MINLEN")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以试试修改这个值。它用来做判断。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  假设一行的字符数小于 $MINLEN，并且以句点结束段落。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#+ 结尾部分有练习！")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v(" line  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当文件有许多行的时候")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$line")]),s._v('"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出行本身。")]),s._v("\n  \n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("len")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("line}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$len")]),s._v('"')]),s._v(" -lt "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$MINLEN")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$line")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("~ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("*"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# if [[ "$len" -lt "$MINLEN" && "$line" =~ \\[*\\.\\] ]]')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新版Bash将不能正常运行前一个版本的脚本。Ouch！")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 感谢 Halim Srama 指出这点，并且给出了修正版本。")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  在该行以句点结束时，")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#+ 增加一行空行。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 练习：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -----")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  1) 该脚本通常会在文件的最后插入一个空行。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#+    尝试解决这个问题。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  2) 在第17行仅仅考虑到了以句点作为句子终止的情况。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#+    修改以满足其他的终止符，例如 ?, ! 和 "。')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br")])]),t("h3",{attrs:{id:"起始部分字符串匹配长度"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#起始部分字符串匹配长度"}},[s._v("#")]),s._v(" 起始部分字符串匹配长度")]),s._v(" "),t("h4",{attrs:{id:"expr-match-string-substring"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#expr-match-string-substring"}},[s._v("#")]),s._v(" "),t("code",[s._v("expr match \"$string\" '$substring'")])]),s._v(" "),t("p",[s._v("其中，"),t("code",[s._v("$substring")]),s._v(" 是一个"),t("a",{attrs:{href:"http://tldp.org/LDP/abs/html/regexp.html#REGEXREF",target:"_blank",rel:"noopener noreferrer"}},[s._v("正则表达式"),t("OutboundLink")],1),s._v("。")]),s._v(" "),t("h4",{attrs:{id:"expr-string-substring"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#expr-string-substring"}},[s._v("#")]),s._v(" "),t("code",[s._v("expr \"$string\" : '$substring'")])]),s._v(" "),t("p",[s._v("其中，"),t("code",[s._v("$substring")]),s._v(" 是一个正则表达式。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stringZ")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("abcABC123ABCabc\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#       |------|")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#       12345678")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expr")]),s._v(" match "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$stringZ")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'abc[A-Z]*.2'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 8")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$stringZ")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'abc[A-Z]*.2'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 8")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#索引"}},[s._v("#")]),s._v(" 索引")]),s._v(" "),t("h4",{attrs:{id:"expr-index-string-substring"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#expr-index-string-substring"}},[s._v("#")]),s._v(" "),t("code",[s._v("expr index $string $substring")])]),s._v(" "),t("p",[s._v("返回在 "),t("code",[s._v("$string")]),s._v(" 中第一个出现的 "),t("code",[s._v("$substring")]),s._v(" 字符所在的位置。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stringZ")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("abcABC123ABCabc\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#       123456 ...")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expr")]),s._v(" index "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$stringZ")]),s._v('"')]),s._v(" C12"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 6")]),s._v("\n                                             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# C 的位置。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expr")]),s._v(" index "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$stringZ")]),s._v('"')]),s._v(" 1c"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 'c' (第三号位) 较 '1' 出现的更早。")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("几乎等价于C语言中的 "),t("code",[s._v("strchr()")]),s._v("。")]),s._v(" "),t("h3",{attrs:{id:"截取字符串-字符串分片"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#截取字符串-字符串分片"}},[s._v("#")]),s._v(" 截取字符串（字符串分片）")]),s._v(" "),t("h4",{attrs:{id:"string-position"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#string-position"}},[s._v("#")]),s._v(" "),t("code",[s._v("${string:position}")])]),s._v(" "),t("p",[s._v("在 "),t("code",[s._v("$string")]),s._v(" 中截取自 "),t("code",[s._v("$position")]),s._v(" 起的字符串。")]),s._v(" "),t("p",[s._v("如果参数 "),t("code",[s._v("$string")]),s._v(' 是 "*" 或者 "@"，那么将会截取自 '),t("code",[s._v("$position")]),s._v(" 起的"),t("a",{attrs:{href:"http://tldp.org/LDP/abs/html/internalvariables.html#POSPARAMREF",target:"_blank",rel:"noopener noreferrer"}},[s._v("位置参数"),t("OutboundLink")],1),s._v("。"),t("sup",{staticClass:"footnote-ref"},[t("a",{attrs:{href:"#fn1"}},[s._v("[1]")]),t("a",{staticClass:"footnote-anchor",attrs:{id:"fnref1"}})])]),s._v(" "),t("h4",{attrs:{id:"string-position-length"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#string-position-length"}},[s._v("#")]),s._v(" "),t("code",[s._v("${string:position:length}")])]),s._v(" "),t("p",[s._v("在 "),t("code",[s._v("$string")]),s._v(" 中截取自 "),t("code",[s._v("$position")]),s._v(" 起，长度为 "),t("code",[s._v("$length")]),s._v(" 的字符串。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stringZ")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("abcABC123ABCabc\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#       0123456789.....")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#       索引位置从0开始。")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${stringZ"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("0}")]),s._v("                            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# abcABC123ABCabc")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${stringZ"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("1}")]),s._v("                            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bcABC123ABCabc")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${stringZ"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("7}")]),s._v("                            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 23ABCabc")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${stringz"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("7"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("3}")]),s._v("                          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 23A")]),s._v("\n                                             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 三个字符的子字符串。")]),s._v("\n                                             \n                                             \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从右至左进行截取可行么？")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${stringZ"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),s._v("4}")]),s._v("                           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# abcABC123ABCabc")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ${parameter:-default} 将会得到整个字符串。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 但是……")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${stringZ"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("(-4)}")]),s._v("                         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Cabc")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${stringZ"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" -4}")]),s._v("                          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Cabc")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 现在可以了。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 括号或者增加空格都可以"转义"位置参数。')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 感谢 Dan Jacobson 指出这些。")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br")])]),t("p",[s._v("其中，参数 "),t("code",[s._v("position")]),s._v(" 与 "),t("code",[s._v("length")]),s._v(" 可以传入一个变量而不一定需要传入常量。")]),s._v(" "),t("p",[s._v("样例 10-2. 产生一个8个字符的随机字符串")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rand-string.sh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 产生一个8个字符的随机字符串。")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -n "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  如果在命令行中已经传入了参数，")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#+ 那么就以它作为起始字符串。")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("str0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v('"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  否则，就将脚本的进程标识符PID作为起始字符串。")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("str0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$$")]),s._v('"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("POS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从字符串的第二位开始。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LEN")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 截取八个字符。")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("str1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$str0")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" md5sum "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" md5sum "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#                      ^^^^^^   ^^^^^^")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将字符串通过管道计算两次 md5 来进行两次混淆。")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("randstring")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${str1"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("$POS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("$LEN}")]),s._v('"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#                  ^^^^ ^^^^")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 允许传入参数")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$randstring")]),s._v('"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bozo$ ./rand-string.sh my-password")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1bdd88c4")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不过不建议将其作为一种能够抵抗黑客的生成密码的方法。")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br")])]),t("p",[s._v("如果参数 "),t("code",[s._v("$string")]),s._v(' 是 "*" 或者 "@"，那么将会截取自 '),t("code",[s._v("$position")]),s._v(" 起，最大个数为 "),t("code",[s._v("$length")]),s._v(" 的位置参数。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${*"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("2}")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出第二个及之后的所有位置参数。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${@"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("2}")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 同上。")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${*"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("2"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("3}")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从第二个位置参数起，输出三个位置参数。 ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"expr-substr-string-position-length"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#expr-substr-string-position-length"}},[s._v("#")]),s._v(" "),t("code",[s._v("expr substr $string $position $length")])]),s._v(" "),t("p",[s._v("在 "),t("code",[s._v("$string")]),s._v(" 中截取自 "),t("code",[s._v("$position")]),s._v(" 起，长度为 "),t("code",[s._v("$length")]),s._v(" 的字符串。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stringZ")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("abcABC123ABCabc\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#       123456789......")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#       索引位置从1开始。")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expr")]),s._v(" substr $stringZ "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ab")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expr")]),s._v(" substr $stringZ "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ABC")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h4",{attrs:{id:"expr-match-string-substring-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#expr-match-string-substring-2"}},[s._v("#")]),s._v(" "),t("code",[s._v("expr match \"$string\" '\\($substring\\)'")])]),s._v(" "),t("p",[s._v("在 "),t("code",[s._v("$string")]),s._v(" 中截取自 "),t("code",[s._v("$position")]),s._v(" 起的字符串，其中 "),t("code",[s._v("$substring")]),s._v(" 是"),t("a",{attrs:{href:"http://tldp.org/LDP/abs/html/regexp.html#REGEXREF",target:"_blank",rel:"noopener noreferrer"}},[s._v("正则表达式"),t("OutboundLink")],1),s._v("。")]),s._v(" "),t("h4",{attrs:{id:"expr-string-substring-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#expr-string-substring-2"}},[s._v("#")]),s._v(" "),t("code",[s._v("expr \"$string\" : '\\($substring\\)'")])]),s._v(" "),t("p",[s._v("在 "),t("code",[s._v("$string")]),s._v(" 中截取自 "),t("code",[s._v("$position")]),s._v(" 起的字符串，其中 "),t("code",[s._v("$substring")]),s._v(" 是正则表达式。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stringZ")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("abcABC123ABCabc\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#       =======")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expr")]),s._v(" match "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$stringZ")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\(.[b-c]*[A-Z]..[0-9]\\)'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# abcABC1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$stringZ")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\(.[b-c]*[A-Z]..[0-9]\\)'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# abcABC1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$stringZ")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\(.......\\)'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("                   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# abcABC1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上面所有的形式都给出了相同的结果。")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h4",{attrs:{id:"expr-match-string-substring-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#expr-match-string-substring-3"}},[s._v("#")]),s._v(" "),t("code",[s._v("expr match \"$string\" '.*\\($substring\\)'")])]),s._v(" "),t("p",[s._v("从 "),t("code",[s._v("$string")]),s._v(" 结尾部分截取 "),t("code",[s._v("$substring")]),s._v(" 字符串，其中 "),t("code",[s._v("$substring")]),s._v(" 是正则表达式。")]),s._v(" "),t("h4",{attrs:{id:"expr-string-substring-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#expr-string-substring-3"}},[s._v("#")]),s._v(" "),t("code",[s._v("expr \"$string\" : '.*\\($substring\\)'")])]),s._v(" "),t("p",[s._v("从 "),t("code",[s._v("$string")]),s._v(" 结尾部分截取 "),t("code",[s._v("$substring")]),s._v(" 字符串，其中 "),t("code",[s._v("$substring")]),s._v(" 是正则表达式。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stringZ")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("abcABC123ABCabc\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#                ======")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expr")]),s._v(" match "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$stringZ")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.*\\([A-C][A-C][A-C][a-c]*\\)'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ABCabc")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$stringZ")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.*\\(......\\)'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("                       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ABCabc")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"删除子串"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除子串"}},[s._v("#")]),s._v(" 删除子串")]),s._v(" "),t("h4",{attrs:{id:"string-substring"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#string-substring"}},[s._v("#")]),s._v(" "),t("code",[s._v("${string#substring}")])]),s._v(" "),t("p",[s._v("删除从 "),t("code",[s._v("$string")]),s._v(" 起始部分起，匹配到的最短的 "),t("code",[s._v("$substring")]),s._v("。")]),s._v(" "),t("h4",{attrs:{id:"string-substring-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#string-substring-2"}},[s._v("#")]),s._v(" "),t("code",[s._v("${string##substring}")])]),s._v(" "),t("p",[s._v("删除从 "),t("code",[s._v("$string")]),s._v(" 起始部分起，匹配到的最长的 "),t("code",[s._v("$substring")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stringZ")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("abcABC123ABCabc\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#       |----|          最长")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#       |----------|    最短")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${stringZ"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("a*C}")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 123ABCabc")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除 'a' 与 'c' 之间最短的匹配。")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${stringZ"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("##")]),s._v("a*C}")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# abc")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除 'a' 与 'c' 之间最长的匹配。")]),s._v("\n\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 你可以使用变量代替 substring。")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("X")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a*C'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${stringZ"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("$X}")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 123ABCabc")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${stringZ"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("##")]),s._v("$X}")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# abc")]),s._v("\n                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 同上。")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("h4",{attrs:{id:"string-substring-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#string-substring-3"}},[s._v("#")]),s._v(" "),t("code",[s._v("${string%substring}")])]),s._v(" "),t("p",[s._v("删除从 "),t("code",[s._v("$string")]),s._v(" 结尾部分起，匹配到的最短的 "),t("code",[s._v("$substring")]),s._v("。")]),s._v(" "),t("p",[s._v("例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 将当前目录下所有后缀名为 "TXT" 的文件改为 "txt" 后缀。')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 例如 "file1.TXT" 改为 "file1.txt"。')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SUFF")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("TXT\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("suff")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("txt\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("i")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" *.$SUFF"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" -f "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("i%.$SUFF"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$suff")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  除了从变量 $i 右侧匹配到的最短的字符串之外，")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#+ 其他一切都保持不变。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### 如果需要，循环可以压缩成一行的形式。")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 感谢 Rory Winston。")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("h4",{attrs:{id:"string-substring-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#string-substring-4"}},[s._v("#")]),s._v(" "),t("code",[s._v("${string%%substring}")])]),s._v(" "),t("p",[s._v("删除从 "),t("code",[s._v("$string")]),s._v(" 结尾部分起，匹配到的最长的 "),t("code",[s._v("$substring")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stringZ")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("abcABC123ABCabc\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#                    ||     最短")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#        |------------|     最长")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${stringZ"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("b*c}")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# abcABC123ABCa")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从结尾处删除 'b' 与 'c' 之间最短的匹配。")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${stringZ"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%%")]),s._v("b*c}")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# a")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从结尾处删除 'b' 与 'c' 之间最长的匹配。")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("这个操作对生成文件名非常有帮助。")]),s._v(" "),t("p",[s._v("样例 10-3. 改变图像文件的格式及文件名")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  cvt.sh:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#  将目录下所有的 MacPaint 文件转换为 "pbm" 格式。')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  使用由 Brian Henderson (bryanh@giraffe-data.com) 维护的")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#+ "netpbm" 包下的 "macptobpm" 二进制工具。')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  Netpbm 是大多数 Linux 发行版的标准组成部分。")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("OPERATION")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("macptopbm\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SUFFIX")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("pbm          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新的文件名后缀。")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -n "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("directory")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果已经通过脚本参数传入了目录名的情况……")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("directory")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PWD")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 否则就使用当前工作目录。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  假设目标目录下的所有 MacPaint 图像文件都拥有")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#+ ".mac" 的文件后缀名。')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$directory")]),s._v("/*    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 文件名匹配。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("filename")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v(".*c}")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#  从文件名中删除 ".mac" 后缀')]),s._v("\n                            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#+ ('.*c' 匹配 '.' 与 'c' 之间的")]),s._v("\n                            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  所有字符，包括其本身)。")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$OPERATION")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$filename")]),s._v("."),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$SUFFIX")]),s._v('"')]),s._v("\n                            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将转换结果重定向到新的文件。")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$file")]),s._v("               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在转换后删除原文件。")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$filename")]),s._v("."),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$SUFFIX")]),s._v('"')]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将记录输出到 stdout 中。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 练习：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -----")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这个脚本会将当前工作目录下的所有文件进行转换。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 修改脚本，使得它仅转换 ".mac" 后缀的文件。')]),s._v("\n\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# *** 还可以使用另外一种方法。 *** #")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将图像批处理转换成不同的格式。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 假设已经安装了 imagemagick。（在大部分 Linux 发行版中都有）")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("INFMT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("png   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以是 tif, jpg, gif 等等。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("OUTFMT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("pdf  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以是 tif, jpg, gif, pdf 等等。")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("pic")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" *"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$INFMT")]),s._v('"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("p2")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pic")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -e s/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(".$INFMT//"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# echo $p2")]),s._v("\n  convert "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pic")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$p2")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$OUTFMT")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br")])]),t("p",[s._v("样例 10-4. 将流音频格式转换成 ogg 格式")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ra2ogg.sh: 将流音频文件 (*.ra) 转换成 ogg 格式。")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 使用 "mplayer" 媒体播放器程序：')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#      http://www.mplayerhq.hu/homepage")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 使用 "ogg" 库与 "oggenc"：')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#      http://www.xiph.org/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 脚本同时需要安装一些解码器，例如 sipr.so 等等一些。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这些解码器可以在 compat-libstdc++ 包中找到。")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("OFILEPREF")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${1"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%%")]),s._v("ra}")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 删除 "ra" 后缀。')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("OFILESUFF")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("wav           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# wav 文件后缀。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("OUTFILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$OFILEPREF")]),s._v('"')]),s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$OFILESUFF")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\nE_NOARGS=85\n\nif [ -z "')]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" ]          # 必须指定一个文件进行转换。\nthen\n  echo "')]),s._v("Usage: "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("basename")]),s._v(" $0"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("filename"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\n  exit '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$E_NOAGRS")]),s._v('\nfi\n\n\n######################################################\nmplayer "')]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" -ao pcm:file='),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$OUTFILE")]),s._v('\noggenc "')]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$OUTFILE")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"  # 由 oggenc 自动加上正确的文件后缀名。\n######################################################\n\nrm "')]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$OUTFILE")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"      # 立即删除 *.wav 文件。\n                   # 如果你仍需保留原文件，注释掉上面这一行即可。\n                   \nexit '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v('\n\n#  注意：\n#  -----\n#  在网站上，点击一个 *.ram 的流媒体音频文件\n#+ 通常只会下载到 *.ra 音频文件的 URL。\n#  你可以使用 "')]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" 或者类似的工具下载 *.ra 文件本身。\n\n\n#  练习：\n#  -----\n#  这个脚本仅仅转换 *.ra 文件。\n#  修改脚本增加适应性，使其可以转换 *.ram 或其他文件格式。\n#\n#  如果你非常有热情，你可以扩展这个脚本使其\n#+ 可以自动下载并且转换流媒体音频文件。\n#  给定一个 URL，自动下载流媒体音频文件 (使用 "')]),s._v('wget"'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("，\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#+ 然后转换它。")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br")])]),t("p",[s._v("下面是使用字符串截取结构对 "),t("a",{attrs:{href:"http://tldp.org/LDP/abs/html/extmisc.html#GETOPTY",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("getopt")]),t("OutboundLink")],1),s._v(" 的一个简单模拟。")]),s._v(" "),t("p",[s._v("样例 10-5. 模拟 "),t("code",[s._v("getopt")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# getopt-simple.sh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 作者: Chris Morgan")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 允许在高级脚本编程指南中使用。")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("getopt_simple")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"getopt_simple()"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"Parameters are '"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$*")]),s._v("'\"")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("until")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -z "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"Processing parameter of: '"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("'\"")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${1"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("0"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("1}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tmp")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${1"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("1}")]),s._v("               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除开头的 '/'")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("parameter")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${tmp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%%")]),s._v("=*}")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取出名称。")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${tmp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("##")]),s._v("*=}")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取出值。")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"Parameter: '"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$parameter")]),s._v("', value: '"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$value")]),s._v("'\"")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("eval")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$parameter")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$value")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("shift")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将所有参数传递给 getopt_simple()。")]),s._v("\ngetopt_simple "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$*")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"test is '"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$test")]),s._v("'\"")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"test2 is '"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$test2")]),s._v("'\"")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以查看该脚本的修改版 UseGetOpt.sh。")]),s._v("\n\n---\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" getopt_example.sh /test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("value1 /test2"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("value2\n\nParameters are "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/test=value1 /test2=value2'")]),s._v("\nProcessing parameter of: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/test=value1'")]),s._v("\nParameter: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'test'")]),s._v(", value: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'value1'")]),s._v("\nProcessing parameter of: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/test2=value2'")]),s._v("\nParameter: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'test2'")]),s._v(", value: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'value2'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'value1'")]),s._v("\ntest2 is "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'value2'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br")])]),t("h3",{attrs:{id:"子串替换"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#子串替换"}},[s._v("#")]),s._v(" 子串替换")]),s._v(" "),t("h4",{attrs:{id:"string-substring-replacement"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#string-substring-replacement"}},[s._v("#")]),s._v(" "),t("code",[s._v("${string/substring/replacement}")])]),s._v(" "),t("p",[s._v("替换匹配到的第一个 "),t("code",[s._v("$substring")]),s._v(" 为 "),t("code",[s._v("$replacement")]),s._v("。"),t("sup",{staticClass:"footnote-ref"},[t("a",{attrs:{href:"#fn2"}},[s._v("[2]")]),t("a",{staticClass:"footnote-anchor",attrs:{id:"fnref2"}})])]),s._v(" "),t("h4",{attrs:{id:"string-substring-replacement-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#string-substring-replacement-2"}},[s._v("#")]),s._v(" "),t("code",[s._v("${string//substring/replacement}")])]),s._v(" "),t("p",[s._v("替换匹配到的所有 "),t("code",[s._v("$substring")]),s._v(" 为 "),t("code",[s._v("$replacement")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stringZ")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("abcABC123ABCabc\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${stringZ"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("abc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("xyz}")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# xyzABC123ABCabc")]),s._v("\n                              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将匹配到的第一个 'abc' 替换为 'xyz'。")]),s._v("\n                              \n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${stringZ"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("abc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("xyz}")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# xyzABC123ABCxyz")]),s._v("\n                              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将匹配到的所有 'abc' 替换为 'xyz'。")]),s._v("\n                              \n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("  ---------------\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$stringZ")]),s._v('"')]),s._v("               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# abcABC123ABCabc")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("  ---------------\n                              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 字符串本身并不会被修改！")]),s._v("\n                              \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 匹配以及替换的字符串可以是参数么？")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("match")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("abc\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("repl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("000\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${stringZ"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("$match"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("$repl}")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 000ABC123ABCabc")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#              ^      ^         ^^^")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${stringZ"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("$match"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("$repl}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 000ABC123ABC000")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Yes!          ^      ^        ^^^         ^^^")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果没有给定 $replacement 字符串会怎样？")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${stringZ"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("abc}")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ABC123ABCabc")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${stringZ"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("abc}")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ABC123ABC")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 仅仅是将其删除而已。")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br")])]),t("h4",{attrs:{id:"string-substring-replacement-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#string-substring-replacement-3"}},[s._v("#")]),s._v(" "),t("code",[s._v("${string/#substring/replacement}")])]),s._v(" "),t("p",[s._v("替换 "),t("code",[s._v("$string")]),s._v(" 中最前端匹配到的 "),t("code",[s._v("$substring")]),s._v(" 为 "),t("code",[s._v("$replacement")]),s._v("。")]),s._v(" "),t("h4",{attrs:{id:"string-substring-replacement-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#string-substring-replacement-4"}},[s._v("#")]),s._v(" "),t("code",[s._v("${string/%substring/replacement}")])]),s._v(" "),t("p",[s._v("替换 "),t("code",[s._v("$string")]),s._v(" 中最末端匹配到的 "),t("code",[s._v("$substring")]),s._v(" 为 "),t("code",[s._v("$replacement")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stringZ")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("abcABC123ABCabc\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${stringZ"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("abc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("XYZ}")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# XYZABC123ABCabc")]),s._v("\n                                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将前端的 'abc' 替换为 'XYZ'")]),s._v("\n                                  \n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${stringZ"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("abc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("XYZ}")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# abcABC123ABCXYZ")]),s._v("\n                                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将末端的 'abc' 替换为 'XYZ'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("hr",{staticClass:"footnotes-sep"}),s._v(" "),t("section",{staticClass:"footnotes"},[t("ol",{staticClass:"footnotes-list"},[t("li",{staticClass:"footnote-item",attrs:{id:"fn1"}},[t("p",[s._v("这种情况同时适用于命令行参数和传入函数的参数。 "),t("a",{staticClass:"footnote-backref",attrs:{href:"#fnref1"}},[s._v("↩︎")])])]),s._v(" "),t("li",{staticClass:"footnote-item",attrs:{id:"fn2"}},[t("p",[s._v("注意根据使用时上下文的不同，"),t("code",[s._v("$substring")]),s._v(" 和 "),t("code",[s._v("$replacement")]),s._v(" 可以是文本字符串也可以是变量。可以参考第一个样例。 "),t("a",{staticClass:"footnote-backref",attrs:{href:"#fnref2"}},[s._v("↩︎")])])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);