(window.webpackJsonp=window.webpackJsonp||[]).push([[181],{972:function(s,n,e){"use strict";e.r(n);var a=e(1),r=Object(a.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"_8-jenkins-常见问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-jenkins-常见问题"}},[s._v("#")]),s._v(" 8 Jenkins 常见问题")]),s._v(" "),e("h2",{attrs:{id:"jenkins报错error-cloning-remote-repo-origin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jenkins报错error-cloning-remote-repo-origin"}},[s._v("#")]),s._v(" Jenkins报错Error cloning remote repo 'origin'")]),s._v(" "),e("p",[s._v("Jenkins配置了2个节点，但是只有master安装了git，很有可能任务被调到slave上执行所以报错")]),s._v(" "),e("p",[s._v("解决办法")]),s._v(" "),e("ul",[e("li",[s._v("slave安装git")]),s._v(" "),e("li",[s._v("指定任务在master执行")])]),s._v(" "),e("h2",{attrs:{id:"jenkins添加从节点失败"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jenkins添加从节点失败"}},[s._v("#")]),s._v(" jenkins添加从节点失败")]),s._v(" "),e("p",[s._v("jenkins在添加从节点时\n可以在启动方式中选择：Non verifying Verification Strategy")]),s._v(" "),e("h2",{attrs:{id:"jenkins配置ldap错误导致无法登陆的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jenkins配置ldap错误导致无法登陆的问题"}},[s._v("#")]),s._v(" Jenkins配置ldap错误导致无法登陆的问题")]),s._v(" "),e("p",[s._v("为了方便用户管理，通过ldap集中式认证，让Gitlab和Jenkins都接入，这样就省去每个系统都是要创建用户的麻烦了。上一篇"),e("a",{attrs:{href:"https://www.58jb.com/html/121.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Jenkins整合ldap认证"),e("OutboundLink")],1),s._v("的文章中有网友发邮件说了，配置不当导致Jenkins无法登陆，可能文章未能详细说明。")]),s._v(" "),e("p",[s._v("运维人员都会有这样的操作，修改任何配置文件前都会来一个备份。就是确保万一出错了可以回到之前的状态。所以建议就是Jenkins配置的问题，特别是这个登陆认证的配置，一搞错了就无法登陆。甚至无法正常访问到系统。\n默认Centos7使用rpm安装的目录为：/var/lib/jenkins/")]),s._v(" "),e("p",[s._v("备份配置文件：config.xml")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@jenkins ~]# cp /var/lib/jenkins/config.xml{,$(date +%F)}\n[root@jenkins ~]# ls /var/lib/jenkins/config.xml\nconfig.xml            config.xml2019-06-12\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("然后在config.xml配置文件中找到这段关于ldap认证的信息：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('  <securityRealm class="hudson.security.LDAPSecurityRealm" plugin="ldap@1.20">\n    <disableMailAddre***esolver>false</disableMailAddre***esolver>\n    <configurations>\n      <jenkins.security.plugins.ldap.LDAPConfiguration>\n        <server>ldap://XXXXXX.com:389</server>\n        <rootDN>dc=XXXXXX,dc=com</rootDN>\n        <inhibitInferRootDN>false</inhibitInferRootDN>\n        <userSearchBase></userSearchBase>\n        <userSearch>uid={0}</userSearch>\n        <groupMembershipStrategy class="jenkins.security.plugins.ldap.FromGroupSearchLDAPGroupMembershipStrategy">\n          <filter>cn=jenkins</filter>\n        </groupMembershipStrategy>\n        <managerDN>uid=jarry,ou=People,dc=XXXXXX,dc=com</managerDN>\n        <managerPasswordSecret>{AQAAABAAAAAQWfZrb7qoIjewuj3SK/z53/oRo86cW5wi/t07QeW/4mM=}</managerPasswordSecret>\n        <displayNameAttributeName>uid</displayNameAttributeName>\n        <mailAddressAttributeName>mail</mailAddressAttributeName>\n        <ignoreIfUnavailable>false</ignoreIfUnavailable>\n        <extraEnvVars class="linked-hash-map">\n          <entry>\n            <string></string>\n            <string></string>\n          </entry>\n        </extraEnvVars>\n      </jenkins.security.plugins.ldap.LDAPConfiguration>\n    </configurations>\n    <userIdStrategy class="jenkins.model.IdStrategy$CaseInsensitive"/>\n    <groupIdStrategy class="jenkins.model.IdStrategy$CaseInsensitive"/>\n    <disableRolePrefixing>true</disableRolePrefixing>\n  </securityRealm>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br")])]),e("p",[s._v("上面的配置不当导致了无法通过ldap认证，而且导致jenkins也无法正常登陆了，可以把上面一段修改成以下样子：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('   <securityRealm class="hudson.security.HudsonPrivateSecurityRealm">\n     <disableSignup>false</disableSignup>\n     <enableCaptcha>false</enableCaptcha>\n   </securityRealm>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("文章来源：https://www.58jb.com/html/jenkins_ldap_login_failure.html")])])}),[],!1,null,null,null);n.default=r.exports}}]);