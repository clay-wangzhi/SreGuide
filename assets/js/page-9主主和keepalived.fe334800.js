(window.webpackJsonp=window.webpackJsonp||[]).push([[208],{1156:function(e,r,t){"use strict";t.r(r);var a=t(1),v=Object(a.a)({},(function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"_9-主主和keepalived"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-主主和keepalived"}},[e._v("#")]),e._v(" 9 主主和keepalived")]),e._v(" "),a("h2",{attrs:{id:"keepalived简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#keepalived简介"}},[e._v("#")]),e._v(" keepalived简介")]),e._v(" "),a("p",[e._v("keepalived是vrrp协议的实现，原生设计目的是为了高可用ipvs服务，keepalived能够配置文件中的定义生成ipvs规则，并能够对各RS的健康状态进行检测；通过共用的虚拟IP地址对外提供服务；每个热备组内同一时刻只有一台主服务器提供服务，其他服务器处于冗余状态，若当前在线的服务器宕机，其虚拟IP地址将会被其他服务器接替（优先级决定接替顺序），实现高可用为后端主机提供服务。")]),e._v(" "),a("p",[e._v("VRRP全称Virtual Router Redundancy Protocol，即"),a("a",{attrs:{href:"http://en.wikipedia.org/wiki/VRRP",target:"_blank",rel:"noopener noreferrer"}},[e._v("虚拟路由冗余协议"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("p",[e._v("虚拟路由冗余协议，可以认为是实现路由器高可用的协议，即将N台提供相同功能的路由器组成一个路由器组，这个组里面有一个master和多个backup，master上面有一个对外提供服务的vip（该路由器所在局域网内其他机器的默认路由为该vip），master会发组播，当backup收不到vrrp包时就认为master宕掉了，这时就需要根据"),a("a",{attrs:{href:"http://tools.ietf.org/html/rfc5798#section-5.1",target:"_blank",rel:"noopener noreferrer"}},[e._v("VRRP的优先级"),a("OutboundLink")],1),e._v("来"),a("a",{attrs:{href:"http://en.wikipedia.org/wiki/Virtual_Router_Redundancy_Protocol#Elections_of_master_routers",target:"_blank",rel:"noopener noreferrer"}},[e._v("选举一个backup当master"),a("OutboundLink")],1),e._v("。这样的话就可以保证路由器的高可用了。")]),e._v(" "),a("h2",{attrs:{id:"keepalived组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#keepalived组件"}},[e._v("#")]),e._v(" keepalived组件")]),e._v(" "),a("p",[e._v("Keepalived组件介绍")]),e._v(" "),a("p",[a("img",{attrs:{src:t(632),alt:"wKiom1gVgVqxP0nVAADi2pjRuog301.png"}})]),e._v(" "),a("ul",[a("li",[a("p",[e._v("core：keepalived核心组件，主进程的启动和维护，全局配置等。")])]),e._v(" "),a("li",[a("p",[e._v("vrrp stack：keepalived是基于vrrp协议实现高可用vps服务，vrrp则为相关子进程为其提供服务")])]),e._v(" "),a("li",[a("p",[e._v("check：检测keepalived的健康状态相关进程")])]),e._v(" "),a("li",[a("p",[e._v("system call:系统调用")]),e._v(" "),a("p",[e._v("watch dog:监控check和vrrp进程的看管者，check负责检测器子进程的健康状态，当其检测到master上的服务不可用时则通告vrrp将其转移至backup服务器上。")])])]),e._v(" "),a("h2",{attrs:{id:"mysql主主搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql主主搭建"}},[e._v("#")]),e._v(" mysql主主搭建")]),e._v(" "),a("p",[e._v("在主从的基础上，互换搭建一下就好了")]),e._v(" "),a("p",[e._v("不详细介绍")])])}),[],!1,null,null,null);r.default=v.exports},632:function(e,r,t){e.exports=t.p+"assets/img/wKiom1gVgVqxP0nVAADi2pjRuog301.6d7b7a18.png"}}]);